(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))d(f);new MutationObserver(f=>{for(const g of f)if(g.type==="childList")for(const p of g.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&d(p)}).observe(document,{childList:!0,subtree:!0});function s(f){const g={};return f.integrity&&(g.integrity=f.integrity),f.referrerPolicy&&(g.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?g.credentials="include":f.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function d(f){if(f.ep)return;f.ep=!0;const g=s(f);fetch(f.href,g)}})();var sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Gw(n){if(n.__esModule)return n;var l=n.default;if(typeof l=="function"){var s=function d(){return this instanceof d?Reflect.construct(l,arguments,this.constructor):l.apply(this,arguments)};s.prototype=l.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(n).forEach(function(d){var f=Object.getOwnPropertyDescriptor(n,d);Object.defineProperty(s,d,f.get?f:{enumerable:!0,get:function(){return n[d]}})}),s}var Yp={exports:{}},ud={},qp={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v0;function Xw(){if(v0)return lt;v0=1;var n=Symbol.for("react.element"),l=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),p=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),_=Symbol.iterator;function R(A){return A===null||typeof A!="object"?null:(A=_&&A[_]||A["@@iterator"],typeof A=="function"?A:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,H={};function $(A,K,pe){this.props=A,this.context=K,this.refs=H,this.updater=pe||D}$.prototype.isReactComponent={},$.prototype.setState=function(A,K){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,K,"setState")},$.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function T(){}T.prototype=$.prototype;function N(A,K,pe){this.props=A,this.context=K,this.refs=H,this.updater=pe||D}var M=N.prototype=new T;M.constructor=N,B(M,$.prototype),M.isPureReactComponent=!0;var P=Array.isArray,O=Object.prototype.hasOwnProperty,F={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function U(A,K,pe){var ge,ve={},Ce=null,je=null;if(K!=null)for(ge in K.ref!==void 0&&(je=K.ref),K.key!==void 0&&(Ce=""+K.key),K)O.call(K,ge)&&!b.hasOwnProperty(ge)&&(ve[ge]=K[ge]);var Pe=arguments.length-2;if(Pe===1)ve.children=pe;else if(1<Pe){for(var Te=Array(Pe),We=0;We<Pe;We++)Te[We]=arguments[We+2];ve.children=Te}if(A&&A.defaultProps)for(ge in Pe=A.defaultProps,Pe)ve[ge]===void 0&&(ve[ge]=Pe[ge]);return{$$typeof:n,type:A,key:Ce,ref:je,props:ve,_owner:F.current}}function Y(A,K){return{$$typeof:n,type:A.type,key:K,ref:A.ref,props:A.props,_owner:A._owner}}function re(A){return typeof A=="object"&&A!==null&&A.$$typeof===n}function se(A){var K={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(pe){return K[pe]})}var le=/\/+/g;function ce(A,K){return typeof A=="object"&&A!==null&&A.key!=null?se(""+A.key):K.toString(36)}function j(A,K,pe,ge,ve){var Ce=typeof A;(Ce==="undefined"||Ce==="boolean")&&(A=null);var je=!1;if(A===null)je=!0;else switch(Ce){case"string":case"number":je=!0;break;case"object":switch(A.$$typeof){case n:case l:je=!0}}if(je)return je=A,ve=ve(je),A=ge===""?"."+ce(je,0):ge,P(ve)?(pe="",A!=null&&(pe=A.replace(le,"$&/")+"/"),j(ve,K,pe,"",function(We){return We})):ve!=null&&(re(ve)&&(ve=Y(ve,pe+(!ve.key||je&&je.key===ve.key?"":(""+ve.key).replace(le,"$&/")+"/")+A)),K.push(ve)),1;if(je=0,ge=ge===""?".":ge+":",P(A))for(var Pe=0;Pe<A.length;Pe++){Ce=A[Pe];var Te=ge+ce(Ce,Pe);je+=j(Ce,K,pe,Te,ve)}else if(Te=R(A),typeof Te=="function")for(A=Te.call(A),Pe=0;!(Ce=A.next()).done;)Ce=Ce.value,Te=ge+ce(Ce,Pe++),je+=j(Ce,K,pe,Te,ve);else if(Ce==="object")throw K=String(A),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return je}function q(A,K,pe){if(A==null)return A;var ge=[],ve=0;return j(A,ge,"","",function(Ce){return K.call(pe,Ce,ve++)}),ge}function X(A){if(A._status===-1){var K=A._result;K=K(),K.then(function(pe){(A._status===0||A._status===-1)&&(A._status=1,A._result=pe)},function(pe){(A._status===0||A._status===-1)&&(A._status=2,A._result=pe)}),A._status===-1&&(A._status=0,A._result=K)}if(A._status===1)return A._result.default;throw A._result}var te={current:null},Q={transition:null},C={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:Q,ReactCurrentOwner:F};function L(){throw Error("act(...) is not supported in production builds of React.")}return lt.Children={map:q,forEach:function(A,K,pe){q(A,function(){K.apply(this,arguments)},pe)},count:function(A){var K=0;return q(A,function(){K++}),K},toArray:function(A){return q(A,function(K){return K})||[]},only:function(A){if(!re(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},lt.Component=$,lt.Fragment=s,lt.Profiler=f,lt.PureComponent=N,lt.StrictMode=d,lt.Suspense=w,lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C,lt.act=L,lt.cloneElement=function(A,K,pe){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var ge=B({},A.props),ve=A.key,Ce=A.ref,je=A._owner;if(K!=null){if(K.ref!==void 0&&(Ce=K.ref,je=F.current),K.key!==void 0&&(ve=""+K.key),A.type&&A.type.defaultProps)var Pe=A.type.defaultProps;for(Te in K)O.call(K,Te)&&!b.hasOwnProperty(Te)&&(ge[Te]=K[Te]===void 0&&Pe!==void 0?Pe[Te]:K[Te])}var Te=arguments.length-2;if(Te===1)ge.children=pe;else if(1<Te){Pe=Array(Te);for(var We=0;We<Te;We++)Pe[We]=arguments[We+2];ge.children=Pe}return{$$typeof:n,type:A.type,key:ve,ref:Ce,props:ge,_owner:je}},lt.createContext=function(A){return A={$$typeof:p,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:g,_context:A},A.Consumer=A},lt.createElement=U,lt.createFactory=function(A){var K=U.bind(null,A);return K.type=A,K},lt.createRef=function(){return{current:null}},lt.forwardRef=function(A){return{$$typeof:y,render:A}},lt.isValidElement=re,lt.lazy=function(A){return{$$typeof:S,_payload:{_status:-1,_result:A},_init:X}},lt.memo=function(A,K){return{$$typeof:v,type:A,compare:K===void 0?null:K}},lt.startTransition=function(A){var K=Q.transition;Q.transition={};try{A()}finally{Q.transition=K}},lt.unstable_act=L,lt.useCallback=function(A,K){return te.current.useCallback(A,K)},lt.useContext=function(A){return te.current.useContext(A)},lt.useDebugValue=function(){},lt.useDeferredValue=function(A){return te.current.useDeferredValue(A)},lt.useEffect=function(A,K){return te.current.useEffect(A,K)},lt.useId=function(){return te.current.useId()},lt.useImperativeHandle=function(A,K,pe){return te.current.useImperativeHandle(A,K,pe)},lt.useInsertionEffect=function(A,K){return te.current.useInsertionEffect(A,K)},lt.useLayoutEffect=function(A,K){return te.current.useLayoutEffect(A,K)},lt.useMemo=function(A,K){return te.current.useMemo(A,K)},lt.useReducer=function(A,K,pe){return te.current.useReducer(A,K,pe)},lt.useRef=function(A){return te.current.useRef(A)},lt.useState=function(A){return te.current.useState(A)},lt.useSyncExternalStore=function(A,K,pe){return te.current.useSyncExternalStore(A,K,pe)},lt.useTransition=function(){return te.current.useTransition()},lt.version="18.3.1",lt}var w0;function is(){return w0||(w0=1,qp.exports=Xw()),qp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0;function Kw(){if(S0)return ud;S0=1;var n=is(),l=Symbol.for("react.element"),s=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,f=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function p(y,w,v){var S,_={},R=null,D=null;v!==void 0&&(R=""+v),w.key!==void 0&&(R=""+w.key),w.ref!==void 0&&(D=w.ref);for(S in w)d.call(w,S)&&!g.hasOwnProperty(S)&&(_[S]=w[S]);if(y&&y.defaultProps)for(S in w=y.defaultProps,w)_[S]===void 0&&(_[S]=w[S]);return{$$typeof:l,type:y,key:R,ref:D,props:_,_owner:f.current}}return ud.Fragment=s,ud.jsx=p,ud.jsxs=p,ud}var _0;function Zw(){return _0||(_0=1,Yp.exports=Kw()),Yp.exports}var c=Zw(),W=is();const fe=Wm(W);var oh={},Gp={exports:{}},_r={},Xp={exports:{}},Kp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N0;function Qw(){return N0||(N0=1,function(n){function l(Q,C){var L=Q.length;Q.push(C);e:for(;0<L;){var A=L-1>>>1,K=Q[A];if(0<f(K,C))Q[A]=C,Q[L]=K,L=A;else break e}}function s(Q){return Q.length===0?null:Q[0]}function d(Q){if(Q.length===0)return null;var C=Q[0],L=Q.pop();if(L!==C){Q[0]=L;e:for(var A=0,K=Q.length,pe=K>>>1;A<pe;){var ge=2*(A+1)-1,ve=Q[ge],Ce=ge+1,je=Q[Ce];if(0>f(ve,L))Ce<K&&0>f(je,ve)?(Q[A]=je,Q[Ce]=L,A=Ce):(Q[A]=ve,Q[ge]=L,A=ge);else if(Ce<K&&0>f(je,L))Q[A]=je,Q[Ce]=L,A=Ce;else break e}}return C}function f(Q,C){var L=Q.sortIndex-C.sortIndex;return L!==0?L:Q.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;n.unstable_now=function(){return g.now()}}else{var p=Date,y=p.now();n.unstable_now=function(){return p.now()-y}}var w=[],v=[],S=1,_=null,R=3,D=!1,B=!1,H=!1,$=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(Q){for(var C=s(v);C!==null;){if(C.callback===null)d(v);else if(C.startTime<=Q)d(v),C.sortIndex=C.expirationTime,l(w,C);else break;C=s(v)}}function P(Q){if(H=!1,M(Q),!B)if(s(w)!==null)B=!0,X(O);else{var C=s(v);C!==null&&te(P,C.startTime-Q)}}function O(Q,C){B=!1,H&&(H=!1,T(U),U=-1),D=!0;var L=R;try{for(M(C),_=s(w);_!==null&&(!(_.expirationTime>C)||Q&&!se());){var A=_.callback;if(typeof A=="function"){_.callback=null,R=_.priorityLevel;var K=A(_.expirationTime<=C);C=n.unstable_now(),typeof K=="function"?_.callback=K:_===s(w)&&d(w),M(C)}else d(w);_=s(w)}if(_!==null)var pe=!0;else{var ge=s(v);ge!==null&&te(P,ge.startTime-C),pe=!1}return pe}finally{_=null,R=L,D=!1}}var F=!1,b=null,U=-1,Y=5,re=-1;function se(){return!(n.unstable_now()-re<Y)}function le(){if(b!==null){var Q=n.unstable_now();re=Q;var C=!0;try{C=b(!0,Q)}finally{C?ce():(F=!1,b=null)}}else F=!1}var ce;if(typeof N=="function")ce=function(){N(le)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,q=j.port2;j.port1.onmessage=le,ce=function(){q.postMessage(null)}}else ce=function(){$(le,0)};function X(Q){b=Q,F||(F=!0,ce())}function te(Q,C){U=$(function(){Q(n.unstable_now())},C)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_continueExecution=function(){B||D||(B=!0,X(O))},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return R},n.unstable_getFirstCallbackNode=function(){return s(w)},n.unstable_next=function(Q){switch(R){case 1:case 2:case 3:var C=3;break;default:C=R}var L=R;R=C;try{return Q()}finally{R=L}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Q,C){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var L=R;R=Q;try{return C()}finally{R=L}},n.unstable_scheduleCallback=function(Q,C,L){var A=n.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?A+L:A):L=A,Q){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=L+K,Q={id:S++,callback:C,priorityLevel:Q,startTime:L,expirationTime:K,sortIndex:-1},L>A?(Q.sortIndex=L,l(v,Q),s(w)===null&&Q===s(v)&&(H?(T(U),U=-1):H=!0,te(P,L-A))):(Q.sortIndex=K,l(w,Q),B||D||(B=!0,X(O))),Q},n.unstable_shouldYield=se,n.unstable_wrapCallback=function(Q){var C=R;return function(){var L=R;R=C;try{return Q.apply(this,arguments)}finally{R=L}}}}(Kp)),Kp}var b0;function Jw(){return b0||(b0=1,Xp.exports=Qw()),Xp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E0;function e1(){if(E0)return _r;E0=1;var n=is(),l=Jw();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=new Set,f={};function g(e,t){p(e,t),p(e+"Capture",t)}function p(e,t){for(f[e]=t,e=0;e<t.length;e++)d.add(t[e])}var y=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},_={};function R(e){return w.call(_,e)?!0:w.call(S,e)?!1:v.test(e)?_[e]=!0:(S[e]=!0,!1)}function D(e,t,o,a){if(o!==null&&o.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function B(e,t,o,a){if(t===null||typeof t>"u"||D(e,t,o,a))return!0;if(a)return!1;if(o!==null)switch(o.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function H(e,t,o,a,h,m,k){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=e,this.type=t,this.sanitizeURL=m,this.removeEmptyString=k}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$[e]=new H(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$[t]=new H(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){$[e]=new H(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$[e]=new H(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$[e]=new H(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){$[e]=new H(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){$[e]=new H(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){$[e]=new H(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){$[e]=new H(e,5,!1,e.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function N(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(T,N);$[t]=new H(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(T,N);$[t]=new H(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(T,N);$[t]=new H(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){$[e]=new H(e,1,!1,e.toLowerCase(),null,!1,!1)}),$.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){$[e]=new H(e,1,!1,e.toLowerCase(),null,!0,!0)});function M(e,t,o,a){var h=$.hasOwnProperty(t)?$[t]:null;(h!==null?h.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(B(t,o,h,a)&&(o=null),a||h===null?R(t)&&(o===null?e.removeAttribute(t):e.setAttribute(t,""+o)):h.mustUseProperty?e[h.propertyName]=o===null?h.type===3?!1:"":o:(t=h.attributeName,a=h.attributeNamespace,o===null?e.removeAttribute(t):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,a?e.setAttributeNS(a,t,o):e.setAttribute(t,o))))}var P=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),F=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),se=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),Q=Symbol.iterator;function C(e){return e===null||typeof e!="object"?null:(e=Q&&e[Q]||e["@@iterator"],typeof e=="function"?e:null)}var L=Object.assign,A;function K(e){if(A===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);A=t&&t[1]||""}return`
`+A+e}var pe=!1;function ge(e,t){if(!e||pe)return"";pe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(de){var a=de}Reflect.construct(e,[],t)}else{try{t.call()}catch(de){a=de}e.call(t.prototype)}else{try{throw Error()}catch(de){a=de}e()}}catch(de){if(de&&a&&typeof de.stack=="string"){for(var h=de.stack.split(`
`),m=a.stack.split(`
`),k=h.length-1,V=m.length-1;1<=k&&0<=V&&h[k]!==m[V];)V--;for(;1<=k&&0<=V;k--,V--)if(h[k]!==m[V]){if(k!==1||V!==1)do if(k--,V--,0>V||h[k]!==m[V]){var Z=`
`+h[k].replace(" at new "," at ");return e.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",e.displayName)),Z}while(1<=k&&0<=V);break}}}finally{pe=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?K(e):""}function ve(e){switch(e.tag){case 5:return K(e.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return e=ge(e.type,!1),e;case 11:return e=ge(e.type.render,!1),e;case 1:return e=ge(e.type,!0),e;default:return""}}function Ce(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case b:return"Fragment";case F:return"Portal";case Y:return"Profiler";case U:return"StrictMode";case ce:return"Suspense";case j:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case se:return(e.displayName||"Context")+".Consumer";case re:return(e._context.displayName||"Context")+".Provider";case le:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case q:return t=e.displayName||null,t!==null?t:Ce(e.type)||"Memo";case X:t=e._payload,e=e._init;try{return Ce(e(t))}catch{}}return null}function je(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(t);case 8:return t===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Pe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Te(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function We(e){var t=Te(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,m=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return h.call(this)},set:function(k){a=""+k,m.call(this,k)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(k){a=""+k},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ft(e){e._valueTracker||(e._valueTracker=We(e))}function St(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var o=t.getValue(),a="";return e&&(a=Te(e)?e.checked?"true":"false":e.value),e=a,e!==o?(t.setValue(e),!0):!1}function Pt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ot(e,t){var o=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function ct(e,t){var o=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;o=Pe(t.value!=null?t.value:o),e._wrapperState={initialChecked:a,initialValue:o,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Lt(e,t){t=t.checked,t!=null&&M(e,"checked",t,!1)}function Ze(e,t){Lt(e,t);var o=Pe(t.value),a=t.type;if(o!=null)a==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ft(e,t.type,o):t.hasOwnProperty("defaultValue")&&Ft(e,t.type,Pe(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Oe(e,t,o){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,o||t===e.value||(e.value=t),e.defaultValue=t}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function Ft(e,t,o){(t!=="number"||Pt(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var Dt=Array.isArray;function bt(e,t,o,a){if(e=e.options,t){t={};for(var h=0;h<o.length;h++)t["$"+o[h]]=!0;for(o=0;o<e.length;o++)h=t.hasOwnProperty("$"+e[o].value),e[o].selected!==h&&(e[o].selected=h),h&&a&&(e[o].defaultSelected=!0)}else{for(o=""+Pe(o),t=null,h=0;h<e.length;h++){if(e[h].value===o){e[h].selected=!0,a&&(e[h].defaultSelected=!0);return}t!==null||e[h].disabled||(t=e[h])}t!==null&&(t.selected=!0)}}function Qt(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function dn(e,t){var o=t.value;if(o==null){if(o=t.children,t=t.defaultValue,o!=null){if(t!=null)throw Error(s(92));if(Dt(o)){if(1<o.length)throw Error(s(93));o=o[0]}t=o}t==null&&(t=""),o=t}e._wrapperState={initialValue:Pe(o)}}function fn(e,t){var o=Pe(t.value),a=Pe(t.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),t.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),a!=null&&(e.defaultValue=""+a)}function sn(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ke(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?he(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ve,Je=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,o,a,h){MSApp.execUnsafeLocalFunction(function(){return e(t,o,a,h)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ve=Ve||document.createElement("div"),Ve.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _t(e,t){if(t){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=t;return}}e.textContent=t}var yt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},on=["Webkit","ms","Moz","O"];Object.keys(yt).forEach(function(e){on.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yt[t]=yt[e]})});function Rn(e,t,o){return t==null||typeof t=="boolean"||t===""?"":o||typeof t!="number"||t===0||yt.hasOwnProperty(e)&&yt[e]?(""+t).trim():t+"px"}function Ee(e,t){e=e.style;for(var o in t)if(t.hasOwnProperty(o)){var a=o.indexOf("--")===0,h=Rn(o,t[o],a);o==="float"&&(o="cssFloat"),a?e.setProperty(o,h):e[o]=h}}var He=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function et(e,t){if(t){if(He[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function qe(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ln=null;function hn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pn=null,Hn=null,sr=null;function Fr(e){if(e=Nn(e)){if(typeof pn!="function")throw Error(s(280));var t=e.stateNode;t&&(t=Ma(t),pn(e.stateNode,e.type,t))}}function Kl(e){Hn?sr?sr.push(e):sr=[e]:Hn=e}function Zl(){if(Hn){var e=Hn,t=sr;if(sr=Hn=null,Fr(e),t)for(e=0;e<t.length;e++)Fr(t[e])}}function Ql(e,t){return e(t)}function Uo(){}var Bo=!1;function Jl(e,t,o){if(Bo)return e(t,o);Bo=!0;try{return Ql(e,t,o)}finally{Bo=!1,(Hn!==null||sr!==null)&&(Uo(),Zl())}}function os(e,t){var o=e.stateNode;if(o===null)return null;var a=Ma(o);if(a===null)return null;o=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(s(231,t,typeof o));return o}var ls=!1;if(y)try{var as={};Object.defineProperty(as,"passive",{get:function(){ls=!0}}),window.addEventListener("test",as,as),window.removeEventListener("test",as,as)}catch{ls=!1}function Wo(e,t,o,a,h,m,k,V,Z){var de=Array.prototype.slice.call(arguments,3);try{t.apply(o,de)}catch(Se){this.onError(Se)}}var us=!1,Ys=null,qs=!1,Vo=null,Fu={onError:function(e){us=!0,Ys=e}};function Hu(e,t,o,a,h,m,k,V,Z){us=!1,Ys=null,Wo.apply(Fu,arguments)}function ea(e,t,o,a,h,m,k,V,Z){if(Hu.apply(this,arguments),us){if(us){var de=Ys;us=!1,Ys=null}else throw Error(s(198));qs||(qs=!0,Vo=de)}}function li(e){var t=e,o=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(o=t.return),e=t.return;while(e)}return t.tag===3?o:null}function Yo(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ta(e){if(li(e)!==e)throw Error(s(188))}function Uu(e){var t=e.alternate;if(!t){if(t=li(e),t===null)throw Error(s(188));return t!==e?null:e}for(var o=e,a=t;;){var h=o.return;if(h===null)break;var m=h.alternate;if(m===null){if(a=h.return,a!==null){o=a;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===o)return ta(h),e;if(m===a)return ta(h),t;m=m.sibling}throw Error(s(188))}if(o.return!==a.return)o=h,a=m;else{for(var k=!1,V=h.child;V;){if(V===o){k=!0,o=h,a=m;break}if(V===a){k=!0,a=h,o=m;break}V=V.sibling}if(!k){for(V=m.child;V;){if(V===o){k=!0,o=m,a=h;break}if(V===a){k=!0,a=m,o=h;break}V=V.sibling}if(!k)throw Error(s(189))}}if(o.alternate!==a)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?e:t}function na(e){return e=Uu(e),e!==null?ra(e):null}function ra(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ra(e);if(t!==null)return t;e=e.sibling}return null}var ia=l.unstable_scheduleCallback,sa=l.unstable_cancelCallback,cs=l.unstable_shouldYield,Bu=l.unstable_requestPaint,kt=l.unstable_now,Wu=l.unstable_getCurrentPriorityLevel,qo=l.unstable_ImmediatePriority,oa=l.unstable_UserBlockingPriority,ds=l.unstable_NormalPriority,Go=l.unstable_LowPriority,Xo=l.unstable_IdlePriority,Gs=null,or=null;function Ko(e){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(Gs,e,void 0,(e.current.flags&128)===128)}catch{}}var Er=Math.clz32?Math.clz32:Ld,Id=Math.log,$d=Math.LN2;function Ld(e){return e>>>=0,e===0?32:31-(Id(e)/$d|0)|0}var Xs=64,la=4194304;function Ks(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fs(e,t){var o=e.pendingLanes;if(o===0)return 0;var a=0,h=e.suspendedLanes,m=e.pingedLanes,k=o&268435455;if(k!==0){var V=k&~h;V!==0?a=Ks(V):(m&=k,m!==0&&(a=Ks(m)))}else k=o&~h,k!==0?a=Ks(k):m!==0&&(a=Ks(m));if(a===0)return 0;if(t!==0&&t!==a&&(t&h)===0&&(h=a&-a,m=t&-t,h>=m||h===16&&(m&4194240)!==0))return t;if((a&4)!==0&&(a|=o&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)o=31-Er(t),h=1<<o,a|=e[o],t&=~h;return a}function Fd(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xh(e,t){for(var o=e.suspendedLanes,a=e.pingedLanes,h=e.expirationTimes,m=e.pendingLanes;0<m;){var k=31-Er(m),V=1<<k,Z=h[k];Z===-1?((V&o)===0||(V&a)!==0)&&(h[k]=Fd(V,t)):Z<=t&&(e.expiredLanes|=V),m&=~V}}function aa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Vu(){var e=Xs;return Xs<<=1,(Xs&4194240)===0&&(Xs=64),e}function Zo(e){for(var t=[],o=0;31>o;o++)t.push(e);return t}function Qo(e,t,o){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Er(t),e[t]=o}function Hd(e,t){var o=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<o;){var h=31-Er(o),m=1<<h;t[h]=0,a[h]=-1,e[h]=-1,o&=~m}}function Jo(e,t){var o=e.entangledLanes|=t;for(e=e.entanglements;o;){var a=31-Er(o),h=1<<a;h&t|e[a]&t&&(e[a]|=t),o&=~h}}var vt=0;function hs(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Yu,ua,Ud,qu,Gu,ca=!1,el=[],Ti=null,Pi=null,Ri=null,Zs=new Map,tl=new Map,Ai=[],Kh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bd(e,t){switch(e){case"focusin":case"focusout":Ti=null;break;case"dragenter":case"dragleave":Pi=null;break;case"mouseover":case"mouseout":Ri=null;break;case"pointerover":case"pointerout":Zs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tl.delete(t.pointerId)}}function ps(e,t,o,a,h,m){return e===null||e.nativeEvent!==m?(e={blockedOn:t,domEventName:o,eventSystemFlags:a,nativeEvent:m,targetContainers:[h]},t!==null&&(t=Nn(t),t!==null&&ua(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,h!==null&&t.indexOf(h)===-1&&t.push(h),e)}function Zh(e,t,o,a,h){switch(t){case"focusin":return Ti=ps(Ti,e,t,o,a,h),!0;case"dragenter":return Pi=ps(Pi,e,t,o,a,h),!0;case"mouseover":return Ri=ps(Ri,e,t,o,a,h),!0;case"pointerover":var m=h.pointerId;return Zs.set(m,ps(Zs.get(m)||null,e,t,o,a,h)),!0;case"gotpointercapture":return m=h.pointerId,tl.set(m,ps(tl.get(m)||null,e,t,o,a,h)),!0}return!1}function Wd(e){var t=Wr(e.target);if(t!==null){var o=li(t);if(o!==null){if(t=o.tag,t===13){if(t=Yo(o),t!==null){e.blockedOn=t,Gu(e.priority,function(){Ud(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function da(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var o=pa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var a=new o.constructor(o.type,o);ln=a,o.target.dispatchEvent(a),ln=null}else return t=Nn(o),t!==null&&ua(t),e.blockedOn=o,!1;t.shift()}return!0}function Vd(e,t,o){da(e)&&o.delete(t)}function Qh(){ca=!1,Ti!==null&&da(Ti)&&(Ti=null),Pi!==null&&da(Pi)&&(Pi=null),Ri!==null&&da(Ri)&&(Ri=null),Zs.forEach(Vd),tl.forEach(Vd)}function Nt(e,t){e.blockedOn===t&&(e.blockedOn=null,ca||(ca=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Qh)))}function wt(e){function t(h){return Nt(h,e)}if(0<el.length){Nt(el[0],e);for(var o=1;o<el.length;o++){var a=el[o];a.blockedOn===e&&(a.blockedOn=null)}}for(Ti!==null&&Nt(Ti,e),Pi!==null&&Nt(Pi,e),Ri!==null&&Nt(Ri,e),Zs.forEach(t),tl.forEach(t),o=0;o<Ai.length;o++)a=Ai[o],a.blockedOn===e&&(a.blockedOn=null);for(;0<Ai.length&&(o=Ai[0],o.blockedOn===null);)Wd(o),o.blockedOn===null&&Ai.shift()}var Qs=P.ReactCurrentBatchConfig,fa=!0;function Jh(e,t,o,a){var h=vt,m=Qs.transition;Qs.transition=null;try{vt=1,Xu(e,t,o,a)}finally{vt=h,Qs.transition=m}}function ep(e,t,o,a){var h=vt,m=Qs.transition;Qs.transition=null;try{vt=4,Xu(e,t,o,a)}finally{vt=h,Qs.transition=m}}function Xu(e,t,o,a){if(fa){var h=pa(e,t,o,a);if(h===null)fc(e,t,a,ha,o),Bd(e,a);else if(Zh(h,e,t,o,a))a.stopPropagation();else if(Bd(e,a),t&4&&-1<Kh.indexOf(e)){for(;h!==null;){var m=Nn(h);if(m!==null&&Yu(m),m=pa(e,t,o,a),m===null&&fc(e,t,a,ha,o),m===h)break;h=m}h!==null&&a.stopPropagation()}else fc(e,t,a,null,o)}}var ha=null;function pa(e,t,o,a){if(ha=null,e=hn(a),e=Wr(e),e!==null)if(t=li(e),t===null)e=null;else if(o=t.tag,o===13){if(e=Yo(t),e!==null)return e;e=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ha=e,null}function Yd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wu()){case qo:return 1;case oa:return 4;case ds:case Go:return 16;case Xo:return 536870912;default:return 16}default:return 16}}var zt=null,nl=null,Hr=null;function Ku(){if(Hr)return Hr;var e,t=nl,o=t.length,a,h="value"in zt?zt.value:zt.textContent,m=h.length;for(e=0;e<o&&t[e]===h[e];e++);var k=o-e;for(a=1;a<=k&&t[o-a]===h[m-a];a++);return Hr=h.slice(e,1<a?1-a:void 0)}function Js(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function An(){return!0}function Zu(){return!1}function Un(e){function t(o,a,h,m,k){this._reactName=o,this._targetInst=h,this.type=a,this.nativeEvent=m,this.target=k,this.currentTarget=null;for(var V in e)e.hasOwnProperty(V)&&(o=e[V],this[V]=o?o(m):m[V]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?An:Zu,this.isPropagationStopped=Zu,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=An)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=An)},persist:function(){},isPersistent:An}),t}var gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ga=Un(gs),eo=L({},gs,{view:0,detail:0}),qd=Un(eo),Mn,Qu,Sn,ma=L({},eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Sn&&(Sn&&e.type==="mousemove"?(Mn=e.screenX-Sn.screenX,Qu=e.screenY-Sn.screenY):Qu=Mn=0,Sn=e),Mn)},movementY:function(e){return"movementY"in e?e.movementY:Qu}}),Ju=Un(ma),Mi=L({},ma,{dataTransfer:0}),xa=Un(Mi),ec=L({},eo,{relatedTarget:0}),jt=Un(ec),Di=L({},gs,{animationName:0,elapsedTime:0,pseudoElement:0}),tc=Un(Di),tp=L({},gs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nc=Un(tp),np=L({},gs,{data:0}),Gd=Un(np),rp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ya={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function to(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ya[e])?!!t[e]:!1}function rc(){return to}var Kd=L({},eo,{key:function(e){if(e.key){var t=rp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Js(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Xd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rc,charCode:function(e){return e.type==="keypress"?Js(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Js(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Zd=Un(Kd),ic=L({},ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),va=Un(ic),Qd=L({},eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rc}),ip=Un(Qd),sc=L({},gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),oc=Un(sc),sp=L({},ma,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Jd=Un(sp),Kn=[9,13,27,32],rl=y&&"CompositionEvent"in window,ai=null;y&&"documentMode"in document&&(ai=document.documentMode);var ef=y&&"TextEvent"in window&&!ai,lc=y&&(!rl||ai&&8<ai&&11>=ai),tf=" ",nf=!1;function rf(e,t){switch(e){case"keyup":return Kn.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var no=!1;function ro(e,t){switch(e){case"compositionend":return sf(t);case"keypress":return t.which!==32?null:(nf=!0,tf);case"textInput":return e=t.data,e===tf&&nf?null:e;default:return null}}function op(e,t){if(no)return e==="compositionend"||!rl&&rf(e,t)?(e=Ku(),Hr=nl=zt=null,no=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lc&&t.locale!=="ko"?null:t.data;default:return null}}var lp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!lp[e.type]:t==="textarea"}function ac(e,t,o,a){Kl(a),t=Ta(t,"onChange"),0<t.length&&(o=new ga("onChange","change",null,o,a),e.push({event:o,listeners:t}))}var lr=null,zi=null;function ap(e){ff(e,0)}function Sa(e){var t=tt(e);if(St(t))return e}function up(e,t){if(e==="change")return t}var ms=!1;if(y){var Zn;if(y){var _a="oninput"in document;if(!_a){var of=document.createElement("div");of.setAttribute("oninput","return;"),_a=typeof of.oninput=="function"}Zn=_a}else Zn=!1;ms=Zn&&(!document.documentMode||9<document.documentMode)}function lf(){lr&&(lr.detachEvent("onpropertychange",af),zi=lr=null)}function af(e){if(e.propertyName==="value"&&Sa(zi)){var t=[];ac(t,zi,e,hn(e)),Jl(ap,t)}}function cp(e,t,o){e==="focusin"?(lf(),lr=t,zi=o,lr.attachEvent("onpropertychange",af)):e==="focusout"&&lf()}function dp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sa(zi)}function io(e,t){if(e==="click")return Sa(t)}function ne(e,t){if(e==="input"||e==="change")return Sa(t)}function me(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ue=typeof Object.is=="function"?Object.is:me;function Ae(e,t){if(ue(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(a=0;a<o.length;a++){var h=o[a];if(!w.call(t,h)||!ue(e[h],t[h]))return!1}return!0}function Qe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gt(e,t){var o=Qe(e);e=0;for(var a;o;){if(o.nodeType===3){if(a=e+o.textContent.length,e<=t&&a>=t)return{node:o,offset:t-e};e=a}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Qe(o)}}function qt(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?qt(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Et(){for(var e=window,t=Pt();t instanceof e.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)e=t.contentWindow;else break;t=Pt(e.document)}return t}function il(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fp(e){var t=Et(),o=e.focusedElem,a=e.selectionRange;if(t!==o&&o&&o.ownerDocument&&qt(o.ownerDocument.documentElement,o)){if(a!==null&&il(o)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in o)o.selectionStart=t,o.selectionEnd=Math.min(e,o.value.length);else if(e=(t=o.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var h=o.textContent.length,m=Math.min(a.start,h);a=a.end===void 0?m:Math.min(a.end,h),!e.extend&&m>a&&(h=a,a=m,m=h),h=gt(o,m);var k=gt(o,a);h&&k&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==k.node||e.focusOffset!==k.offset)&&(t=t.createRange(),t.setStart(h.node,h.offset),e.removeAllRanges(),m>a?(e.addRange(t),e.extend(k.node,k.offset)):(t.setEnd(k.node,k.offset),e.addRange(t)))}}for(t=[],e=o;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<t.length;o++)e=t[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ar=y&&"documentMode"in document&&11>=document.documentMode,ui=null,uc=null,Ur=null,so=!1;function sl(e,t,o){var a=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;so||ui==null||ui!==Pt(a)||(a=ui,"selectionStart"in a&&il(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ur&&Ae(Ur,a)||(Ur=a,a=Ta(uc,"onSelect"),0<a.length&&(t=new ga("onSelect","select",null,t,o),e.push({event:t,listeners:a}),t.target=ui)))}function mt(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit"+e]="webkit"+t,o["Moz"+e]="moz"+t,o}var oo={animationend:mt("Animation","AnimationEnd"),animationiteration:mt("Animation","AnimationIteration"),animationstart:mt("Animation","AnimationStart"),transitionend:mt("Transition","TransitionEnd")},Na={},ol={};y&&(ol=document.createElement("div").style,"AnimationEvent"in window||(delete oo.animationend.animation,delete oo.animationiteration.animation,delete oo.animationstart.animation),"TransitionEvent"in window||delete oo.transitionend.transition);function ba(e){if(Na[e])return Na[e];if(!oo[e])return e;var t=oo[e],o;for(o in t)if(t.hasOwnProperty(o)&&o in ol)return Na[e]=t[o];return e}var uf=ba("animationend"),cf=ba("animationiteration"),ll=ba("animationstart"),ci=ba("transitionend"),al=new Map,cc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(e,t){al.set(e,t),g(t,[e])}for(var Ea=0;Ea<cc.length;Ea++){var Ca=cc[Ea],ka=Ca.toLowerCase(),df=Ca[0].toUpperCase()+Ca.slice(1);Cr(ka,"on"+df)}Cr(uf,"onAnimationEnd"),Cr(cf,"onAnimationIteration"),Cr(ll,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(ci,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xs=new Set("cancel close invalid load scroll toggle".split(" ").concat(di));function ul(e,t,o){var a=e.type||"unknown-event";e.currentTarget=o,ea(a,t,void 0,e),e.currentTarget=null}function ff(e,t){t=(t&4)!==0;for(var o=0;o<e.length;o++){var a=e[o],h=a.event;a=a.listeners;e:{var m=void 0;if(t)for(var k=a.length-1;0<=k;k--){var V=a[k],Z=V.instance,de=V.currentTarget;if(V=V.listener,Z!==m&&h.isPropagationStopped())break e;ul(h,V,de),m=Z}else for(k=0;k<a.length;k++){if(V=a[k],Z=V.instance,de=V.currentTarget,V=V.listener,Z!==m&&h.isPropagationStopped())break e;ul(h,V,de),m=Z}}}if(qs)throw e=Vo,qs=!1,Vo=null,e}function Rt(e,t){var o=t[Aa];o===void 0&&(o=t[Aa]=new Set);var a=e+"__bubble";o.has(a)||(ja(t,e,2,!1),o.add(a))}function dc(e,t,o){var a=0;t&&(a|=4),ja(o,e,a,t)}var ys="_reactListening"+Math.random().toString(36).slice(2);function Oi(e){if(!e[ys]){e[ys]=!0,d.forEach(function(o){o!=="selectionchange"&&(xs.has(o)||dc(o,!1,e),dc(o,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ys]||(t[ys]=!0,dc("selectionchange",!1,t))}}function ja(e,t,o,a){switch(Yd(t)){case 1:var h=Jh;break;case 4:h=ep;break;default:h=Xu}o=h.bind(null,t,o,e),h=void 0,!ls||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(h=!0),a?h!==void 0?e.addEventListener(t,o,{capture:!0,passive:h}):e.addEventListener(t,o,!0):h!==void 0?e.addEventListener(t,o,{passive:h}):e.addEventListener(t,o,!1)}function fc(e,t,o,a,h){var m=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var k=a.tag;if(k===3||k===4){var V=a.stateNode.containerInfo;if(V===h||V.nodeType===8&&V.parentNode===h)break;if(k===4)for(k=a.return;k!==null;){var Z=k.tag;if((Z===3||Z===4)&&(Z=k.stateNode.containerInfo,Z===h||Z.nodeType===8&&Z.parentNode===h))return;k=k.return}for(;V!==null;){if(k=Wr(V),k===null)return;if(Z=k.tag,Z===5||Z===6){a=m=k;continue e}V=V.parentNode}}a=a.return}Jl(function(){var de=m,Se=hn(o),Ne=[];e:{var we=al.get(e);if(we!==void 0){var Me=ga,ze=e;switch(e){case"keypress":if(Js(o)===0)break e;case"keydown":case"keyup":Me=Zd;break;case"focusin":ze="focus",Me=jt;break;case"focusout":ze="blur",Me=jt;break;case"beforeblur":case"afterblur":Me=jt;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=Ju;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=xa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=ip;break;case uf:case cf:case ll:Me=tc;break;case ci:Me=oc;break;case"scroll":Me=qd;break;case"wheel":Me=Jd;break;case"copy":case"cut":case"paste":Me=nc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=va}var Ie=(t&4)!==0,Vt=!Ie&&e==="scroll",oe=Ie?we!==null?we+"Capture":null:we;Ie=[];for(var ee=de,ae;ee!==null;){ae=ee;var be=ae.stateNode;if(ae.tag===5&&be!==null&&(ae=be,oe!==null&&(be=os(ee,oe),be!=null&&Ie.push(lo(ee,be,ae)))),Vt)break;ee=ee.return}0<Ie.length&&(we=new Me(we,ze,null,o,Se),Ne.push({event:we,listeners:Ie}))}}if((t&7)===0){e:{if(we=e==="mouseover"||e==="pointerover",Me=e==="mouseout"||e==="pointerout",we&&o!==ln&&(ze=o.relatedTarget||o.fromElement)&&(Wr(ze)||ze[Qn]))break e;if((Me||we)&&(we=Se.window===Se?Se:(we=Se.ownerDocument)?we.defaultView||we.parentWindow:window,Me?(ze=o.relatedTarget||o.toElement,Me=de,ze=ze?Wr(ze):null,ze!==null&&(Vt=li(ze),ze!==Vt||ze.tag!==5&&ze.tag!==6)&&(ze=null)):(Me=null,ze=de),Me!==ze)){if(Ie=Ju,be="onMouseLeave",oe="onMouseEnter",ee="mouse",(e==="pointerout"||e==="pointerover")&&(Ie=va,be="onPointerLeave",oe="onPointerEnter",ee="pointer"),Vt=Me==null?we:tt(Me),ae=ze==null?we:tt(ze),we=new Ie(be,ee+"leave",Me,o,Se),we.target=Vt,we.relatedTarget=ae,be=null,Wr(Se)===de&&(Ie=new Ie(oe,ee+"enter",ze,o,Se),Ie.target=ae,Ie.relatedTarget=Vt,be=Ie),Vt=be,Me&&ze)t:{for(Ie=Me,oe=ze,ee=0,ae=Ie;ae;ae=ao(ae))ee++;for(ae=0,be=oe;be;be=ao(be))ae++;for(;0<ee-ae;)Ie=ao(Ie),ee--;for(;0<ae-ee;)oe=ao(oe),ae--;for(;ee--;){if(Ie===oe||oe!==null&&Ie===oe.alternate)break t;Ie=ao(Ie),oe=ao(oe)}Ie=null}else Ie=null;Me!==null&&Gt(Ne,we,Me,Ie,!1),ze!==null&&Vt!==null&&Gt(Ne,Vt,ze,Ie,!0)}}e:{if(we=de?tt(de):window,Me=we.nodeName&&we.nodeName.toLowerCase(),Me==="select"||Me==="input"&&we.type==="file")var $e=up;else if(wa(we))if(ms)$e=ne;else{$e=dp;var Ue=cp}else(Me=we.nodeName)&&Me.toLowerCase()==="input"&&(we.type==="checkbox"||we.type==="radio")&&($e=io);if($e&&($e=$e(e,de))){ac(Ne,$e,o,Se);break e}Ue&&Ue(e,we,de),e==="focusout"&&(Ue=we._wrapperState)&&Ue.controlled&&we.type==="number"&&Ft(we,"number",we.value)}switch(Ue=de?tt(de):window,e){case"focusin":(wa(Ue)||Ue.contentEditable==="true")&&(ui=Ue,uc=de,Ur=null);break;case"focusout":Ur=uc=ui=null;break;case"mousedown":so=!0;break;case"contextmenu":case"mouseup":case"dragend":so=!1,sl(Ne,o,Se);break;case"selectionchange":if(ar)break;case"keydown":case"keyup":sl(Ne,o,Se)}var Fe;if(rl)e:{switch(e){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else no?rf(e,o)&&(Ge="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(Ge="onCompositionStart");Ge&&(lc&&o.locale!=="ko"&&(no||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&no&&(Fe=Ku()):(zt=Se,nl="value"in zt?zt.value:zt.textContent,no=!0)),Ue=Ta(de,Ge),0<Ue.length&&(Ge=new Gd(Ge,e,null,o,Se),Ne.push({event:Ge,listeners:Ue}),Fe?Ge.data=Fe:(Fe=sf(o),Fe!==null&&(Ge.data=Fe)))),(Fe=ef?ro(e,o):op(e,o))&&(de=Ta(de,"onBeforeInput"),0<de.length&&(Se=new Gd("onBeforeInput","beforeinput",null,o,Se),Ne.push({event:Se,listeners:de}),Se.data=Fe))}ff(Ne,t)})}function lo(e,t,o){return{instance:e,listener:t,currentTarget:o}}function Ta(e,t){for(var o=t+"Capture",a=[];e!==null;){var h=e,m=h.stateNode;h.tag===5&&m!==null&&(h=m,m=os(e,o),m!=null&&a.unshift(lo(e,m,h)),m=os(e,t),m!=null&&a.push(lo(e,m,h))),e=e.return}return a}function ao(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Gt(e,t,o,a,h){for(var m=t._reactName,k=[];o!==null&&o!==a;){var V=o,Z=V.alternate,de=V.stateNode;if(Z!==null&&Z===a)break;V.tag===5&&de!==null&&(V=de,h?(Z=os(o,m),Z!=null&&k.unshift(lo(o,Z,V))):h||(Z=os(o,m),Z!=null&&k.push(lo(o,Z,V)))),o=o.return}k.length!==0&&e.push({event:t,listeners:k})}var _n=/\r\n?/g,hp=/\u0000|\uFFFD/g;function hf(e){return(typeof e=="string"?e:""+e).replace(_n,`
`).replace(hp,"")}function cl(e,t,o){if(t=hf(t),hf(e)!==t&&o)throw Error(s(425))}function Pa(){}var dl=null,vs=null;function fl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ii=typeof setTimeout=="function"?setTimeout:void 0,hl=typeof clearTimeout=="function"?clearTimeout:void 0,uo=typeof Promise=="function"?Promise:void 0,Ra=typeof queueMicrotask=="function"?queueMicrotask:typeof uo<"u"?function(e){return uo.resolve(null).then(e).catch(co)}:Ii;function co(e){setTimeout(function(){throw e})}function hc(e,t){var o=t,a=0;do{var h=o.nextSibling;if(e.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(a===0){e.removeChild(h),wt(t);return}a--}else o!=="$"&&o!=="$?"&&o!=="$!"||a++;o=h}while(o);wt(t)}function $i(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function pf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(t===0)return e;t--}else o==="/$"&&t++}e=e.previousSibling}return null}var fo=Math.random().toString(36).slice(2),Br="__reactFiber$"+fo,Li="__reactProps$"+fo,Qn="__reactContainer$"+fo,Aa="__reactEvents$"+fo,z="__reactListeners$"+fo,ho="__reactHandles$"+fo;function Wr(e){var t=e[Br];if(t)return t;for(var o=e.parentNode;o;){if(t=o[Qn]||o[Br]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(e=pf(e);e!==null;){if(o=e[Br])return o;e=pf(e)}return t}e=o,o=e.parentNode}return null}function Nn(e){return e=e[Br]||e[Qn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function tt(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function Ma(e){return e[Li]||null}var pc=[],po=-1;function Bn(e){return{current:e}}function At(e){0>po||(e.current=pc[po],pc[po]=null,po--)}function Tt(e,t){po++,pc[po]=e.current,e.current=t}var Fi={},bn=Bn(Fi),Wn=Bn(!1),Dn=Fi;function go(e,t){var o=e.type.contextTypes;if(!o)return Fi;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var h={},m;for(m in o)h[m]=t[m];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=h),h}function Vn(e){return e=e.childContextTypes,e!=null}function Da(){At(Wn),At(bn)}function gf(e,t,o){if(bn.current!==Fi)throw Error(s(168));Tt(bn,t),Tt(Wn,o)}function mf(e,t,o){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return o;a=a.getChildContext();for(var h in a)if(!(h in t))throw Error(s(108,je(e)||"Unknown",h));return L({},o,a)}function ur(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fi,Dn=bn.current,Tt(bn,e),Tt(Wn,Wn.current),!0}function xf(e,t,o){var a=e.stateNode;if(!a)throw Error(s(169));o?(e=mf(e,t,Dn),a.__reactInternalMemoizedMergedChildContext=e,At(Wn),At(bn),Tt(bn,e)):At(Wn),Tt(Wn,o)}var fi=null,za=!1,gc=!1;function yf(e){fi===null?fi=[e]:fi.push(e)}function ws(e){za=!0,yf(e)}function Hi(){if(!gc&&fi!==null){gc=!0;var e=0,t=vt;try{var o=fi;for(vt=1;e<o.length;e++){var a=o[e];do a=a(!0);while(a!==null)}fi=null,za=!1}catch(h){throw fi!==null&&(fi=fi.slice(e+1)),ia(qo,Hi),h}finally{vt=t,gc=!1}}return null}var mo=[],En=0,Oa=null,Ia=0,cr=[],dr=0,Ss=null,Vr=1,Yr="";function _s(e,t){mo[En++]=Ia,mo[En++]=Oa,Oa=e,Ia=t}function vf(e,t,o){cr[dr++]=Vr,cr[dr++]=Yr,cr[dr++]=Ss,Ss=e;var a=Vr;e=Yr;var h=32-Er(a)-1;a&=~(1<<h),o+=1;var m=32-Er(t)+h;if(30<m){var k=h-h%5;m=(a&(1<<k)-1).toString(32),a>>=k,h-=k,Vr=1<<32-Er(t)+h|o<<h|a,Yr=m+e}else Vr=1<<m|o<<h|a,Yr=e}function pl(e){e.return!==null&&(_s(e,1),vf(e,1,0))}function Ns(e){for(;e===Oa;)Oa=mo[--En],mo[En]=null,Ia=mo[--En],mo[En]=null;for(;e===Ss;)Ss=cr[--dr],cr[dr]=null,Yr=cr[--dr],cr[dr]=null,Vr=cr[--dr],cr[dr]=null}var Cn=null,Jn=null,Mt=!1,kr=null;function qr(e,t){var o=yr(5,null,null,0);o.elementType="DELETED",o.stateNode=t,o.return=e,t=e.deletions,t===null?(e.deletions=[o],e.flags|=16):t.push(o)}function $a(e,t){switch(e.tag){case 5:var o=e.type;return t=t.nodeType!==1||o.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Cn=e,Jn=$i(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Cn=e,Jn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(o=Ss!==null?{id:Vr,overflow:Yr}:null,e.memoizedState={dehydrated:t,treeContext:o,retryLane:1073741824},o=yr(18,null,null,0),o.stateNode=t,o.return=e,e.child=o,Cn=e,Jn=null,!0):!1;default:return!1}}function hi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Yn(e){if(Mt){var t=Jn;if(t){var o=t;if(!$a(e,t)){if(hi(e))throw Error(s(418));t=$i(o.nextSibling);var a=Cn;t&&$a(e,t)?qr(a,o):(e.flags=e.flags&-4097|2,Mt=!1,Cn=e)}}else{if(hi(e))throw Error(s(418));e.flags=e.flags&-4097|2,Mt=!1,Cn=e}}}function wf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Cn=e}function gl(e){if(e!==Cn)return!1;if(!Mt)return wf(e),Mt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fl(e.type,e.memoizedProps)),t&&(t=Jn)){if(hi(e))throw mc(),Error(s(418));for(;t;)qr(e,t),t=$i(t.nextSibling)}if(wf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(t===0){Jn=$i(e.nextSibling);break e}t--}else o!=="$"&&o!=="$!"&&o!=="$?"||t++}e=e.nextSibling}Jn=null}}else Jn=Cn?$i(e.stateNode.nextSibling):null;return!0}function mc(){for(var e=Jn;e;)e=$i(e.nextSibling)}function Gr(){Jn=Cn=null,Mt=!1}function Xr(e){kr===null?kr=[e]:kr.push(e)}var Sf=P.ReactCurrentBatchConfig;function ml(e,t,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(s(309));var a=o.stateNode}if(!a)throw Error(s(147,e));var h=a,m=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===m?t.ref:(t=function(k){var V=h.refs;k===null?delete V[m]:V[m]=k},t._stringRef=m,t)}if(typeof e!="string")throw Error(s(284));if(!o._owner)throw Error(s(290,e))}return e}function bs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _f(e){var t=e._init;return t(e._payload)}function xc(e){function t(oe,ee){if(e){var ae=oe.deletions;ae===null?(oe.deletions=[ee],oe.flags|=16):ae.push(ee)}}function o(oe,ee){if(!e)return null;for(;ee!==null;)t(oe,ee),ee=ee.sibling;return null}function a(oe,ee){for(oe=new Map;ee!==null;)ee.key!==null?oe.set(ee.key,ee):oe.set(ee.index,ee),ee=ee.sibling;return oe}function h(oe,ee){return oe=Dr(oe,ee),oe.index=0,oe.sibling=null,oe}function m(oe,ee,ae){return oe.index=ae,e?(ae=oe.alternate,ae!==null?(ae=ae.index,ae<ee?(oe.flags|=2,ee):ae):(oe.flags|=2,ee)):(oe.flags|=1048576,ee)}function k(oe){return e&&oe.alternate===null&&(oe.flags|=2),oe}function V(oe,ee,ae,be){return ee===null||ee.tag!==6?(ee=rd(ae,oe.mode,be),ee.return=oe,ee):(ee=h(ee,ae),ee.return=oe,ee)}function Z(oe,ee,ae,be){var $e=ae.type;return $e===b?Se(oe,ee,ae.props.children,be,ae.key):ee!==null&&(ee.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===X&&_f($e)===ee.type)?(be=h(ee,ae.props),be.ref=ml(oe,ee,ae),be.return=oe,be):(be=vu(ae.type,ae.key,ae.props,null,oe.mode,be),be.ref=ml(oe,ee,ae),be.return=oe,be)}function de(oe,ee,ae,be){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ae.containerInfo||ee.stateNode.implementation!==ae.implementation?(ee=id(ae,oe.mode,be),ee.return=oe,ee):(ee=h(ee,ae.children||[]),ee.return=oe,ee)}function Se(oe,ee,ae,be,$e){return ee===null||ee.tag!==7?(ee=zs(ae,oe.mode,be,$e),ee.return=oe,ee):(ee=h(ee,ae),ee.return=oe,ee)}function Ne(oe,ee,ae){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=rd(""+ee,oe.mode,ae),ee.return=oe,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case O:return ae=vu(ee.type,ee.key,ee.props,null,oe.mode,ae),ae.ref=ml(oe,null,ee),ae.return=oe,ae;case F:return ee=id(ee,oe.mode,ae),ee.return=oe,ee;case X:var be=ee._init;return Ne(oe,be(ee._payload),ae)}if(Dt(ee)||C(ee))return ee=zs(ee,oe.mode,ae,null),ee.return=oe,ee;bs(oe,ee)}return null}function we(oe,ee,ae,be){var $e=ee!==null?ee.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return $e!==null?null:V(oe,ee,""+ae,be);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case O:return ae.key===$e?Z(oe,ee,ae,be):null;case F:return ae.key===$e?de(oe,ee,ae,be):null;case X:return $e=ae._init,we(oe,ee,$e(ae._payload),be)}if(Dt(ae)||C(ae))return $e!==null?null:Se(oe,ee,ae,be,null);bs(oe,ae)}return null}function Me(oe,ee,ae,be,$e){if(typeof be=="string"&&be!==""||typeof be=="number")return oe=oe.get(ae)||null,V(ee,oe,""+be,$e);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case O:return oe=oe.get(be.key===null?ae:be.key)||null,Z(ee,oe,be,$e);case F:return oe=oe.get(be.key===null?ae:be.key)||null,de(ee,oe,be,$e);case X:var Ue=be._init;return Me(oe,ee,ae,Ue(be._payload),$e)}if(Dt(be)||C(be))return oe=oe.get(ae)||null,Se(ee,oe,be,$e,null);bs(ee,be)}return null}function ze(oe,ee,ae,be){for(var $e=null,Ue=null,Fe=ee,Ge=ee=0,cn=null;Fe!==null&&Ge<ae.length;Ge++){Fe.index>Ge?(cn=Fe,Fe=null):cn=Fe.sibling;var xt=we(oe,Fe,ae[Ge],be);if(xt===null){Fe===null&&(Fe=cn);break}e&&Fe&&xt.alternate===null&&t(oe,Fe),ee=m(xt,ee,Ge),Ue===null?$e=xt:Ue.sibling=xt,Ue=xt,Fe=cn}if(Ge===ae.length)return o(oe,Fe),Mt&&_s(oe,Ge),$e;if(Fe===null){for(;Ge<ae.length;Ge++)Fe=Ne(oe,ae[Ge],be),Fe!==null&&(ee=m(Fe,ee,Ge),Ue===null?$e=Fe:Ue.sibling=Fe,Ue=Fe);return Mt&&_s(oe,Ge),$e}for(Fe=a(oe,Fe);Ge<ae.length;Ge++)cn=Me(Fe,oe,Ge,ae[Ge],be),cn!==null&&(e&&cn.alternate!==null&&Fe.delete(cn.key===null?Ge:cn.key),ee=m(cn,ee,Ge),Ue===null?$e=cn:Ue.sibling=cn,Ue=cn);return e&&Fe.forEach(function(Ji){return t(oe,Ji)}),Mt&&_s(oe,Ge),$e}function Ie(oe,ee,ae,be){var $e=C(ae);if(typeof $e!="function")throw Error(s(150));if(ae=$e.call(ae),ae==null)throw Error(s(151));for(var Ue=$e=null,Fe=ee,Ge=ee=0,cn=null,xt=ae.next();Fe!==null&&!xt.done;Ge++,xt=ae.next()){Fe.index>Ge?(cn=Fe,Fe=null):cn=Fe.sibling;var Ji=we(oe,Fe,xt.value,be);if(Ji===null){Fe===null&&(Fe=cn);break}e&&Fe&&Ji.alternate===null&&t(oe,Fe),ee=m(Ji,ee,Ge),Ue===null?$e=Ji:Ue.sibling=Ji,Ue=Ji,Fe=cn}if(xt.done)return o(oe,Fe),Mt&&_s(oe,Ge),$e;if(Fe===null){for(;!xt.done;Ge++,xt=ae.next())xt=Ne(oe,xt.value,be),xt!==null&&(ee=m(xt,ee,Ge),Ue===null?$e=xt:Ue.sibling=xt,Ue=xt);return Mt&&_s(oe,Ge),$e}for(Fe=a(oe,Fe);!xt.done;Ge++,xt=ae.next())xt=Me(Fe,oe,Ge,xt.value,be),xt!==null&&(e&&xt.alternate!==null&&Fe.delete(xt.key===null?Ge:xt.key),ee=m(xt,ee,Ge),Ue===null?$e=xt:Ue.sibling=xt,Ue=xt);return e&&Fe.forEach(function(Dp){return t(oe,Dp)}),Mt&&_s(oe,Ge),$e}function Vt(oe,ee,ae,be){if(typeof ae=="object"&&ae!==null&&ae.type===b&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case O:e:{for(var $e=ae.key,Ue=ee;Ue!==null;){if(Ue.key===$e){if($e=ae.type,$e===b){if(Ue.tag===7){o(oe,Ue.sibling),ee=h(Ue,ae.props.children),ee.return=oe,oe=ee;break e}}else if(Ue.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===X&&_f($e)===Ue.type){o(oe,Ue.sibling),ee=h(Ue,ae.props),ee.ref=ml(oe,Ue,ae),ee.return=oe,oe=ee;break e}o(oe,Ue);break}else t(oe,Ue);Ue=Ue.sibling}ae.type===b?(ee=zs(ae.props.children,oe.mode,be,ae.key),ee.return=oe,oe=ee):(be=vu(ae.type,ae.key,ae.props,null,oe.mode,be),be.ref=ml(oe,ee,ae),be.return=oe,oe=be)}return k(oe);case F:e:{for(Ue=ae.key;ee!==null;){if(ee.key===Ue)if(ee.tag===4&&ee.stateNode.containerInfo===ae.containerInfo&&ee.stateNode.implementation===ae.implementation){o(oe,ee.sibling),ee=h(ee,ae.children||[]),ee.return=oe,oe=ee;break e}else{o(oe,ee);break}else t(oe,ee);ee=ee.sibling}ee=id(ae,oe.mode,be),ee.return=oe,oe=ee}return k(oe);case X:return Ue=ae._init,Vt(oe,ee,Ue(ae._payload),be)}if(Dt(ae))return ze(oe,ee,ae,be);if(C(ae))return Ie(oe,ee,ae,be);bs(oe,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,ee!==null&&ee.tag===6?(o(oe,ee.sibling),ee=h(ee,ae),ee.return=oe,oe=ee):(o(oe,ee),ee=rd(ae,oe.mode,be),ee.return=oe,oe=ee),k(oe)):o(oe,ee)}return Vt}var Bt=xc(!0),La=xc(!1),xl=Bn(null),er=null,Ui=null,xo=null;function pi(){xo=Ui=er=null}function Fa(e){var t=xl.current;At(xl),e._currentValue=t}function gn(e,t,o){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===o)break;e=e.return}}function Bi(e,t){er=e,xo=Ui=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(On=!0),e.firstContext=null)}function fr(e){var t=e._currentValue;if(xo!==e)if(e={context:e,memoizedValue:t,next:null},Ui===null){if(er===null)throw Error(s(308));Ui=e,er.dependencies={lanes:0,firstContext:e}}else Ui=Ui.next=e;return t}var Es=null;function yc(e){Es===null?Es=[e]:Es.push(e)}function Ha(e,t,o,a){var h=t.interleaved;return h===null?(o.next=o,yc(t)):(o.next=h.next,h.next=o),t.interleaved=o,gi(e,a)}function gi(e,t){e.lanes|=t;var o=e.alternate;for(o!==null&&(o.lanes|=t),o=e,e=e.return;e!==null;)e.childLanes|=t,o=e.alternate,o!==null&&(o.childLanes|=t),o=e,e=e.return;return o.tag===3?o.stateNode:null}var hr=!1;function Ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pr(e,t,o){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(ht&2)!==0){var h=a.pending;return h===null?t.next=t:(t.next=h.next,h.next=t),a.pending=t,gi(e,o)}return h=a.interleaved,h===null?(t.next=t,yc(a)):(t.next=h.next,h.next=t),a.interleaved=t,gi(e,o)}function Ba(e,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,o|=a,t.lanes=o,Jo(e,o)}}function bf(e,t){var o=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,o===a)){var h=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var k={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};m===null?h=m=k:m=m.next=k,o=o.next}while(o!==null);m===null?h=m=t:m=m.next=t}else h=m=t;o={baseState:a.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:a.shared,effects:a.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=t:e.next=t,o.lastBaseUpdate=t}function yo(e,t,o,a){var h=e.updateQueue;hr=!1;var m=h.firstBaseUpdate,k=h.lastBaseUpdate,V=h.shared.pending;if(V!==null){h.shared.pending=null;var Z=V,de=Z.next;Z.next=null,k===null?m=de:k.next=de,k=Z;var Se=e.alternate;Se!==null&&(Se=Se.updateQueue,V=Se.lastBaseUpdate,V!==k&&(V===null?Se.firstBaseUpdate=de:V.next=de,Se.lastBaseUpdate=Z))}if(m!==null){var Ne=h.baseState;k=0,Se=de=Z=null,V=m;do{var we=V.lane,Me=V.eventTime;if((a&we)===we){Se!==null&&(Se=Se.next={eventTime:Me,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var ze=e,Ie=V;switch(we=t,Me=o,Ie.tag){case 1:if(ze=Ie.payload,typeof ze=="function"){Ne=ze.call(Me,Ne,we);break e}Ne=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Ie.payload,we=typeof ze=="function"?ze.call(Me,Ne,we):ze,we==null)break e;Ne=L({},Ne,we);break e;case 2:hr=!0}}V.callback!==null&&V.lane!==0&&(e.flags|=64,we=h.effects,we===null?h.effects=[V]:we.push(V))}else Me={eventTime:Me,lane:we,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Se===null?(de=Se=Me,Z=Ne):Se=Se.next=Me,k|=we;if(V=V.next,V===null){if(V=h.shared.pending,V===null)break;we=V,V=we.next,we.next=null,h.lastBaseUpdate=we,h.shared.pending=null}}while(!0);if(Se===null&&(Z=Ne),h.baseState=Z,h.firstBaseUpdate=de,h.lastBaseUpdate=Se,t=h.shared.interleaved,t!==null){h=t;do k|=h.lane,h=h.next;while(h!==t)}else m===null&&(h.shared.lanes=0);Gi|=k,e.lanes=k,e.memoizedState=Ne}}function vc(e,t,o){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],h=a.callback;if(h!==null){if(a.callback=null,a=o,typeof h!="function")throw Error(s(191,h));h.call(a)}}}var yl={},Kr=Bn(yl),vl=Bn(yl),vo=Bn(yl);function xi(e){if(e===yl)throw Error(s(174));return e}function wc(e,t){switch(Tt(vo,t),Tt(vl,e),Tt(Kr,yl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ke(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ke(t,e)}At(Kr),Tt(Kr,t)}function Wi(){At(Kr),At(vl),At(vo)}function Sc(e){xi(vo.current);var t=xi(Kr.current),o=ke(t,e.type);t!==o&&(Tt(vl,e),Tt(Kr,o))}function Wa(e){vl.current===e&&(At(Kr),At(vl))}var Ot=Bn(0);function Cs(e){for(var t=e;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _c=[];function Va(){for(var e=0;e<_c.length;e++)_c[e]._workInProgressVersionPrimary=null;_c.length=0}var wl=P.ReactCurrentDispatcher,Nc=P.ReactCurrentBatchConfig,Vi=0,Ht=null,Wt=null,Jt=null,wo=!1,Sl=!1,ks=0,rt=0;function kn(){throw Error(s(321))}function bc(e,t){if(t===null)return!1;for(var o=0;o<t.length&&o<e.length;o++)if(!ue(e[o],t[o]))return!1;return!0}function js(e,t,o,a,h,m){if(Vi=m,Ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wl.current=e===null||e.memoizedState===null?gp:Qa,e=o(a,h),Sl){m=0;do{if(Sl=!1,ks=0,25<=m)throw Error(s(301));m+=1,Jt=Wt=null,t.updateQueue=null,wl.current=bo,e=o(a,h)}while(Sl)}if(wl.current=Za,t=Wt!==null&&Wt.next!==null,Vi=0,Jt=Wt=Ht=null,wo=!1,t)throw Error(s(300));return e}function Ya(){var e=ks!==0;return ks=0,e}function Zr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?Ht.memoizedState=Jt=e:Jt=Jt.next=e,Jt}function gr(){if(Wt===null){var e=Ht.alternate;e=e!==null?e.memoizedState:null}else e=Wt.next;var t=Jt===null?Ht.memoizedState:Jt.next;if(t!==null)Jt=t,Wt=e;else{if(e===null)throw Error(s(310));Wt=e,e={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Jt===null?Ht.memoizedState=Jt=e:Jt=Jt.next=e}return Jt}function jn(e,t){return typeof t=="function"?t(e):t}function Ec(e){var t=gr(),o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=e;var a=Wt,h=a.baseQueue,m=o.pending;if(m!==null){if(h!==null){var k=h.next;h.next=m.next,m.next=k}a.baseQueue=h=m,o.pending=null}if(h!==null){m=h.next,a=a.baseState;var V=k=null,Z=null,de=m;do{var Se=de.lane;if((Vi&Se)===Se)Z!==null&&(Z=Z.next={lane:0,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),a=de.hasEagerState?de.eagerState:e(a,de.action);else{var Ne={lane:Se,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null};Z===null?(V=Z=Ne,k=a):Z=Z.next=Ne,Ht.lanes|=Se,Gi|=Se}de=de.next}while(de!==null&&de!==m);Z===null?k=a:Z.next=V,ue(a,t.memoizedState)||(On=!0),t.memoizedState=a,t.baseState=k,t.baseQueue=Z,o.lastRenderedState=a}if(e=o.interleaved,e!==null){h=e;do m=h.lane,Ht.lanes|=m,Gi|=m,h=h.next;while(h!==e)}else h===null&&(o.lanes=0);return[t.memoizedState,o.dispatch]}function So(e){var t=gr(),o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=e;var a=o.dispatch,h=o.pending,m=t.memoizedState;if(h!==null){o.pending=null;var k=h=h.next;do m=e(m,k.action),k=k.next;while(k!==h);ue(m,t.memoizedState)||(On=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),o.lastRenderedState=m}return[m,a]}function qa(){}function Cc(e,t){var o=Ht,a=gr(),h=t(),m=!ue(a.memoizedState,h);if(m&&(a.memoizedState=h,On=!0),a=a.queue,Qr(yi.bind(null,o,a,e),[e]),a.getSnapshot!==t||m||Jt!==null&&Jt.memoizedState.tag&1){if(o.flags|=2048,_o(9,qn.bind(null,o,a,h,t),void 0,null),un===null)throw Error(s(349));(Vi&30)!==0||kc(o,t,h)}return h}function kc(e,t,o){e.flags|=16384,e={getSnapshot:t,value:o},t=Ht.updateQueue,t===null?(t={lastEffect:null,stores:null},Ht.updateQueue=t,t.stores=[e]):(o=t.stores,o===null?t.stores=[e]:o.push(e))}function qn(e,t,o,a){t.value=o,t.getSnapshot=a,Ga(t)&&jc(e)}function yi(e,t,o){return o(function(){Ga(t)&&jc(e)})}function Ga(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!ue(e,o)}catch{return!0}}function jc(e){var t=gi(e,1);t!==null&&Mr(t,e,1,-1)}function _l(e){var t=Zr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jn,lastRenderedState:e},t.queue=e,e=e.dispatch=Pf.bind(null,Ht,e),[t.memoizedState,e]}function _o(e,t,o,a){return e={tag:e,create:t,destroy:o,deps:a,next:null},t=Ht.updateQueue,t===null?(t={lastEffect:null,stores:null},Ht.updateQueue=t,t.lastEffect=e.next=e):(o=t.lastEffect,o===null?t.lastEffect=e.next=e:(a=o.next,o.next=e,e.next=a,t.lastEffect=e)),e}function Xa(){return gr().memoizedState}function Nl(e,t,o,a){var h=Zr();Ht.flags|=e,h.memoizedState=_o(1|t,o,void 0,a===void 0?null:a)}function No(e,t,o,a){var h=gr();a=a===void 0?null:a;var m=void 0;if(Wt!==null){var k=Wt.memoizedState;if(m=k.destroy,a!==null&&bc(a,k.deps)){h.memoizedState=_o(t,o,m,a);return}}Ht.flags|=e,h.memoizedState=_o(1|t,o,m,a)}function Ka(e,t){return Nl(8390656,8,e,t)}function Qr(e,t){return No(2048,8,e,t)}function Ef(e,t){return No(4,2,e,t)}function vi(e,t){return No(4,4,e,t)}function Tc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Pc(e,t,o){return o=o!=null?o.concat([e]):null,No(4,4,Tc.bind(null,t,e),o)}function bl(){}function Cf(e,t){var o=gr();t=t===void 0?null:t;var a=o.memoizedState;return a!==null&&t!==null&&bc(t,a[1])?a[0]:(o.memoizedState=[e,t],e)}function kf(e,t){var o=gr();t=t===void 0?null:t;var a=o.memoizedState;return a!==null&&t!==null&&bc(t,a[1])?a[0]:(e=e(),o.memoizedState=[e,t],e)}function jf(e,t,o){return(Vi&21)===0?(e.baseState&&(e.baseState=!1,On=!0),e.memoizedState=o):(ue(o,t)||(o=Vu(),Ht.lanes|=o,Gi|=o,e.baseState=!0),t)}function Tf(e,t){var o=vt;vt=o!==0&&4>o?o:4,e(!0);var a=Nc.transition;Nc.transition={};try{e(!1),t()}finally{vt=o,Nc.transition=a}}function Rc(){return gr().memoizedState}function pp(e,t,o){var a=Zi(e);if(o={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null},Ac(e))zn(t,o);else if(o=Ha(e,t,o,a),o!==null){var h=Ln();Mr(o,e,a,h),jr(o,t,a)}}function Pf(e,t,o){var a=Zi(e),h={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ac(e))zn(t,h);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var k=t.lastRenderedState,V=m(k,o);if(h.hasEagerState=!0,h.eagerState=V,ue(V,k)){var Z=t.interleaved;Z===null?(h.next=h,yc(t)):(h.next=Z.next,Z.next=h),t.interleaved=h;return}}catch{}finally{}o=Ha(e,t,h,a),o!==null&&(h=Ln(),Mr(o,e,a,h),jr(o,t,a))}}function Ac(e){var t=e.alternate;return e===Ht||t!==null&&t===Ht}function zn(e,t){Sl=wo=!0;var o=e.pending;o===null?t.next=t:(t.next=o.next,o.next=t),e.pending=t}function jr(e,t,o){if((o&4194240)!==0){var a=t.lanes;a&=e.pendingLanes,o|=a,t.lanes=o,Jo(e,o)}}var Za={readContext:fr,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useInsertionEffect:kn,useLayoutEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useMutableSource:kn,useSyncExternalStore:kn,useId:kn,unstable_isNewReconciler:!1},gp={readContext:fr,useCallback:function(e,t){return Zr().memoizedState=[e,t===void 0?null:t],e},useContext:fr,useEffect:Ka,useImperativeHandle:function(e,t,o){return o=o!=null?o.concat([e]):null,Nl(4194308,4,Tc.bind(null,t,e),o)},useLayoutEffect:function(e,t){return Nl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Nl(4,2,e,t)},useMemo:function(e,t){var o=Zr();return t=t===void 0?null:t,e=e(),o.memoizedState=[e,t],e},useReducer:function(e,t,o){var a=Zr();return t=o!==void 0?o(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=pp.bind(null,Ht,e),[a.memoizedState,e]},useRef:function(e){var t=Zr();return e={current:e},t.memoizedState=e},useState:_l,useDebugValue:bl,useDeferredValue:function(e){return Zr().memoizedState=e},useTransition:function(){var e=_l(!1),t=e[0];return e=Tf.bind(null,e[1]),Zr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,o){var a=Ht,h=Zr();if(Mt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=t(),un===null)throw Error(s(349));(Vi&30)!==0||kc(a,t,o)}h.memoizedState=o;var m={value:o,getSnapshot:t};return h.queue=m,Ka(yi.bind(null,a,m,e),[e]),a.flags|=2048,_o(9,qn.bind(null,a,m,o,t),void 0,null),o},useId:function(){var e=Zr(),t=un.identifierPrefix;if(Mt){var o=Yr,a=Vr;o=(a&~(1<<32-Er(a)-1)).toString(32)+o,t=":"+t+"R"+o,o=ks++,0<o&&(t+="H"+o.toString(32)),t+=":"}else o=rt++,t=":"+t+"r"+o.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Qa={readContext:fr,useCallback:Cf,useContext:fr,useEffect:Qr,useImperativeHandle:Pc,useInsertionEffect:Ef,useLayoutEffect:vi,useMemo:kf,useReducer:Ec,useRef:Xa,useState:function(){return Ec(jn)},useDebugValue:bl,useDeferredValue:function(e){var t=gr();return jf(t,Wt.memoizedState,e)},useTransition:function(){var e=Ec(jn)[0],t=gr().memoizedState;return[e,t]},useMutableSource:qa,useSyncExternalStore:Cc,useId:Rc,unstable_isNewReconciler:!1},bo={readContext:fr,useCallback:Cf,useContext:fr,useEffect:Qr,useImperativeHandle:Pc,useInsertionEffect:Ef,useLayoutEffect:vi,useMemo:kf,useReducer:So,useRef:Xa,useState:function(){return So(jn)},useDebugValue:bl,useDeferredValue:function(e){var t=gr();return Wt===null?t.memoizedState=e:jf(t,Wt.memoizedState,e)},useTransition:function(){var e=So(jn)[0],t=gr().memoizedState;return[e,t]},useMutableSource:qa,useSyncExternalStore:Cc,useId:Rc,unstable_isNewReconciler:!1};function mr(e,t){if(e&&e.defaultProps){t=L({},t),e=e.defaultProps;for(var o in e)t[o]===void 0&&(t[o]=e[o]);return t}return t}function Ja(e,t,o,a){t=e.memoizedState,o=o(a,t),o=o==null?t:L({},t,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var eu={isMounted:function(e){return(e=e._reactInternals)?li(e)===e:!1},enqueueSetState:function(e,t,o){e=e._reactInternals;var a=Ln(),h=Zi(e),m=mi(a,h);m.payload=t,o!=null&&(m.callback=o),t=pr(e,m,h),t!==null&&(Mr(t,e,h,a),Ba(t,e,h))},enqueueReplaceState:function(e,t,o){e=e._reactInternals;var a=Ln(),h=Zi(e),m=mi(a,h);m.tag=1,m.payload=t,o!=null&&(m.callback=o),t=pr(e,m,h),t!==null&&(Mr(t,e,h,a),Ba(t,e,h))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var o=Ln(),a=Zi(e),h=mi(o,a);h.tag=2,t!=null&&(h.callback=t),t=pr(e,h,a),t!==null&&(Mr(t,e,a,o),Ba(t,e,a))}};function Mc(e,t,o,a,h,m,k){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,m,k):t.prototype&&t.prototype.isPureReactComponent?!Ae(o,a)||!Ae(h,m):!0}function Ts(e,t,o){var a=!1,h=Fi,m=t.contextType;return typeof m=="object"&&m!==null?m=fr(m):(h=Vn(t)?Dn:bn.current,a=t.contextTypes,m=(a=a!=null)?go(e,h):Fi),t=new t(o,m),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=eu,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=m),t}function Eo(e,t,o,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,a),t.state!==e&&eu.enqueueReplaceState(t,t.state,null)}function Dc(e,t,o,a){var h=e.stateNode;h.props=o,h.state=e.memoizedState,h.refs={},Ua(e);var m=t.contextType;typeof m=="object"&&m!==null?h.context=fr(m):(m=Vn(t)?Dn:bn.current,h.context=go(e,m)),h.state=e.memoizedState,m=t.getDerivedStateFromProps,typeof m=="function"&&(Ja(e,t,m,o),h.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(t=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),t!==h.state&&eu.enqueueReplaceState(h,h.state,null),yo(e,o,h,a),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function Ps(e,t){try{var o="",a=t;do o+=ve(a),a=a.return;while(a);var h=o}catch(m){h=`
Error generating stack: `+m.message+`
`+m.stack}return{value:e,source:t,stack:h,digest:null}}function tu(e,t,o){return{value:e,source:null,stack:o??null,digest:t??null}}function Co(e,t){try{console.error(t.value)}catch(o){setTimeout(function(){throw o})}}var Rf=typeof WeakMap=="function"?WeakMap:Map;function El(e,t,o){o=mi(-1,o),o.tag=3,o.payload={element:null};var a=t.value;return o.callback=function(){fu||(fu=!0,Kc=a),Co(e,t)},o}function nu(e,t,o){o=mi(-1,o),o.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var h=t.value;o.payload=function(){return a(h)},o.callback=function(){Co(e,t)}}var m=e.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(o.callback=function(){Co(e,t),typeof a!="function"&&(Xi===null?Xi=new Set([this]):Xi.add(this));var k=t.stack;this.componentDidCatch(t.value,{componentStack:k!==null?k:""})}),o}function Cl(e,t,o){var a=e.pingCache;if(a===null){a=e.pingCache=new Rf;var h=new Set;a.set(t,h)}else h=a.get(t),h===void 0&&(h=new Set,a.set(t,h));h.has(o)||(h.add(o),e=Np.bind(null,e,t,o),t.then(e,e))}function Af(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function zc(e,t,o,a,h){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(t=mi(-1,1),t.tag=2,pr(o,t,1))),o.lanes|=1),e):(e.flags|=65536,e.lanes=h,e)}var ru=P.ReactCurrentOwner,On=!1;function mn(e,t,o,a){t.child=e===null?La(t,null,o,a):Bt(t,e.child,o,a)}function Mf(e,t,o,a,h){o=o.render;var m=t.ref;return Bi(t,h),a=js(e,t,o,a,m,h),o=Ya(),e!==null&&!On?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,Tr(e,t,h)):(Mt&&o&&pl(t),t.flags|=1,mn(e,t,a,h),t.child)}function Oc(e,t,o,a,h){if(e===null){var m=o.type;return typeof m=="function"&&!yu(m)&&m.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(t.tag=15,t.type=m,Jr(e,t,m,a,h)):(e=vu(o.type,null,a,t,t.mode,h),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,(e.lanes&h)===0){var k=m.memoizedProps;if(o=o.compare,o=o!==null?o:Ae,o(k,a)&&e.ref===t.ref)return Tr(e,t,h)}return t.flags|=1,e=Dr(m,a),e.ref=t.ref,e.return=t,t.child=e}function Jr(e,t,o,a,h){if(e!==null){var m=e.memoizedProps;if(Ae(m,a)&&e.ref===t.ref)if(On=!1,t.pendingProps=a=m,(e.lanes&h)!==0)(e.flags&131072)!==0&&(On=!0);else return t.lanes=e.lanes,Tr(e,t,h)}return Lc(e,t,o,a,h)}function Ic(e,t,o){var a=t.pendingProps,h=a.children,m=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(Po,nr),nr|=o;else{if((o&1073741824)===0)return e=m!==null?m.baseLanes|o:o,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Tt(Po,nr),nr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=m!==null?m.baseLanes:o,Tt(Po,nr),nr|=a}else m!==null?(a=m.baseLanes|o,t.memoizedState=null):a=o,Tt(Po,nr),nr|=a;return mn(e,t,h,o),t.child}function $c(e,t){var o=t.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(t.flags|=512,t.flags|=2097152)}function Lc(e,t,o,a,h){var m=Vn(o)?Dn:bn.current;return m=go(t,m),Bi(t,h),o=js(e,t,o,a,m,h),a=Ya(),e!==null&&!On?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,Tr(e,t,h)):(Mt&&a&&pl(t),t.flags|=1,mn(e,t,o,h),t.child)}function Fc(e,t,o,a,h){if(Vn(o)){var m=!0;ur(t)}else m=!1;if(Bi(t,h),t.stateNode===null)su(e,t),Ts(t,o,a),Dc(t,o,a,h),a=!0;else if(e===null){var k=t.stateNode,V=t.memoizedProps;k.props=V;var Z=k.context,de=o.contextType;typeof de=="object"&&de!==null?de=fr(de):(de=Vn(o)?Dn:bn.current,de=go(t,de));var Se=o.getDerivedStateFromProps,Ne=typeof Se=="function"||typeof k.getSnapshotBeforeUpdate=="function";Ne||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(V!==a||Z!==de)&&Eo(t,k,a,de),hr=!1;var we=t.memoizedState;k.state=we,yo(t,a,k,h),Z=t.memoizedState,V!==a||we!==Z||Wn.current||hr?(typeof Se=="function"&&(Ja(t,o,Se,a),Z=t.memoizedState),(V=hr||Mc(t,o,V,a,we,Z,de))?(Ne||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(t.flags|=4194308)):(typeof k.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=Z),k.props=a,k.state=Z,k.context=de,a=V):(typeof k.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{k=t.stateNode,Nf(e,t),V=t.memoizedProps,de=t.type===t.elementType?V:mr(t.type,V),k.props=de,Ne=t.pendingProps,we=k.context,Z=o.contextType,typeof Z=="object"&&Z!==null?Z=fr(Z):(Z=Vn(o)?Dn:bn.current,Z=go(t,Z));var Me=o.getDerivedStateFromProps;(Se=typeof Me=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(V!==Ne||we!==Z)&&Eo(t,k,a,Z),hr=!1,we=t.memoizedState,k.state=we,yo(t,a,k,h);var ze=t.memoizedState;V!==Ne||we!==ze||Wn.current||hr?(typeof Me=="function"&&(Ja(t,o,Me,a),ze=t.memoizedState),(de=hr||Mc(t,o,de,a,we,ze,Z)||!1)?(Se||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(a,ze,Z),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(a,ze,Z)),typeof k.componentDidUpdate=="function"&&(t.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof k.componentDidUpdate!="function"||V===e.memoizedProps&&we===e.memoizedState||(t.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||V===e.memoizedProps&&we===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=ze),k.props=a,k.state=ze,k.context=Z,a=de):(typeof k.componentDidUpdate!="function"||V===e.memoizedProps&&we===e.memoizedState||(t.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||V===e.memoizedProps&&we===e.memoizedState||(t.flags|=1024),a=!1)}return Hc(e,t,o,a,m,h)}function Hc(e,t,o,a,h,m){$c(e,t);var k=(t.flags&128)!==0;if(!a&&!k)return h&&xf(t,o,!1),Tr(e,t,m);a=t.stateNode,ru.current=t;var V=k&&typeof o.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&k?(t.child=Bt(t,e.child,null,m),t.child=Bt(t,null,V,m)):mn(e,t,V,m),t.memoizedState=a.state,h&&xf(t,o,!0),t.child}function Df(e){var t=e.stateNode;t.pendingContext?gf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gf(e,t.context,!1),wc(e,t.containerInfo)}function ei(e,t,o,a,h){return Gr(),Xr(h),t.flags|=256,mn(e,t,o,a),t.child}var kl={dehydrated:null,treeContext:null,retryLane:0};function jl(e){return{baseLanes:e,cachePool:null,transitions:null}}function iu(e,t,o){var a=t.pendingProps,h=Ot.current,m=!1,k=(t.flags&128)!==0,V;if((V=k)||(V=e!==null&&e.memoizedState===null?!1:(h&2)!==0),V?(m=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),Tt(Ot,h&1),e===null)return Yn(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(k=a.children,e=a.fallback,m?(a=t.mode,m=t.child,k={mode:"hidden",children:k},(a&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=k):m=wu(k,a,0,null),e=zs(e,a,o,null),m.return=t,e.return=t,m.sibling=e,t.child=m,t.child.memoizedState=jl(o),t.memoizedState=kl,e):ko(t,k));if(h=e.memoizedState,h!==null&&(V=h.dehydrated,V!==null))return Ye(e,t,k,a,V,h,o);if(m){m=a.fallback,k=t.mode,h=e.child,V=h.sibling;var Z={mode:"hidden",children:a.children};return(k&1)===0&&t.child!==h?(a=t.child,a.childLanes=0,a.pendingProps=Z,t.deletions=null):(a=Dr(h,Z),a.subtreeFlags=h.subtreeFlags&14680064),V!==null?m=Dr(V,m):(m=zs(m,k,o,null),m.flags|=2),m.return=t,a.return=t,a.sibling=m,t.child=a,a=m,m=t.child,k=e.child.memoizedState,k=k===null?jl(o):{baseLanes:k.baseLanes|o,cachePool:null,transitions:k.transitions},m.memoizedState=k,m.childLanes=e.childLanes&~o,t.memoizedState=kl,a}return m=e.child,e=m.sibling,a=Dr(m,{mode:"visible",children:a.children}),(t.mode&1)===0&&(a.lanes=o),a.return=t,a.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=a,t.memoizedState=null,a}function ko(e,t){return t=wu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function wi(e,t,o,a){return a!==null&&Xr(a),Bt(t,e.child,null,o),e=ko(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ye(e,t,o,a,h,m,k){if(o)return t.flags&256?(t.flags&=-257,a=tu(Error(s(422))),wi(e,t,k,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(m=a.fallback,h=t.mode,a=wu({mode:"visible",children:a.children},h,0,null),m=zs(m,h,k,null),m.flags|=2,a.return=t,m.return=t,a.sibling=m,t.child=a,(t.mode&1)!==0&&Bt(t,e.child,null,k),t.child.memoizedState=jl(k),t.memoizedState=kl,m);if((t.mode&1)===0)return wi(e,t,k,null);if(h.data==="$!"){if(a=h.nextSibling&&h.nextSibling.dataset,a)var V=a.dgst;return a=V,m=Error(s(419)),a=tu(m,a,void 0),wi(e,t,k,a)}if(V=(k&e.childLanes)!==0,On||V){if(a=un,a!==null){switch(k&-k){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(a.suspendedLanes|k))!==0?0:h,h!==0&&h!==m.retryLane&&(m.retryLane=h,gi(e,h),Mr(a,e,h,-1))}return nd(),a=tu(Error(s(421))),wi(e,t,k,a)}return h.data==="$?"?(t.flags|=128,t.child=e.child,t=bp.bind(null,e),h._reactRetry=t,null):(e=m.treeContext,Jn=$i(h.nextSibling),Cn=t,Mt=!0,kr=null,e!==null&&(cr[dr++]=Vr,cr[dr++]=Yr,cr[dr++]=Ss,Vr=e.id,Yr=e.overflow,Ss=t),t=ko(t,a.children),t.flags|=4096,t)}function Tl(e,t,o){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),gn(e.return,t,o)}function Pl(e,t,o,a,h){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:o,tailMode:h}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=a,m.tail=o,m.tailMode=h)}function Yi(e,t,o){var a=t.pendingProps,h=a.revealOrder,m=a.tail;if(mn(e,t,a.children,o),a=Ot.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tl(e,o,t);else if(e.tag===19)Tl(e,o,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Tt(Ot,a),(t.mode&1)===0)t.memoizedState=null;else switch(h){case"forwards":for(o=t.child,h=null;o!==null;)e=o.alternate,e!==null&&Cs(e)===null&&(h=o),o=o.sibling;o=h,o===null?(h=t.child,t.child=null):(h=o.sibling,o.sibling=null),Pl(t,!1,h,o,m);break;case"backwards":for(o=null,h=t.child,t.child=null;h!==null;){if(e=h.alternate,e!==null&&Cs(e)===null){t.child=h;break}e=h.sibling,h.sibling=o,o=h,h=e}Pl(t,!0,o,null,m);break;case"together":Pl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function su(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Tr(e,t,o){if(e!==null&&(t.dependencies=e.dependencies),Gi|=t.lanes,(o&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,o=Dr(e,e.pendingProps),t.child=o,o.return=t;e.sibling!==null;)e=e.sibling,o=o.sibling=Dr(e,e.pendingProps),o.return=t;o.sibling=null}return t.child}function zf(e,t,o){switch(t.tag){case 3:Df(t),Gr();break;case 5:Sc(t);break;case 1:Vn(t.type)&&ur(t);break;case 4:wc(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,h=t.memoizedProps.value;Tt(xl,a._currentValue),a._currentValue=h;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Tt(Ot,Ot.current&1),t.flags|=128,null):(o&t.child.childLanes)!==0?iu(e,t,o):(Tt(Ot,Ot.current&1),e=Tr(e,t,o),e!==null?e.sibling:null);Tt(Ot,Ot.current&1);break;case 19:if(a=(o&t.childLanes)!==0,(e.flags&128)!==0){if(a)return Yi(e,t,o);t.flags|=128}if(h=t.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Tt(Ot,Ot.current),a)break;return null;case 22:case 23:return t.lanes=0,Ic(e,t,o)}return Tr(e,t,o)}var xn,Uc,Of,Bc;xn=function(e,t){for(var o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Uc=function(){},Of=function(e,t,o,a){var h=e.memoizedProps;if(h!==a){e=t.stateNode,xi(Kr.current);var m=null;switch(o){case"input":h=ot(e,h),a=ot(e,a),m=[];break;case"select":h=L({},h,{value:void 0}),a=L({},a,{value:void 0}),m=[];break;case"textarea":h=Qt(e,h),a=Qt(e,a),m=[];break;default:typeof h.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Pa)}et(o,a);var k;o=null;for(de in h)if(!a.hasOwnProperty(de)&&h.hasOwnProperty(de)&&h[de]!=null)if(de==="style"){var V=h[de];for(k in V)V.hasOwnProperty(k)&&(o||(o={}),o[k]="")}else de!=="dangerouslySetInnerHTML"&&de!=="children"&&de!=="suppressContentEditableWarning"&&de!=="suppressHydrationWarning"&&de!=="autoFocus"&&(f.hasOwnProperty(de)?m||(m=[]):(m=m||[]).push(de,null));for(de in a){var Z=a[de];if(V=h!=null?h[de]:void 0,a.hasOwnProperty(de)&&Z!==V&&(Z!=null||V!=null))if(de==="style")if(V){for(k in V)!V.hasOwnProperty(k)||Z&&Z.hasOwnProperty(k)||(o||(o={}),o[k]="");for(k in Z)Z.hasOwnProperty(k)&&V[k]!==Z[k]&&(o||(o={}),o[k]=Z[k])}else o||(m||(m=[]),m.push(de,o)),o=Z;else de==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,V=V?V.__html:void 0,Z!=null&&V!==Z&&(m=m||[]).push(de,Z)):de==="children"?typeof Z!="string"&&typeof Z!="number"||(m=m||[]).push(de,""+Z):de!=="suppressContentEditableWarning"&&de!=="suppressHydrationWarning"&&(f.hasOwnProperty(de)?(Z!=null&&de==="onScroll"&&Rt("scroll",e),m||V===Z||(m=[])):(m=m||[]).push(de,Z))}o&&(m=m||[]).push("style",o);var de=m;(t.updateQueue=de)&&(t.flags|=4)}},Bc=function(e,t,o,a){o!==a&&(t.flags|=4)};function Rl(e,t){if(!Mt)switch(e.tailMode){case"hidden":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function yn(e){var t=e.alternate!==null&&e.alternate.child===e.child,o=0,a=0;if(t)for(var h=e.child;h!==null;)o|=h.lanes|h.childLanes,a|=h.subtreeFlags&14680064,a|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)o|=h.lanes|h.childLanes,a|=h.subtreeFlags,a|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=a,e.childLanes=o,t}function mp(e,t,o){var a=t.pendingProps;switch(Ns(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yn(t),null;case 1:return Vn(t.type)&&Da(),yn(t),null;case 3:return a=t.stateNode,Wi(),At(Wn),At(bn),Va(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(gl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,kr!==null&&(Jc(kr),kr=null))),Uc(e,t),yn(t),null;case 5:Wa(t);var h=xi(vo.current);if(o=t.type,e!==null&&t.stateNode!=null)Of(e,t,o,a,h),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(s(166));return yn(t),null}if(e=xi(Kr.current),gl(t)){a=t.stateNode,o=t.type;var m=t.memoizedProps;switch(a[Br]=t,a[Li]=m,e=(t.mode&1)!==0,o){case"dialog":Rt("cancel",a),Rt("close",a);break;case"iframe":case"object":case"embed":Rt("load",a);break;case"video":case"audio":for(h=0;h<di.length;h++)Rt(di[h],a);break;case"source":Rt("error",a);break;case"img":case"image":case"link":Rt("error",a),Rt("load",a);break;case"details":Rt("toggle",a);break;case"input":ct(a,m),Rt("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!m.multiple},Rt("invalid",a);break;case"textarea":dn(a,m),Rt("invalid",a)}et(o,m),h=null;for(var k in m)if(m.hasOwnProperty(k)){var V=m[k];k==="children"?typeof V=="string"?a.textContent!==V&&(m.suppressHydrationWarning!==!0&&cl(a.textContent,V,e),h=["children",V]):typeof V=="number"&&a.textContent!==""+V&&(m.suppressHydrationWarning!==!0&&cl(a.textContent,V,e),h=["children",""+V]):f.hasOwnProperty(k)&&V!=null&&k==="onScroll"&&Rt("scroll",a)}switch(o){case"input":ft(a),Oe(a,m,!0);break;case"textarea":ft(a),sn(a);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(a.onclick=Pa)}a=h,t.updateQueue=a,a!==null&&(t.flags|=4)}else{k=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=he(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=k.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=k.createElement(o,{is:a.is}):(e=k.createElement(o),o==="select"&&(k=e,a.multiple?k.multiple=!0:a.size&&(k.size=a.size))):e=k.createElementNS(e,o),e[Br]=t,e[Li]=a,xn(e,t,!1,!1),t.stateNode=e;e:{switch(k=qe(o,a),o){case"dialog":Rt("cancel",e),Rt("close",e),h=a;break;case"iframe":case"object":case"embed":Rt("load",e),h=a;break;case"video":case"audio":for(h=0;h<di.length;h++)Rt(di[h],e);h=a;break;case"source":Rt("error",e),h=a;break;case"img":case"image":case"link":Rt("error",e),Rt("load",e),h=a;break;case"details":Rt("toggle",e),h=a;break;case"input":ct(e,a),h=ot(e,a),Rt("invalid",e);break;case"option":h=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},h=L({},a,{value:void 0}),Rt("invalid",e);break;case"textarea":dn(e,a),h=Qt(e,a),Rt("invalid",e);break;default:h=a}et(o,h),V=h;for(m in V)if(V.hasOwnProperty(m)){var Z=V[m];m==="style"?Ee(e,Z):m==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&Je(e,Z)):m==="children"?typeof Z=="string"?(o!=="textarea"||Z!=="")&&_t(e,Z):typeof Z=="number"&&_t(e,""+Z):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(f.hasOwnProperty(m)?Z!=null&&m==="onScroll"&&Rt("scroll",e):Z!=null&&M(e,m,Z,k))}switch(o){case"input":ft(e),Oe(e,a,!1);break;case"textarea":ft(e),sn(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Pe(a.value));break;case"select":e.multiple=!!a.multiple,m=a.value,m!=null?bt(e,!!a.multiple,m,!1):a.defaultValue!=null&&bt(e,!!a.multiple,a.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=Pa)}switch(o){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return yn(t),null;case 6:if(e&&t.stateNode!=null)Bc(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(s(166));if(o=xi(vo.current),xi(Kr.current),gl(t)){if(a=t.stateNode,o=t.memoizedProps,a[Br]=t,(m=a.nodeValue!==o)&&(e=Cn,e!==null))switch(e.tag){case 3:cl(a.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&cl(a.nodeValue,o,(e.mode&1)!==0)}m&&(t.flags|=4)}else a=(o.nodeType===9?o:o.ownerDocument).createTextNode(a),a[Br]=t,t.stateNode=a}return yn(t),null;case 13:if(At(Ot),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Mt&&Jn!==null&&(t.mode&1)!==0&&(t.flags&128)===0)mc(),Gr(),t.flags|=98560,m=!1;else if(m=gl(t),a!==null&&a.dehydrated!==null){if(e===null){if(!m)throw Error(s(318));if(m=t.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[Br]=t}else Gr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;yn(t),m=!1}else kr!==null&&(Jc(kr),kr=null),m=!0;if(!m)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=o,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ot.current&1)!==0?en===0&&(en=3):nd())),t.updateQueue!==null&&(t.flags|=4),yn(t),null);case 4:return Wi(),Uc(e,t),e===null&&Oi(t.stateNode.containerInfo),yn(t),null;case 10:return Fa(t.type._context),yn(t),null;case 17:return Vn(t.type)&&Da(),yn(t),null;case 19:if(At(Ot),m=t.memoizedState,m===null)return yn(t),null;if(a=(t.flags&128)!==0,k=m.rendering,k===null)if(a)Rl(m,!1);else{if(en!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(k=Cs(e),k!==null){for(t.flags|=128,Rl(m,!1),a=k.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=o,o=t.child;o!==null;)m=o,e=a,m.flags&=14680066,k=m.alternate,k===null?(m.childLanes=0,m.lanes=e,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=k.childLanes,m.lanes=k.lanes,m.child=k.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=k.memoizedProps,m.memoizedState=k.memoizedState,m.updateQueue=k.updateQueue,m.type=k.type,e=k.dependencies,m.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return Tt(Ot,Ot.current&1|2),t.child}e=e.sibling}m.tail!==null&&kt()>Rs&&(t.flags|=128,a=!0,Rl(m,!1),t.lanes=4194304)}else{if(!a)if(e=Cs(k),e!==null){if(t.flags|=128,a=!0,o=e.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),Rl(m,!0),m.tail===null&&m.tailMode==="hidden"&&!k.alternate&&!Mt)return yn(t),null}else 2*kt()-m.renderingStartTime>Rs&&o!==1073741824&&(t.flags|=128,a=!0,Rl(m,!1),t.lanes=4194304);m.isBackwards?(k.sibling=t.child,t.child=k):(o=m.last,o!==null?o.sibling=k:t.child=k,m.last=k)}return m.tail!==null?(t=m.tail,m.rendering=t,m.tail=t.sibling,m.renderingStartTime=kt(),t.sibling=null,o=Ot.current,Tt(Ot,a?o&1|2:o&1),t):(yn(t),null);case 22:case 23:return td(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&(t.mode&1)!==0?(nr&1073741824)!==0&&(yn(t),t.subtreeFlags&6&&(t.flags|=8192)):yn(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function xp(e,t){switch(Ns(t),t.tag){case 1:return Vn(t.type)&&Da(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wi(),At(Wn),At(bn),Va(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Wa(t),null;case 13:if(At(Ot),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Gr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return At(Ot),null;case 4:return Wi(),null;case 10:return Fa(t.type._context),null;case 22:case 23:return td(),null;case 24:return null;default:return null}}var ou=!1,It=!1,In=typeof WeakSet=="function"?WeakSet:Set,De=null;function jo(e,t){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(a){Ut(e,t,a)}else o.current=null}function Al(e,t,o){try{o()}catch(a){Ut(e,t,a)}}var If=!1;function yp(e,t){if(dl=fa,e=Et(),il(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var a=o.getSelection&&o.getSelection();if(a&&a.rangeCount!==0){o=a.anchorNode;var h=a.anchorOffset,m=a.focusNode;a=a.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var k=0,V=-1,Z=-1,de=0,Se=0,Ne=e,we=null;t:for(;;){for(var Me;Ne!==o||h!==0&&Ne.nodeType!==3||(V=k+h),Ne!==m||a!==0&&Ne.nodeType!==3||(Z=k+a),Ne.nodeType===3&&(k+=Ne.nodeValue.length),(Me=Ne.firstChild)!==null;)we=Ne,Ne=Me;for(;;){if(Ne===e)break t;if(we===o&&++de===h&&(V=k),we===m&&++Se===a&&(Z=k),(Me=Ne.nextSibling)!==null)break;Ne=we,we=Ne.parentNode}Ne=Me}o=V===-1||Z===-1?null:{start:V,end:Z}}else o=null}o=o||{start:0,end:0}}else o=null;for(vs={focusedElem:e,selectionRange:o},fa=!1,De=t;De!==null;)if(t=De,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,De=e;else for(;De!==null;){t=De;try{var ze=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ze!==null){var Ie=ze.memoizedProps,Vt=ze.memoizedState,oe=t.stateNode,ee=oe.getSnapshotBeforeUpdate(t.elementType===t.type?Ie:mr(t.type,Ie),Vt);oe.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var ae=t.stateNode.containerInfo;ae.nodeType===1?ae.textContent="":ae.nodeType===9&&ae.documentElement&&ae.removeChild(ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(be){Ut(t,t.return,be)}if(e=t.sibling,e!==null){e.return=t.return,De=e;break}De=t.return}return ze=If,If=!1,ze}function Si(e,t,o){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var h=a=a.next;do{if((h.tag&e)===e){var m=h.destroy;h.destroy=void 0,m!==void 0&&Al(t,o,m)}h=h.next}while(h!==a)}}function Ml(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var o=t=t.next;do{if((o.tag&e)===e){var a=o.create;o.destroy=a()}o=o.next}while(o!==t)}}function lu(e){var t=e.ref;if(t!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof t=="function"?t(e):t.current=e}}function $f(e){var t=e.alternate;t!==null&&(e.alternate=null,$f(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Br],delete t[Li],delete t[Aa],delete t[z],delete t[ho])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Lf(e){return e.tag===5||e.tag===3||e.tag===4}function Ff(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Lf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wc(e,t,o){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?o.nodeType===8?o.parentNode.insertBefore(e,t):o.insertBefore(e,t):(o.nodeType===8?(t=o.parentNode,t.insertBefore(e,o)):(t=o,t.appendChild(e)),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=Pa));else if(a!==4&&(e=e.child,e!==null))for(Wc(e,t,o),e=e.sibling;e!==null;)Wc(e,t,o),e=e.sibling}function au(e,t,o){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?o.insertBefore(e,t):o.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(au(e,t,o),e=e.sibling;e!==null;)au(e,t,o),e=e.sibling}var an=null,Pr=!1;function ti(e,t,o){for(o=o.child;o!==null;)Vc(e,t,o),o=o.sibling}function Vc(e,t,o){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(Gs,o)}catch{}switch(o.tag){case 5:It||jo(o,t);case 6:var a=an,h=Pr;an=null,ti(e,t,o),an=a,Pr=h,an!==null&&(Pr?(e=an,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):an.removeChild(o.stateNode));break;case 18:an!==null&&(Pr?(e=an,o=o.stateNode,e.nodeType===8?hc(e.parentNode,o):e.nodeType===1&&hc(e,o),wt(e)):hc(an,o.stateNode));break;case 4:a=an,h=Pr,an=o.stateNode.containerInfo,Pr=!0,ti(e,t,o),an=a,Pr=h;break;case 0:case 11:case 14:case 15:if(!It&&(a=o.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){h=a=a.next;do{var m=h,k=m.destroy;m=m.tag,k!==void 0&&((m&2)!==0||(m&4)!==0)&&Al(o,t,k),h=h.next}while(h!==a)}ti(e,t,o);break;case 1:if(!It&&(jo(o,t),a=o.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=o.memoizedProps,a.state=o.memoizedState,a.componentWillUnmount()}catch(V){Ut(o,t,V)}ti(e,t,o);break;case 21:ti(e,t,o);break;case 22:o.mode&1?(It=(a=It)||o.memoizedState!==null,ti(e,t,o),It=a):ti(e,t,o);break;default:ti(e,t,o)}}function To(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new In),t.forEach(function(a){var h=Ep.bind(null,e,a);o.has(a)||(o.add(a),a.then(h,h))})}}function tr(e,t){var o=t.deletions;if(o!==null)for(var a=0;a<o.length;a++){var h=o[a];try{var m=e,k=t,V=k;e:for(;V!==null;){switch(V.tag){case 5:an=V.stateNode,Pr=!1;break e;case 3:an=V.stateNode.containerInfo,Pr=!0;break e;case 4:an=V.stateNode.containerInfo,Pr=!0;break e}V=V.return}if(an===null)throw Error(s(160));Vc(m,k,h),an=null,Pr=!1;var Z=h.alternate;Z!==null&&(Z.return=null),h.return=null}catch(de){Ut(h,t,de)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Yc(t,e),t=t.sibling}function Yc(e,t){var o=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(tr(t,e),Rr(e),a&4){try{Si(3,e,e.return),Ml(3,e)}catch(Ie){Ut(e,e.return,Ie)}try{Si(5,e,e.return)}catch(Ie){Ut(e,e.return,Ie)}}break;case 1:tr(t,e),Rr(e),a&512&&o!==null&&jo(o,o.return);break;case 5:if(tr(t,e),Rr(e),a&512&&o!==null&&jo(o,o.return),e.flags&32){var h=e.stateNode;try{_t(h,"")}catch(Ie){Ut(e,e.return,Ie)}}if(a&4&&(h=e.stateNode,h!=null)){var m=e.memoizedProps,k=o!==null?o.memoizedProps:m,V=e.type,Z=e.updateQueue;if(e.updateQueue=null,Z!==null)try{V==="input"&&m.type==="radio"&&m.name!=null&&Lt(h,m),qe(V,k);var de=qe(V,m);for(k=0;k<Z.length;k+=2){var Se=Z[k],Ne=Z[k+1];Se==="style"?Ee(h,Ne):Se==="dangerouslySetInnerHTML"?Je(h,Ne):Se==="children"?_t(h,Ne):M(h,Se,Ne,de)}switch(V){case"input":Ze(h,m);break;case"textarea":fn(h,m);break;case"select":var we=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!m.multiple;var Me=m.value;Me!=null?bt(h,!!m.multiple,Me,!1):we!==!!m.multiple&&(m.defaultValue!=null?bt(h,!!m.multiple,m.defaultValue,!0):bt(h,!!m.multiple,m.multiple?[]:"",!1))}h[Li]=m}catch(Ie){Ut(e,e.return,Ie)}}break;case 6:if(tr(t,e),Rr(e),a&4){if(e.stateNode===null)throw Error(s(162));h=e.stateNode,m=e.memoizedProps;try{h.nodeValue=m}catch(Ie){Ut(e,e.return,Ie)}}break;case 3:if(tr(t,e),Rr(e),a&4&&o!==null&&o.memoizedState.isDehydrated)try{wt(t.containerInfo)}catch(Ie){Ut(e,e.return,Ie)}break;case 4:tr(t,e),Rr(e);break;case 13:tr(t,e),Rr(e),h=e.child,h.flags&8192&&(m=h.memoizedState!==null,h.stateNode.isHidden=m,!m||h.alternate!==null&&h.alternate.memoizedState!==null||(Xc=kt())),a&4&&To(e);break;case 22:if(Se=o!==null&&o.memoizedState!==null,e.mode&1?(It=(de=It)||Se,tr(t,e),It=de):tr(t,e),Rr(e),a&8192){if(de=e.memoizedState!==null,(e.stateNode.isHidden=de)&&!Se&&(e.mode&1)!==0)for(De=e,Se=e.child;Se!==null;){for(Ne=De=Se;De!==null;){switch(we=De,Me=we.child,we.tag){case 0:case 11:case 14:case 15:Si(4,we,we.return);break;case 1:jo(we,we.return);var ze=we.stateNode;if(typeof ze.componentWillUnmount=="function"){a=we,o=we.return;try{t=a,ze.props=t.memoizedProps,ze.state=t.memoizedState,ze.componentWillUnmount()}catch(Ie){Ut(a,o,Ie)}}break;case 5:jo(we,we.return);break;case 22:if(we.memoizedState!==null){qi(Ne);continue}}Me!==null?(Me.return=we,De=Me):qi(Ne)}Se=Se.sibling}e:for(Se=null,Ne=e;;){if(Ne.tag===5){if(Se===null){Se=Ne;try{h=Ne.stateNode,de?(m=h.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(V=Ne.stateNode,Z=Ne.memoizedProps.style,k=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,V.style.display=Rn("display",k))}catch(Ie){Ut(e,e.return,Ie)}}}else if(Ne.tag===6){if(Se===null)try{Ne.stateNode.nodeValue=de?"":Ne.memoizedProps}catch(Ie){Ut(e,e.return,Ie)}}else if((Ne.tag!==22&&Ne.tag!==23||Ne.memoizedState===null||Ne===e)&&Ne.child!==null){Ne.child.return=Ne,Ne=Ne.child;continue}if(Ne===e)break e;for(;Ne.sibling===null;){if(Ne.return===null||Ne.return===e)break e;Se===Ne&&(Se=null),Ne=Ne.return}Se===Ne&&(Se=null),Ne.sibling.return=Ne.return,Ne=Ne.sibling}}break;case 19:tr(t,e),Rr(e),a&4&&To(e);break;case 21:break;default:tr(t,e),Rr(e)}}function Rr(e){var t=e.flags;if(t&2){try{e:{for(var o=e.return;o!==null;){if(Lf(o)){var a=o;break e}o=o.return}throw Error(s(160))}switch(a.tag){case 5:var h=a.stateNode;a.flags&32&&(_t(h,""),a.flags&=-33);var m=Ff(e);au(e,m,h);break;case 3:case 4:var k=a.stateNode.containerInfo,V=Ff(e);Wc(e,V,k);break;default:throw Error(s(161))}}catch(Z){Ut(e,e.return,Z)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uu(e,t,o){De=e,qc(e)}function qc(e,t,o){for(var a=(e.mode&1)!==0;De!==null;){var h=De,m=h.child;if(h.tag===22&&a){var k=h.memoizedState!==null||ou;if(!k){var V=h.alternate,Z=V!==null&&V.memoizedState!==null||It;V=ou;var de=It;if(ou=k,(It=Z)&&!de)for(De=h;De!==null;)k=De,Z=k.child,k.tag===22&&k.memoizedState!==null?Hf(h):Z!==null?(Z.return=k,De=Z):Hf(h);for(;m!==null;)De=m,qc(m),m=m.sibling;De=h,ou=V,It=de}Ar(e)}else(h.subtreeFlags&8772)!==0&&m!==null?(m.return=h,De=m):Ar(e)}}function Ar(e){for(;De!==null;){var t=De;if((t.flags&8772)!==0){var o=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:It||Ml(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!It)if(o===null)a.componentDidMount();else{var h=t.elementType===t.type?o.memoizedProps:mr(t.type,o.memoizedProps);a.componentDidUpdate(h,o.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var m=t.updateQueue;m!==null&&vc(t,m,a);break;case 3:var k=t.updateQueue;if(k!==null){if(o=null,t.child!==null)switch(t.child.tag){case 5:o=t.child.stateNode;break;case 1:o=t.child.stateNode}vc(t,k,o)}break;case 5:var V=t.stateNode;if(o===null&&t.flags&4){o=V;var Z=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&o.focus();break;case"img":Z.src&&(o.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var de=t.alternate;if(de!==null){var Se=de.memoizedState;if(Se!==null){var Ne=Se.dehydrated;Ne!==null&&wt(Ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}It||t.flags&512&&lu(t)}catch(we){Ut(t,t.return,we)}}if(t===e){De=null;break}if(o=t.sibling,o!==null){o.return=t.return,De=o;break}De=t.return}}function qi(e){for(;De!==null;){var t=De;if(t===e){De=null;break}var o=t.sibling;if(o!==null){o.return=t.return,De=o;break}De=t.return}}function Hf(e){for(;De!==null;){var t=De;try{switch(t.tag){case 0:case 11:case 15:var o=t.return;try{Ml(4,t)}catch(Z){Ut(t,o,Z)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var h=t.return;try{a.componentDidMount()}catch(Z){Ut(t,h,Z)}}var m=t.return;try{lu(t)}catch(Z){Ut(t,m,Z)}break;case 5:var k=t.return;try{lu(t)}catch(Z){Ut(t,k,Z)}}}catch(Z){Ut(t,t.return,Z)}if(t===e){De=null;break}var V=t.sibling;if(V!==null){V.return=t.return,De=V;break}De=t.return}}var Uf=Math.ceil,cu=P.ReactCurrentDispatcher,Gc=P.ReactCurrentOwner,xr=P.ReactCurrentBatchConfig,ht=0,un=null,Xt=null,vn=0,nr=0,Po=Bn(0),en=0,Dl=null,Gi=0,zl=0,du=0,Ol=null,Gn=null,Xc=0,Rs=1/0,_i=null,fu=!1,Kc=null,Xi=null,hu=!1,Ki=null,$n=0,Il=0,Zc=null,pu=-1,$l=0;function Ln(){return(ht&6)!==0?kt():pu!==-1?pu:pu=kt()}function Zi(e){return(e.mode&1)===0?1:(ht&2)!==0&&vn!==0?vn&-vn:Sf.transition!==null?($l===0&&($l=Vu()),$l):(e=vt,e!==0||(e=window.event,e=e===void 0?16:Yd(e.type)),e)}function Mr(e,t,o,a){if(50<Il)throw Il=0,Zc=null,Error(s(185));Qo(e,o,a),((ht&2)===0||e!==un)&&(e===un&&((ht&2)===0&&(zl|=o),en===4&&Qi(e,vn)),Xn(e,a),o===1&&ht===0&&(t.mode&1)===0&&(Rs=kt()+500,za&&Hi()))}function Xn(e,t){var o=e.callbackNode;Xh(e,t);var a=fs(e,e===un?vn:0);if(a===0)o!==null&&sa(o),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(o!=null&&sa(o),t===1)e.tag===0?ws(Bf.bind(null,e)):yf(Bf.bind(null,e)),Ra(function(){(ht&6)===0&&Hi()}),o=null;else{switch(hs(a)){case 1:o=qo;break;case 4:o=oa;break;case 16:o=ds;break;case 536870912:o=Xo;break;default:o=ds}o=Kf(o,gu.bind(null,e))}e.callbackPriority=t,e.callbackNode=o}}function gu(e,t){if(pu=-1,$l=0,(ht&6)!==0)throw Error(s(327));var o=e.callbackNode;if(Ro()&&e.callbackNode!==o)return null;var a=fs(e,e===un?vn:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||t)t=mu(e,a);else{t=a;var h=ht;ht|=2;var m=Vf();(un!==e||vn!==t)&&(_i=null,Rs=kt()+500,Ms(e,t));do try{Sp();break}catch(V){Wf(e,V)}while(!0);pi(),cu.current=m,ht=h,Xt!==null?t=0:(un=null,vn=0,t=en)}if(t!==0){if(t===2&&(h=aa(e),h!==0&&(a=h,t=Qc(e,h))),t===1)throw o=Dl,Ms(e,0),Qi(e,a),Xn(e,kt()),o;if(t===6)Qi(e,a);else{if(h=e.current.alternate,(a&30)===0&&!vp(h)&&(t=mu(e,a),t===2&&(m=aa(e),m!==0&&(a=m,t=Qc(e,m))),t===1))throw o=Dl,Ms(e,0),Qi(e,a),Xn(e,kt()),o;switch(e.finishedWork=h,e.finishedLanes=a,t){case 0:case 1:throw Error(s(345));case 2:Ds(e,Gn,_i);break;case 3:if(Qi(e,a),(a&130023424)===a&&(t=Xc+500-kt(),10<t)){if(fs(e,0)!==0)break;if(h=e.suspendedLanes,(h&a)!==a){Ln(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=Ii(Ds.bind(null,e,Gn,_i),t);break}Ds(e,Gn,_i);break;case 4:if(Qi(e,a),(a&4194240)===a)break;for(t=e.eventTimes,h=-1;0<a;){var k=31-Er(a);m=1<<k,k=t[k],k>h&&(h=k),a&=~m}if(a=h,a=kt()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Uf(a/1960))-a,10<a){e.timeoutHandle=Ii(Ds.bind(null,e,Gn,_i),a);break}Ds(e,Gn,_i);break;case 5:Ds(e,Gn,_i);break;default:throw Error(s(329))}}}return Xn(e,kt()),e.callbackNode===o?gu.bind(null,e):null}function Qc(e,t){var o=Ol;return e.current.memoizedState.isDehydrated&&(Ms(e,t).flags|=256),e=mu(e,t),e!==2&&(t=Gn,Gn=o,t!==null&&Jc(t)),e}function Jc(e){Gn===null?Gn=e:Gn.push.apply(Gn,e)}function vp(e){for(var t=e;;){if(t.flags&16384){var o=t.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var a=0;a<o.length;a++){var h=o[a],m=h.getSnapshot;h=h.value;try{if(!ue(m(),h))return!1}catch{return!1}}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qi(e,t){for(t&=~du,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var o=31-Er(t),a=1<<o;e[o]=-1,t&=~a}}function Bf(e){if((ht&6)!==0)throw Error(s(327));Ro();var t=fs(e,0);if((t&1)===0)return Xn(e,kt()),null;var o=mu(e,t);if(e.tag!==0&&o===2){var a=aa(e);a!==0&&(t=a,o=Qc(e,a))}if(o===1)throw o=Dl,Ms(e,0),Qi(e,t),Xn(e,kt()),o;if(o===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ds(e,Gn,_i),Xn(e,kt()),null}function ed(e,t){var o=ht;ht|=1;try{return e(t)}finally{ht=o,ht===0&&(Rs=kt()+500,za&&Hi())}}function As(e){Ki!==null&&Ki.tag===0&&(ht&6)===0&&Ro();var t=ht;ht|=1;var o=xr.transition,a=vt;try{if(xr.transition=null,vt=1,e)return e()}finally{vt=a,xr.transition=o,ht=t,(ht&6)===0&&Hi()}}function td(){nr=Po.current,At(Po)}function Ms(e,t){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,hl(o)),Xt!==null)for(o=Xt.return;o!==null;){var a=o;switch(Ns(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Da();break;case 3:Wi(),At(Wn),At(bn),Va();break;case 5:Wa(a);break;case 4:Wi();break;case 13:At(Ot);break;case 19:At(Ot);break;case 10:Fa(a.type._context);break;case 22:case 23:td()}o=o.return}if(un=e,Xt=e=Dr(e.current,null),vn=nr=t,en=0,Dl=null,du=zl=Gi=0,Gn=Ol=null,Es!==null){for(t=0;t<Es.length;t++)if(o=Es[t],a=o.interleaved,a!==null){o.interleaved=null;var h=a.next,m=o.pending;if(m!==null){var k=m.next;m.next=h,a.next=k}o.pending=a}Es=null}return e}function Wf(e,t){do{var o=Xt;try{if(pi(),wl.current=Za,wo){for(var a=Ht.memoizedState;a!==null;){var h=a.queue;h!==null&&(h.pending=null),a=a.next}wo=!1}if(Vi=0,Jt=Wt=Ht=null,Sl=!1,ks=0,Gc.current=null,o===null||o.return===null){en=1,Dl=t,Xt=null;break}e:{var m=e,k=o.return,V=o,Z=t;if(t=vn,V.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var de=Z,Se=V,Ne=Se.tag;if((Se.mode&1)===0&&(Ne===0||Ne===11||Ne===15)){var we=Se.alternate;we?(Se.updateQueue=we.updateQueue,Se.memoizedState=we.memoizedState,Se.lanes=we.lanes):(Se.updateQueue=null,Se.memoizedState=null)}var Me=Af(k);if(Me!==null){Me.flags&=-257,zc(Me,k,V,m,t),Me.mode&1&&Cl(m,de,t),t=Me,Z=de;var ze=t.updateQueue;if(ze===null){var Ie=new Set;Ie.add(Z),t.updateQueue=Ie}else ze.add(Z);break e}else{if((t&1)===0){Cl(m,de,t),nd();break e}Z=Error(s(426))}}else if(Mt&&V.mode&1){var Vt=Af(k);if(Vt!==null){(Vt.flags&65536)===0&&(Vt.flags|=256),zc(Vt,k,V,m,t),Xr(Ps(Z,V));break e}}m=Z=Ps(Z,V),en!==4&&(en=2),Ol===null?Ol=[m]:Ol.push(m),m=k;do{switch(m.tag){case 3:m.flags|=65536,t&=-t,m.lanes|=t;var oe=El(m,Z,t);bf(m,oe);break e;case 1:V=Z;var ee=m.type,ae=m.stateNode;if((m.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(Xi===null||!Xi.has(ae)))){m.flags|=65536,t&=-t,m.lanes|=t;var be=nu(m,V,t);bf(m,be);break e}}m=m.return}while(m!==null)}qf(o)}catch($e){t=$e,Xt===o&&o!==null&&(Xt=o=o.return);continue}break}while(!0)}function Vf(){var e=cu.current;return cu.current=Za,e===null?Za:e}function nd(){(en===0||en===3||en===2)&&(en=4),un===null||(Gi&268435455)===0&&(zl&268435455)===0||Qi(un,vn)}function mu(e,t){var o=ht;ht|=2;var a=Vf();(un!==e||vn!==t)&&(_i=null,Ms(e,t));do try{wp();break}catch(h){Wf(e,h)}while(!0);if(pi(),ht=o,cu.current=a,Xt!==null)throw Error(s(261));return un=null,vn=0,en}function wp(){for(;Xt!==null;)Yf(Xt)}function Sp(){for(;Xt!==null&&!cs();)Yf(Xt)}function Yf(e){var t=Xf(e.alternate,e,nr);e.memoizedProps=e.pendingProps,t===null?qf(e):Xt=t,Gc.current=null}function qf(e){var t=e;do{var o=t.alternate;if(e=t.return,(t.flags&32768)===0){if(o=mp(o,t,nr),o!==null){Xt=o;return}}else{if(o=xp(o,t),o!==null){o.flags&=32767,Xt=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{en=6,Xt=null;return}}if(t=t.sibling,t!==null){Xt=t;return}Xt=t=e}while(t!==null);en===0&&(en=5)}function Ds(e,t,o){var a=vt,h=xr.transition;try{xr.transition=null,vt=1,_p(e,t,o,a)}finally{xr.transition=h,vt=a}return null}function _p(e,t,o,a){do Ro();while(Ki!==null);if((ht&6)!==0)throw Error(s(327));o=e.finishedWork;var h=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var m=o.lanes|o.childLanes;if(Hd(e,m),e===un&&(Xt=un=null,vn=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||hu||(hu=!0,Kf(ds,function(){return Ro(),null})),m=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||m){m=xr.transition,xr.transition=null;var k=vt;vt=1;var V=ht;ht|=4,Gc.current=null,yp(e,o),Yc(o,e),fp(vs),fa=!!dl,vs=dl=null,e.current=o,uu(o),Bu(),ht=V,vt=k,xr.transition=m}else e.current=o;if(hu&&(hu=!1,Ki=e,$n=h),m=e.pendingLanes,m===0&&(Xi=null),Ko(o.stateNode),Xn(e,kt()),t!==null)for(a=e.onRecoverableError,o=0;o<t.length;o++)h=t[o],a(h.value,{componentStack:h.stack,digest:h.digest});if(fu)throw fu=!1,e=Kc,Kc=null,e;return($n&1)!==0&&e.tag!==0&&Ro(),m=e.pendingLanes,(m&1)!==0?e===Zc?Il++:(Il=0,Zc=e):Il=0,Hi(),null}function Ro(){if(Ki!==null){var e=hs($n),t=xr.transition,o=vt;try{if(xr.transition=null,vt=16>e?16:e,Ki===null)var a=!1;else{if(e=Ki,Ki=null,$n=0,(ht&6)!==0)throw Error(s(331));var h=ht;for(ht|=4,De=e.current;De!==null;){var m=De,k=m.child;if((De.flags&16)!==0){var V=m.deletions;if(V!==null){for(var Z=0;Z<V.length;Z++){var de=V[Z];for(De=de;De!==null;){var Se=De;switch(Se.tag){case 0:case 11:case 15:Si(8,Se,m)}var Ne=Se.child;if(Ne!==null)Ne.return=Se,De=Ne;else for(;De!==null;){Se=De;var we=Se.sibling,Me=Se.return;if($f(Se),Se===de){De=null;break}if(we!==null){we.return=Me,De=we;break}De=Me}}}var ze=m.alternate;if(ze!==null){var Ie=ze.child;if(Ie!==null){ze.child=null;do{var Vt=Ie.sibling;Ie.sibling=null,Ie=Vt}while(Ie!==null)}}De=m}}if((m.subtreeFlags&2064)!==0&&k!==null)k.return=m,De=k;else e:for(;De!==null;){if(m=De,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:Si(9,m,m.return)}var oe=m.sibling;if(oe!==null){oe.return=m.return,De=oe;break e}De=m.return}}var ee=e.current;for(De=ee;De!==null;){k=De;var ae=k.child;if((k.subtreeFlags&2064)!==0&&ae!==null)ae.return=k,De=ae;else e:for(k=ee;De!==null;){if(V=De,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:Ml(9,V)}}catch($e){Ut(V,V.return,$e)}if(V===k){De=null;break e}var be=V.sibling;if(be!==null){be.return=V.return,De=be;break e}De=V.return}}if(ht=h,Hi(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(Gs,e)}catch{}a=!0}return a}finally{vt=o,xr.transition=t}}return!1}function xu(e,t,o){t=Ps(o,t),t=El(e,t,1),e=pr(e,t,1),t=Ln(),e!==null&&(Qo(e,1,t),Xn(e,t))}function Ut(e,t,o){if(e.tag===3)xu(e,e,o);else for(;t!==null;){if(t.tag===3){xu(t,e,o);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Xi===null||!Xi.has(a))){e=Ps(o,e),e=nu(t,e,1),t=pr(t,e,1),e=Ln(),t!==null&&(Qo(t,1,e),Xn(t,e));break}}t=t.return}}function Np(e,t,o){var a=e.pingCache;a!==null&&a.delete(t),t=Ln(),e.pingedLanes|=e.suspendedLanes&o,un===e&&(vn&o)===o&&(en===4||en===3&&(vn&130023424)===vn&&500>kt()-Xc?Ms(e,0):du|=o),Xn(e,t)}function Gf(e,t){t===0&&((e.mode&1)===0?t=1:(t=la,la<<=1,(la&130023424)===0&&(la=4194304)));var o=Ln();e=gi(e,t),e!==null&&(Qo(e,t,o),Xn(e,o))}function bp(e){var t=e.memoizedState,o=0;t!==null&&(o=t.retryLane),Gf(e,o)}function Ep(e,t){var o=0;switch(e.tag){case 13:var a=e.stateNode,h=e.memoizedState;h!==null&&(o=h.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(s(314))}a!==null&&a.delete(t),Gf(e,o)}var Xf;Xf=function(e,t,o){if(e!==null)if(e.memoizedProps!==t.pendingProps||Wn.current)On=!0;else{if((e.lanes&o)===0&&(t.flags&128)===0)return On=!1,zf(e,t,o);On=(e.flags&131072)!==0}else On=!1,Mt&&(t.flags&1048576)!==0&&vf(t,Ia,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;su(e,t),e=t.pendingProps;var h=go(t,bn.current);Bi(t,o),h=js(null,t,a,e,h,o);var m=Ya();return t.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Vn(a)?(m=!0,ur(t)):m=!1,t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Ua(t),h.updater=eu,t.stateNode=h,h._reactInternals=t,Dc(t,a,e,o),t=Hc(null,t,a,!0,m,o)):(t.tag=0,Mt&&m&&pl(t),mn(null,t,h,o),t=t.child),t;case 16:a=t.elementType;e:{switch(su(e,t),e=t.pendingProps,h=a._init,a=h(a._payload),t.type=a,h=t.tag=kp(a),e=mr(a,e),h){case 0:t=Lc(null,t,a,e,o);break e;case 1:t=Fc(null,t,a,e,o);break e;case 11:t=Mf(null,t,a,e,o);break e;case 14:t=Oc(null,t,a,mr(a.type,e),o);break e}throw Error(s(306,a,""))}return t;case 0:return a=t.type,h=t.pendingProps,h=t.elementType===a?h:mr(a,h),Lc(e,t,a,h,o);case 1:return a=t.type,h=t.pendingProps,h=t.elementType===a?h:mr(a,h),Fc(e,t,a,h,o);case 3:e:{if(Df(t),e===null)throw Error(s(387));a=t.pendingProps,m=t.memoizedState,h=m.element,Nf(e,t),yo(t,a,null,o);var k=t.memoizedState;if(a=k.element,m.isDehydrated)if(m={element:a,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},t.updateQueue.baseState=m,t.memoizedState=m,t.flags&256){h=Ps(Error(s(423)),t),t=ei(e,t,a,o,h);break e}else if(a!==h){h=Ps(Error(s(424)),t),t=ei(e,t,a,o,h);break e}else for(Jn=$i(t.stateNode.containerInfo.firstChild),Cn=t,Mt=!0,kr=null,o=La(t,null,a,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Gr(),a===h){t=Tr(e,t,o);break e}mn(e,t,a,o)}t=t.child}return t;case 5:return Sc(t),e===null&&Yn(t),a=t.type,h=t.pendingProps,m=e!==null?e.memoizedProps:null,k=h.children,fl(a,h)?k=null:m!==null&&fl(a,m)&&(t.flags|=32),$c(e,t),mn(e,t,k,o),t.child;case 6:return e===null&&Yn(t),null;case 13:return iu(e,t,o);case 4:return wc(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Bt(t,null,a,o):mn(e,t,a,o),t.child;case 11:return a=t.type,h=t.pendingProps,h=t.elementType===a?h:mr(a,h),Mf(e,t,a,h,o);case 7:return mn(e,t,t.pendingProps,o),t.child;case 8:return mn(e,t,t.pendingProps.children,o),t.child;case 12:return mn(e,t,t.pendingProps.children,o),t.child;case 10:e:{if(a=t.type._context,h=t.pendingProps,m=t.memoizedProps,k=h.value,Tt(xl,a._currentValue),a._currentValue=k,m!==null)if(ue(m.value,k)){if(m.children===h.children&&!Wn.current){t=Tr(e,t,o);break e}}else for(m=t.child,m!==null&&(m.return=t);m!==null;){var V=m.dependencies;if(V!==null){k=m.child;for(var Z=V.firstContext;Z!==null;){if(Z.context===a){if(m.tag===1){Z=mi(-1,o&-o),Z.tag=2;var de=m.updateQueue;if(de!==null){de=de.shared;var Se=de.pending;Se===null?Z.next=Z:(Z.next=Se.next,Se.next=Z),de.pending=Z}}m.lanes|=o,Z=m.alternate,Z!==null&&(Z.lanes|=o),gn(m.return,o,t),V.lanes|=o;break}Z=Z.next}}else if(m.tag===10)k=m.type===t.type?null:m.child;else if(m.tag===18){if(k=m.return,k===null)throw Error(s(341));k.lanes|=o,V=k.alternate,V!==null&&(V.lanes|=o),gn(k,o,t),k=m.sibling}else k=m.child;if(k!==null)k.return=m;else for(k=m;k!==null;){if(k===t){k=null;break}if(m=k.sibling,m!==null){m.return=k.return,k=m;break}k=k.return}m=k}mn(e,t,h.children,o),t=t.child}return t;case 9:return h=t.type,a=t.pendingProps.children,Bi(t,o),h=fr(h),a=a(h),t.flags|=1,mn(e,t,a,o),t.child;case 14:return a=t.type,h=mr(a,t.pendingProps),h=mr(a.type,h),Oc(e,t,a,h,o);case 15:return Jr(e,t,t.type,t.pendingProps,o);case 17:return a=t.type,h=t.pendingProps,h=t.elementType===a?h:mr(a,h),su(e,t),t.tag=1,Vn(a)?(e=!0,ur(t)):e=!1,Bi(t,o),Ts(t,a,h),Dc(t,a,h,o),Hc(null,t,a,!0,e,o);case 19:return Yi(e,t,o);case 22:return Ic(e,t,o)}throw Error(s(156,t.tag))};function Kf(e,t){return ia(e,t)}function Cp(e,t,o,a){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yr(e,t,o,a){return new Cp(e,t,o,a)}function yu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function kp(e){if(typeof e=="function")return yu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===le)return 11;if(e===q)return 14}return 2}function Dr(e,t){var o=e.alternate;return o===null?(o=yr(e.tag,t,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=t,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,t=e.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function vu(e,t,o,a,h,m){var k=2;if(a=e,typeof e=="function")yu(e)&&(k=1);else if(typeof e=="string")k=5;else e:switch(e){case b:return zs(o.children,h,m,t);case U:k=8,h|=8;break;case Y:return e=yr(12,o,t,h|2),e.elementType=Y,e.lanes=m,e;case ce:return e=yr(13,o,t,h),e.elementType=ce,e.lanes=m,e;case j:return e=yr(19,o,t,h),e.elementType=j,e.lanes=m,e;case te:return wu(o,h,m,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case re:k=10;break e;case se:k=9;break e;case le:k=11;break e;case q:k=14;break e;case X:k=16,a=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=yr(k,o,t,h),t.elementType=e,t.type=a,t.lanes=m,t}function zs(e,t,o,a){return e=yr(7,e,a,t),e.lanes=o,e}function wu(e,t,o,a){return e=yr(22,e,a,t),e.elementType=te,e.lanes=o,e.stateNode={isHidden:!1},e}function rd(e,t,o){return e=yr(6,e,null,t),e.lanes=o,e}function id(e,t,o){return t=yr(4,e.children!==null?e.children:[],e.key,t),t.lanes=o,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jp(e,t,o,a,h){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zo(0),this.expirationTimes=Zo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zo(0),this.identifierPrefix=a,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function sd(e,t,o,a,h,m,k,V,Z){return e=new jp(e,t,o,V,Z),t===1?(t=1,m===!0&&(t|=8)):t=0,m=yr(3,null,null,t),e.current=m,m.stateNode=e,m.memoizedState={element:a,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ua(m),e}function Tp(e,t,o){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:a==null?null:""+a,children:e,containerInfo:t,implementation:o}}function Zf(e){if(!e)return Fi;e=e._reactInternals;e:{if(li(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Vn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var o=e.type;if(Vn(o))return mf(e,o,t)}return t}function Qf(e,t,o,a,h,m,k,V,Z){return e=sd(o,a,!0,e,h,m,k,V,Z),e.context=Zf(null),o=e.current,a=Ln(),h=Zi(o),m=mi(a,h),m.callback=t??null,pr(o,m,h),e.current.lanes=h,Qo(e,h,a),Xn(e,a),e}function Su(e,t,o,a){var h=t.current,m=Ln(),k=Zi(h);return o=Zf(o),t.context===null?t.context=o:t.pendingContext=o,t=mi(m,k),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=pr(h,t,k),e!==null&&(Mr(e,h,k,m),Ba(e,h,k)),k}function _u(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Jf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<t?o:t}}function od(e,t){Jf(e,t),(e=e.alternate)&&Jf(e,t)}function Pp(){return null}var eh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Nu(e){this._internalRoot=e}Ll.prototype.render=Nu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));Su(e,t,null,null)},Ll.prototype.unmount=Nu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;As(function(){Su(null,e,null,null)}),t[Qn]=null}};function Ll(e){this._internalRoot=e}Ll.prototype.unstable_scheduleHydration=function(e){if(e){var t=qu();e={blockedOn:null,target:e,priority:t};for(var o=0;o<Ai.length&&t!==0&&t<Ai[o].priority;o++);Ai.splice(o,0,e),o===0&&Wd(e)}};function ld(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function th(){}function Rp(e,t,o,a,h){if(h){if(typeof a=="function"){var m=a;a=function(){var de=_u(k);m.call(de)}}var k=Qf(t,a,e,0,null,!1,!1,"",th);return e._reactRootContainer=k,e[Qn]=k.current,Oi(e.nodeType===8?e.parentNode:e),As(),k}for(;h=e.lastChild;)e.removeChild(h);if(typeof a=="function"){var V=a;a=function(){var de=_u(Z);V.call(de)}}var Z=sd(e,0,!1,null,null,!1,!1,"",th);return e._reactRootContainer=Z,e[Qn]=Z.current,Oi(e.nodeType===8?e.parentNode:e),As(function(){Su(t,Z,o,a)}),Z}function Os(e,t,o,a,h){var m=o._reactRootContainer;if(m){var k=m;if(typeof h=="function"){var V=h;h=function(){var Z=_u(k);V.call(Z)}}Su(t,k,e,h)}else k=Rp(o,t,e,h,a);return _u(k)}Yu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var o=Ks(t.pendingLanes);o!==0&&(Jo(t,o|1),Xn(t,kt()),(ht&6)===0&&(Rs=kt()+500,Hi()))}break;case 13:As(function(){var a=gi(e,1);if(a!==null){var h=Ln();Mr(a,e,1,h)}}),od(e,1)}},ua=function(e){if(e.tag===13){var t=gi(e,134217728);if(t!==null){var o=Ln();Mr(t,e,134217728,o)}od(e,134217728)}},Ud=function(e){if(e.tag===13){var t=Zi(e),o=gi(e,t);if(o!==null){var a=Ln();Mr(o,e,t,a)}od(e,t)}},qu=function(){return vt},Gu=function(e,t){var o=vt;try{return vt=e,t()}finally{vt=o}},pn=function(e,t,o){switch(t){case"input":if(Ze(e,o),t=o.name,o.type==="radio"&&t!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<o.length;t++){var a=o[t];if(a!==e&&a.form===e.form){var h=Ma(a);if(!h)throw Error(s(90));St(a),Ze(a,h)}}}break;case"textarea":fn(e,o);break;case"select":t=o.value,t!=null&&bt(e,!!o.multiple,t,!1)}},Ql=ed,Uo=As;var Ap={usingClientEntryPoint:!1,Events:[Nn,tt,Ma,Kl,Zl,ed]},Fl={findFiberByHostInstance:Wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mp={bundleType:Fl.bundleType,version:Fl.version,rendererPackageName:Fl.rendererPackageName,rendererConfig:Fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=na(e),e===null?null:e.stateNode},findFiberByHostInstance:Fl.findFiberByHostInstance||Pp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eu.isDisabled&&Eu.supportsFiber)try{Gs=Eu.inject(Mp),or=Eu}catch{}}return _r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ap,_r.createPortal=function(e,t){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ld(t))throw Error(s(200));return Tp(e,t,null,o)},_r.createRoot=function(e,t){if(!ld(e))throw Error(s(299));var o=!1,a="",h=eh;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=sd(e,1,!1,null,null,o,!1,a,h),e[Qn]=t.current,Oi(e.nodeType===8?e.parentNode:e),new Nu(t)},_r.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=na(t),e=e===null?null:e.stateNode,e},_r.flushSync=function(e){return As(e)},_r.hydrate=function(e,t,o){if(!bu(t))throw Error(s(200));return Os(null,e,t,!0,o)},_r.hydrateRoot=function(e,t,o){if(!ld(e))throw Error(s(405));var a=o!=null&&o.hydratedSources||null,h=!1,m="",k=eh;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(k=o.onRecoverableError)),t=Qf(t,null,e,1,o??null,h,!1,m,k),e[Qn]=t.current,Oi(e),a)for(e=0;e<a.length;e++)o=a[e],h=o._getVersion,h=h(o._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[o,h]:t.mutableSourceEagerHydrationData.push(o,h);return new Ll(t)},_r.render=function(e,t,o){if(!bu(t))throw Error(s(200));return Os(null,e,t,!1,o)},_r.unmountComponentAtNode=function(e){if(!bu(e))throw Error(s(40));return e._reactRootContainer?(As(function(){Os(null,null,e,!1,function(){e._reactRootContainer=null,e[Qn]=null})}),!0):!1},_r.unstable_batchedUpdates=ed,_r.unstable_renderSubtreeIntoContainer=function(e,t,o,a){if(!bu(o))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return Os(e,t,o,!1,a)},_r.version="18.3.1-next-f1338f8080-20240426",_r}var C0;function Lh(){if(C0)return Gp.exports;C0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(l){console.error(l)}}return n(),Gp.exports=e1(),Gp.exports}var k0;function t1(){if(k0)return oh;k0=1;var n=Lh();return oh.createRoot=n.createRoot,oh.hydrateRoot=n.hydrateRoot,oh}var n1=t1();/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var r1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ut=(n,l)=>{const s=W.forwardRef(({color:d="currentColor",size:f=24,strokeWidth:g=2,absoluteStrokeWidth:p,className:y="",children:w,...v},S)=>W.createElement("svg",{ref:S,...r1,width:f,height:f,stroke:d,strokeWidth:p?Number(g)*24/Number(f):g,className:["lucide",`lucide-${i1(n)}`,y].join(" "),...v},[...l.map(([_,R])=>W.createElement(_,R)),...Array.isArray(w)?w:[w]]));return s.displayName=`${n}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=ut("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=ut("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=ut("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=ut("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=ut("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=ut("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=ut("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=ut("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=ut("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=ut("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=ut("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=ut("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=ut("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=ut("FileX",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=ut("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=ut("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=ut("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=ut("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=ut("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=ut("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=ut("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=ut("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=ut("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=ut("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=ut("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=ut("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=ut("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=ut("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=ut("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=ut("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=ut("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=ut("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=ut("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=ut("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=ut("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=ut("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=ut("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=ut("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ri="http://127.0.0.1:8000";function y1({novelId:n,onBack:l}){const[s,d]=W.useState([]),[f,g]=W.useState([]),[p,y]=W.useState(!1),[w,v]=W.useState(null),[S,_]=W.useState({name:"",appearance:"",personality:"",groups:[]}),[R,D]=W.useState(!1),[B,H]=W.useState(null),[$,T]=W.useState({name:"",description:"",color:"#6366F1"}),[N,M]=W.useState(!1),[P,O]=W.useState(""),[F,b]=W.useState(!1),[U,Y]=W.useState("characters");W.useEffect(()=>{fetch(`${ri}/characters/${n}`).then(C=>C.json()).then(d).catch(C=>console.error("Error fetching characters:",C)),fetch(`${ri}/characters/${n}/groups`).then(C=>C.json()).then(g).catch(C=>console.error("Error fetching groups:",C))},[n]);const re=fe.useMemo(()=>s.filter(C=>{var L,A;return C.name.toLowerCase().includes(P.toLowerCase())||((L=C.appearance)==null?void 0:L.toLowerCase().includes(P.toLowerCase()))||((A=C.personality)==null?void 0:A.toLowerCase().includes(P.toLowerCase()))}).sort((C,L)=>C.name.localeCompare(L.name)),[s,P]),se=N?re:re.slice(0,6),le=async()=>{if(!S.name.trim())return;const C={id:w?w.id:crypto.randomUUID(),novelId:n,name:S.name.trim(),appearance:S.appearance.trim()||void 0,personality:S.personality.trim()||void 0,groups:S.groups};let L=`${ri}/characters/${n}`,A="POST";w&&(L=`${ri}/characters/${n}/${w.id}`,A="PUT");try{if(!(await fetch(L,{method:A,headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).ok)throw new Error("Failed to save character");const pe=await fetch(`${ri}/characters/${n}`).then(ge=>ge.json());d(pe),y(!1),v(null),_({name:"",appearance:"",personality:"",groups:[]})}catch(K){console.error("Error saving character:",K)}},ce=async()=>{if(!$.name.trim())return;const C={id:B?B.id:crypto.randomUUID(),novelId:n,name:$.name.trim(),description:$.description.trim()||void 0,color:$.color};let L=`${ri}/characters/${n}/groups`,A="POST";B&&(L=`${ri}/characters/${n}/groups/${B.id}`,A="PUT");try{if(!(await fetch(L,{method:A,headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).ok)throw new Error("Failed to save group");const pe=await fetch(`${ri}/characters/${n}/groups`).then(ge=>ge.json());g(pe),D(!1),H(null),T({name:"",description:"",color:"#6366F1"})}catch(K){console.error("Error saving group:",K)}},j=C=>{v(C),_({name:C.name,appearance:C.appearance||"",personality:C.personality||"",groups:C.groups}),y(!0)},q=C=>{H(C),T({name:C.name,description:C.description||"",color:C.color}),D(!0)},X=async C=>{if(confirm("Are you sure you want to delete this character?"))try{await fetch(`${ri}/characters/${n}/${C}`,{method:"DELETE"});const L=await fetch(`${ri}/characters/${n}`).then(A=>A.json());d(L)}catch(L){console.error("Error deleting character:",L)}},te=async C=>{if(confirm("Are you sure you want to delete this group?"))try{await fetch(`${ri}/characters/${n}/groups/${C}`,{method:"DELETE"});const L=await fetch(`${ri}/characters/${n}/groups`).then(A=>A.json());g(L)}catch(L){console.error("Error deleting group:",L)}},Q=C=>s.filter(L=>L.groups.includes(C));return c.jsxs("div",{className:"animate-fade-in",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:l,className:"text-gray-600 hover:text-gray-800 transition-colors",children:c.jsx(Ho,{className:"w-6 h-6"})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:""})]}),c.jsxs("div",{className:"flex justify-between items-center mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:c.jsx(jh,{className:"w-6 h-6 text-purple-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Characters & Groups"}),c.jsxs("p",{className:"text-sm text-gray-500",children:[s.length," characters, ",f.length," groups"]})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[c.jsx("button",{onClick:()=>Y("characters"),className:`px-4 py-2 rounded-lg transition-colors ${U==="characters"?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Characters"}),c.jsx("button",{onClick:()=>Y("groups"),className:`px-4 py-2 rounded-lg transition-colors ${U==="groups"?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Groups"})]}),U==="characters"?c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>b(!F),className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:[c.jsx(Ch,{size:20}),c.jsx("span",{children:"Quick Edit"}),c.jsx(ir,{size:16,className:`transform transition-transform ${F?"rotate-180":""}`})]}),F&&c.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-lg border border-gray-100 py-2 z-10",children:[c.jsx("input",{type:"text",placeholder:"Search characters...",value:P,onChange:C=>O(C.target.value),className:"mx-2 mb-2 w-[calc(100%-16px)] px-3 py-2 border border-gray-200 rounded-lg text-sm"}),c.jsx("div",{className:"max-h-64 overflow-y-auto",children:re.map(C=>c.jsx("button",{onClick:()=>{j(C),b(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-50 text-sm",children:C.name},C.id))})]})]}),c.jsxs("button",{onClick:()=>{y(!0),v(null),_({name:"",appearance:"",personality:"",groups:[]})},className:"flex items-center gap-2 bg-purple-600 text-white px-6 py-3 rounded-full hover:bg-purple-700 transition-colors duration-200 shadow-lg hover:shadow-purple-200",children:[c.jsx(rs,{size:20}),"Add Character"]})]}):c.jsxs("button",{onClick:()=>{D(!0),H(null),T({name:"",description:"",color:"#6366F1"})},className:"flex items-center gap-2 bg-purple-600 text-white px-6 py-3 rounded-full hover:bg-purple-700 transition-colors duration-200 shadow-lg hover:shadow-purple-200",children:[c.jsx(rs,{size:20}),"Add Group"]})]})]}),U==="characters"?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:se.map(C=>c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-200 p-6 group",onClick:()=>j(C),children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:c.jsx(Ed,{className:"w-6 h-6 text-purple-600"})}),c.jsx("div",{children:c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:C.name})})]}),c.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:L=>{L.stopPropagation(),j(C)},className:"p-2 text-purple-600 hover:bg-purple-50 rounded-full transition-colors",title:"Edit character",children:c.jsx(ts,{size:18})}),c.jsx("button",{onClick:L=>{L.stopPropagation(),X(C.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Delete character",children:c.jsx(ql,{size:18})})]})]}),C.groups.length>0&&c.jsx("div",{children:c.jsx("div",{className:"flex flex-wrap gap-2",children:C.groups.map(L=>{const A=f.find(K=>K.id===L);return A?c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-lg text-sm",style:{backgroundColor:`${A.color}15`,color:A.color},children:[c.jsx(R0,{size:14}),A.name]},A.id):null})})})]},C.id))}),re.length>6&&c.jsx("div",{className:"mt-8 text-center",children:c.jsx("button",{onClick:()=>M(!N),className:"inline-flex items-center gap-2 px-4 py-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",children:N?c.jsxs(c.Fragment,{children:[c.jsx(zg,{size:20}),"Show Less"]}):c.jsxs(c.Fragment,{children:[c.jsx(ir,{size:20}),"Show ",re.length-6," More Characters"]})})}),s.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Ed,{size:64,className:"mx-auto text-gray-300 mb-4"}),c.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"No Characters Yet"}),c.jsx("p",{className:"text-gray-500",children:'Click the "Add Character" button to create your first character'})]})]}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[f.map(C=>{const L=Q(C.id);return c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-200 p-6 group",onClick:()=>q(C),children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-3 rounded-xl",style:{backgroundColor:`${C.color}15`},children:c.jsx(A0,{className:"w-6 h-6",style:{color:C.color}})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:C.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[L.length," characters"]})]})]}),c.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:A=>{A.stopPropagation(),q(C)},className:"p-2 text-purple-600 hover:bg-purple-50 rounded-full transition-colors",title:"Edit group",children:c.jsx(ts,{size:18})}),c.jsx("button",{onClick:A=>{A.stopPropagation(),te(C.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Delete group",children:c.jsx(ql,{size:18})})]})]}),C.description&&c.jsx("p",{className:"text-gray-600 text-sm mb-4",children:C.description}),L.length>0&&c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Characters"}),c.jsxs("div",{className:"space-y-2",children:[L.slice(0,3).map(A=>c.jsx("div",{className:"text-sm px-3 py-1 bg-gray-50 rounded-lg text-gray-600",children:A.name},A.id)),L.length>3&&c.jsxs("div",{className:"text-sm text-gray-500",children:["+",L.length-3," more characters"]})]})]})]},C.id)}),f.length===0&&c.jsxs("div",{className:"text-center py-12 col-span-full",children:[c.jsx(A0,{size:64,className:"mx-auto text-gray-300 mb-4"}),c.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"No Groups Yet"}),c.jsx("p",{className:"text-gray-500",children:'Click the "Add Group" button to create your first character group'})]})]}),(p||w)&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 relative animate-fade-in",children:[c.jsx("button",{onClick:()=>{y(!1),v(null),_({name:"",appearance:"",personality:"",groups:[]})},className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:c.jsx(Nr,{size:24})}),c.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-6",children:w?"Edit Character":"Add New Character"}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),c.jsx("input",{type:"text",value:S.name,onChange:C=>_(L=>({...L,name:C.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-shadow duration-200",placeholder:"Enter character name"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Groups"}),c.jsx("div",{className:"relative",children:c.jsxs("select",{onChange:C=>{const L=C.target.value;L&&!S.groups.includes(L)&&_(A=>({...A,groups:[...A.groups,L]}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[c.jsx("option",{value:"",children:"Select a group"}),f.map(C=>c.jsx("option",{value:C.id,children:C.name},C.id))]})}),c.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:S.groups.map(C=>{const L=f.find(A=>A.id===C);return L?c.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 rounded-lg text-sm",style:{backgroundColor:`${L.color}15`,color:L.color},children:[c.jsx(R0,{size:14}),L.name,c.jsx("button",{onClick:()=>{_(A=>({...A,groups:A.groups.filter(K=>K!==C)}))},className:"ml-2 text-gray-500 hover:text-red-500",children:c.jsx(Nr,{size:14})})]},L.id):null})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appearance"}),c.jsx("textarea",{value:S.appearance,onChange:C=>_(L=>({...L,appearance:C.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-shadow duration-200 min-h-[100px]",placeholder:"Describe the character's appearance"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Personality"}),c.jsx("textarea",{value:S.personality,onChange:C=>_(L=>({...L,personality:C.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-shadow duration-200 min-h-[100px]",placeholder:"Describe the character's personality"})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx("button",{onClick:le,className:"flex-1 bg-purple-600 text-white px-6 py-3 rounded-xl hover:bg-purple-700 transition-colors duration-200 shadow-lg hover:shadow-purple-200",children:w?"Save Changes":"Add Character"}),c.jsx("button",{onClick:()=>{y(!1),v(null),_({name:"",appearance:"",personality:"",groups:[]})},className:"flex-1 bg-gray-100 text-gray-700 px-6 py-3 rounded-xl hover:bg-gray-200 transition-colors duration-200",children:"Cancel"})]})]})]})}),(R||B)&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 relative animate-fade-in",children:[c.jsx("button",{onClick:()=>{D(!1),H(null),T({name:"",description:"",color:"#6366F1"})},className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:c.jsx(Nr,{size:24})}),c.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-6",children:B?"Edit Group":"Add New Group"}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),c.jsx("input",{type:"text",value:$.name,onChange:C=>T(L=>({...L,name:C.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-shadow duration-200",placeholder:"Enter group name"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),c.jsx("textarea",{value:$.description,onChange:C=>T(L=>({...L,description:C.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-shadow duration-200 min-h-[100px]",placeholder:"Describe the group"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),c.jsx("input",{type:"color",value:$.color,onChange:C=>T(L=>({...L,color:C.target.value})),className:"w-full h-12 px-2 py-1 border border-gray-200 rounded-xl cursor-pointer"})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx("button",{onClick:ce,className:"flex-1 bg-purple-600 text-white px-6 py-3 rounded-xl hover:bg-purple-700 transition-colors duration-200 shadow-lg hover:shadow-purple-200",children:B?"Save Changes":"Add Group"}),c.jsx("button",{onClick:()=>{D(!1),H(null),T({name:"",description:"",color:"#6366F1"})},className:"flex-1 bg-gray-100 text-gray-700 px-6 py-3 rounded-xl hover:bg-gray-200 transition-colors duration-200",children:"Cancel"})]})]})]})})]})}const Mo="http://127.0.0.1:8000";function v1({scenario:n,onTimelineUpdate:l}){var ce;const[s,d]=W.useState(!1),[f,g]=W.useState(null),[p,y]=W.useState(!1),[w,v]=W.useState(null),[S,_]=W.useState({when:"",where:"",what:"",chapterId:"",episodeId:"",number:0}),[R,D]=W.useState([]),[B,H]=W.useState(!1),$=Math.max(...R.map(j=>j.number??0),0);W.useEffect(()=>{fetch(`${Mo}/scenarios/${n.id}/timeline`).then(j=>j.json()).then(j=>D(j)).catch(j=>console.error("Error fetching timeline:",j))},[n.id]);const T=fe.useMemo(()=>[...n.timeline||[]].sort((j,q)=>{if(j.number!==void 0&&q.number!==void 0)return j.number-q.number;const X=new Date(j.when),te=new Date(q.when);return!isNaN(X.getTime())&&!isNaN(te.getTime())?X.getTime()-te.getTime():j.when.localeCompare(q.when)}),[n.timeline]),[N,M]=W.useState(""),[P,O]=W.useState(!1),F=fe.useMemo(()=>T.filter(j=>j.when.toLowerCase().includes(N.toLowerCase())||j.where.toLowerCase().includes(N.toLowerCase())||j.what.toLowerCase().includes(N.toLowerCase())),[T,N]),b=p?T:T.slice(0,5),U=async()=>{if(!S.when.trim()||!S.what.trim())return;const j={id:f?f.id:crypto.randomUUID(),when:S.when.trim(),where:S.where.trim(),what:S.what.trim(),chapterId:S.chapterId,episodeId:S.episodeId,number:S.number??0};let q=`${Mo}/scenarios/${n.id}/timeline`,X="POST";f&&(q=`${Mo}/scenarios/${n.id}/timeline/${f.id}`,X="PUT");try{if(!(await fetch(q,{method:X,headers:{"Content-Type":"application/json"},body:JSON.stringify(j)})).ok)throw new Error("Failed to save event");const C=await(await fetch(`${Mo}/scenarios/${n.id}`)).json();D(C.timeline),d(!1),g(null),_({when:"",where:"",what:"",chapterId:"",episodeId:"",number:0}),l(C)}catch(te){console.error("Error saving event:",te)}},Y=j=>{g(j),_({when:j.when,where:j.where,what:j.what,chapterId:j.chapterId||"",episodeId:j.episodeId||"",number:j.number??0}),d(!0)},re=async j=>{if(confirm("Are you sure you want to delete this event?"))try{await fetch(`${Mo}/scenarios/${n.id}/timeline/${j}`,{method:"DELETE"});const q=await fetch(`${Mo}/scenarios/${n.id}/timeline`).then(te=>te.json());D(q);const X={...n,timeline:q};l(X)}catch(q){console.error("Error deleting event:",q)}},se=j=>{if(!j.chapterId||!j.episodeId)return null;const q=n.chapters.find(te=>te.id===j.chapterId);if(!q)return null;const X=q.episodes.find(te=>te.id===j.episodeId);return X?{chapterNumber:q.number,chapterTitle:q.title,episodeNumber:X.number,episodeTitle:X.title}:null},le=j=>{v(w===j?null:j)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-3 bg-amber-100 rounded-xl",children:c.jsx(u1,{className:"w-6 h-6 text-amber-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),c.jsxs("p",{className:"text-sm text-gray-500",children:[(n.timeline||[]).length," events recorded"]})]})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("button",{onClick:async()=>{if(confirm("AI")){H(!0);try{const q=await(await fetch(`${Mo}/scenarios/${n.id}/split_synopsis`,{method:"POST"})).json();alert("");const X=await fetch(`${Mo}/scenarios/${n.id}`).then(te=>te.json());l(X)}catch(j){console.error("AI:",j),alert("")}finally{H(!1)}}},disabled:B,className:`flex items-center gap-2 text-amber-500 hover:text-amber-600 transition-colors px-3 py-1.5 hover:bg-amber-50 rounded-lg text-sm ${B?"opacity-50 cursor-not-allowed":""}`,children:[B?c.jsxs("svg",{className:"animate-spin h-4 w-4 text-amber-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}):c.jsx(kh,{size:16}),"Split with AI"]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>O(!P),className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:[c.jsx(Ch,{size:20}),c.jsx("span",{children:"Quick Edit"}),c.jsx(ir,{size:16,className:`transform transition-transform ${P?"rotate-180":""}`})]}),P&&c.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-lg border border-gray-100 py-2 z-10",children:[c.jsx("input",{type:"text",placeholder:"Search events...",value:N,onChange:j=>M(j.target.value),className:"mx-2 mb-2 w-[calc(100%-16px)] px-3 py-2 border border-gray-200 rounded-lg text-sm"}),c.jsx("div",{className:"max-h-64 overflow-y-auto",children:F.map(j=>c.jsx("button",{onClick:()=>{Y(j),O(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-50 text-sm",children:j.when},j.id))})]})]}),c.jsxs("button",{onClick:()=>{d(!0),g(null),_({when:"",where:"",what:"",chapterId:"",episodeId:"",number:$+1})},className:"flex items-center gap-2 bg-amber-600 text-white px-6 py-3 rounded-full hover:bg-amber-700 transition-colors duration-200 shadow-lg hover:shadow-amber-200",children:[c.jsx(rs,{size:20}),"Add Event"]})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[b.map(j=>{const q=se(j),X=w===j.id;return c.jsx("div",{className:"bg-white p-4 rounded-xl border border-gray-200 hover:border-indigo-200 hover:shadow-md transition-all duration-200",onClick:()=>le(j.id),children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 text-lg font-medium text-gray-900 mb-3",children:[c.jsx(xg,{className:"w-5 h-5 text-indigo-500"}),j.when]}),j.where&&c.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-2",children:[c.jsx(f1,{className:"w-4 h-4 flex-shrink-0"}),c.jsx("span",{className:w===j.id?"":"line-clamp-1",children:j.where})]}),c.jsxs("div",{className:"flex items-start gap-2 text-gray-700",children:[c.jsx(a1,{className:"w-4 h-4 mt-1 flex-shrink-0"}),c.jsx("p",{className:w===j.id?"":"line-clamp-1",children:j.what})]}),q&&c.jsx("div",{className:"mt-3 text-sm",children:c.jsxs("span",{className:"text-indigo-600 bg-indigo-50 px-2 py-1 rounded-md",children:["Chapter ",q.chapterNumber,", Episode ",q.episodeNumber]})})]}),c.jsxs("div",{className:"flex gap-2 ml-4",children:[c.jsx("button",{onClick:te=>{te.stopPropagation(),le(j.id)},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:w===j.id?"Collapse":"Expand",children:c.jsx(ir,{className:`transform transition-transform ${X?"rotate-180":""}`,size:18})}),c.jsx("button",{onClick:()=>Y(j),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Edit event",children:c.jsx(ts,{size:18})}),c.jsx("button",{onClick:()=>re(j.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete event",children:c.jsx(ql,{size:18})})]})]})},j.id)}),T.length>5&&c.jsx("button",{onClick:()=>y(!p),className:"w-full py-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors flex items-center justify-center gap-2",children:p?c.jsxs(c.Fragment,{children:[c.jsx(zg,{size:20}),"Show Less"]}):c.jsxs(c.Fragment,{children:[c.jsx(ir,{size:20}),"Show ",T.length-5," More Events"]})}),T.length===0&&c.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-xl border border-dashed border-gray-200",children:[c.jsx(xg,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-500",children:"No timeline events yet"})]})]}),s&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg p-8 relative animate-fade-in",children:[c.jsx("button",{onClick:()=>{d(!1),g(null),_({when:"",where:"",what:"",chapterId:"",episodeId:"",number:0})},className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:c.jsx(Nr,{size:24})}),c.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-6",children:f?"Edit Event":"Add New Event"}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number"}),c.jsx("input",{type:"number",value:S.number,onChange:j=>_(q=>({...q,number:Number(j.target.value)})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200",placeholder:": 10"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"When"}),c.jsx("input",{type:"text",value:S.when,onChange:j=>_(q=>({...q,when:j.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200",placeholder:"Enter time/date"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Where"}),c.jsx("input",{type:"text",value:S.where,onChange:j=>_(q=>({...q,where:j.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200",placeholder:"Enter location"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What"}),c.jsx("textarea",{value:S.what,onChange:j=>_(q=>({...q,what:j.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200 min-h-[100px]",placeholder:"Describe what happens"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link to Scene"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("select",{value:S.chapterId,onChange:j=>{_(q=>({...q,chapterId:j.target.value,episodeId:""}))},className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200",children:[c.jsx("option",{value:"",children:"Select Chapter"}),n.chapters.map(j=>c.jsxs("option",{value:j.id,children:["Chapter ",j.number,": ",j.title]},j.id))]}),S.chapterId&&c.jsxs("select",{value:S.episodeId,onChange:j=>{_(q=>({...q,episodeId:j.target.value}))},className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200",children:[c.jsx("option",{value:"",children:"Select Episode"}),(ce=n.chapters.find(j=>j.id===S.chapterId))==null?void 0:ce.episodes.map(j=>c.jsxs("option",{value:j.id,children:["Episode ",j.number,": ",j.title]},j.id))]})]})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx("button",{onClick:U,className:"flex-1 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition-colors duration-200 shadow-lg hover:shadow-indigo-200",children:f?"Save Changes":"Add Event"}),c.jsx("button",{onClick:()=>{d(!1),g(null),_({when:"",where:"",what:"",chapterId:"",episodeId:"",number:0})},className:"flex-1 bg-gray-100 text-gray-700 px-6 py-3 rounded-xl hover:bg-gray-200 transition-colors duration-200",children:"Cancel"})]})]})]})})]})}function Fn(n){if(typeof n=="string"||typeof n=="number")return""+n;let l="";if(Array.isArray(n))for(let s=0,d;s<n.length;s++)(d=Fn(n[s]))!==""&&(l+=(l&&" ")+d);else for(let s in n)n[s]&&(l+=(l&&" ")+s);return l}var Qp={exports:{}},Jp={},eg={exports:{}},tg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0;function w1(){if(M0)return tg;M0=1;var n=is();function l(_,R){return _===R&&(_!==0||1/_===1/R)||_!==_&&R!==R}var s=typeof Object.is=="function"?Object.is:l,d=n.useState,f=n.useEffect,g=n.useLayoutEffect,p=n.useDebugValue;function y(_,R){var D=R(),B=d({inst:{value:D,getSnapshot:R}}),H=B[0].inst,$=B[1];return g(function(){H.value=D,H.getSnapshot=R,w(H)&&$({inst:H})},[_,D,R]),f(function(){return w(H)&&$({inst:H}),_(function(){w(H)&&$({inst:H})})},[_]),p(D),D}function w(_){var R=_.getSnapshot;_=_.value;try{var D=R();return!s(_,D)}catch{return!0}}function v(_,R){return R()}var S=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?v:y;return tg.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:S,tg}var D0;function S1(){return D0||(D0=1,eg.exports=w1()),eg.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0;function _1(){if(z0)return Jp;z0=1;var n=is(),l=S1();function s(v,S){return v===S&&(v!==0||1/v===1/S)||v!==v&&S!==S}var d=typeof Object.is=="function"?Object.is:s,f=l.useSyncExternalStore,g=n.useRef,p=n.useEffect,y=n.useMemo,w=n.useDebugValue;return Jp.useSyncExternalStoreWithSelector=function(v,S,_,R,D){var B=g(null);if(B.current===null){var H={hasValue:!1,value:null};B.current=H}else H=B.current;B=y(function(){function T(F){if(!N){if(N=!0,M=F,F=R(F),D!==void 0&&H.hasValue){var b=H.value;if(D(b,F))return P=b}return P=F}if(b=P,d(M,F))return b;var U=R(F);return D!==void 0&&D(b,U)?(M=F,b):(M=F,P=U)}var N=!1,M,P,O=_===void 0?null:_;return[function(){return T(S())},O===null?void 0:function(){return T(O())}]},[S,_,R,D]);var $=f(v,B[0],B[1]);return p(function(){H.hasValue=!0,H.value=$},[$]),w($),$},Jp}var O0;function N1(){return O0||(O0=1,Qp.exports=_1()),Qp.exports}var b1=N1();const E1=Wm(b1),C1={},I0=n=>{let l;const s=new Set,d=(S,_)=>{const R=typeof S=="function"?S(l):S;if(!Object.is(R,l)){const D=l;l=_??(typeof R!="object"||R===null)?R:Object.assign({},l,R),s.forEach(B=>B(l,D))}},f=()=>l,w={setState:d,getState:f,getInitialState:()=>v,subscribe:S=>(s.add(S),()=>s.delete(S)),destroy:()=>{(C1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},v=l=n(d,f,w);return w},k1=n=>n?I0(n):I0,{useDebugValue:j1}=fe,{useSyncExternalStoreWithSelector:T1}=E1,P1=n=>n;function Km(n,l=P1,s){const d=T1(n.subscribe,n.getState,n.getServerState||n.getInitialState,l,s);return j1(d),d}const $0=(n,l)=>{const s=k1(n),d=(f,g=l)=>Km(s,f,g);return Object.assign(d,s),d},R1=(n,l)=>n?$0(n,l):$0;function Pn(n,l){if(Object.is(n,l))return!0;if(typeof n!="object"||n===null||typeof l!="object"||l===null)return!1;if(n instanceof Map&&l instanceof Map){if(n.size!==l.size)return!1;for(const[d,f]of n)if(!Object.is(f,l.get(d)))return!1;return!0}if(n instanceof Set&&l instanceof Set){if(n.size!==l.size)return!1;for(const d of n)if(!l.has(d))return!1;return!0}const s=Object.keys(n);if(s.length!==Object.keys(l).length)return!1;for(const d of s)if(!Object.prototype.hasOwnProperty.call(l,d)||!Object.is(n[d],l[d]))return!1;return!0}var A1={value:()=>{}};function Fh(){for(var n=0,l=arguments.length,s={},d;n<l;++n){if(!(d=arguments[n]+"")||d in s||/[\s.]/.test(d))throw new Error("illegal type: "+d);s[d]=[]}return new wh(s)}function wh(n){this._=n}function M1(n,l){return n.trim().split(/^|\s+/).map(function(s){var d="",f=s.indexOf(".");if(f>=0&&(d=s.slice(f+1),s=s.slice(0,f)),s&&!l.hasOwnProperty(s))throw new Error("unknown type: "+s);return{type:s,name:d}})}wh.prototype=Fh.prototype={constructor:wh,on:function(n,l){var s=this._,d=M1(n+"",s),f,g=-1,p=d.length;if(arguments.length<2){for(;++g<p;)if((f=(n=d[g]).type)&&(f=D1(s[f],n.name)))return f;return}if(l!=null&&typeof l!="function")throw new Error("invalid callback: "+l);for(;++g<p;)if(f=(n=d[g]).type)s[f]=L0(s[f],n.name,l);else if(l==null)for(f in s)s[f]=L0(s[f],n.name,null);return this},copy:function(){var n={},l=this._;for(var s in l)n[s]=l[s].slice();return new wh(n)},call:function(n,l){if((f=arguments.length-2)>0)for(var s=new Array(f),d=0,f,g;d<f;++d)s[d]=arguments[d+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(g=this._[n],d=0,f=g.length;d<f;++d)g[d].value.apply(l,s)},apply:function(n,l,s){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var d=this._[n],f=0,g=d.length;f<g;++f)d[f].value.apply(l,s)}};function D1(n,l){for(var s=0,d=n.length,f;s<d;++s)if((f=n[s]).name===l)return f.value}function L0(n,l,s){for(var d=0,f=n.length;d<f;++d)if(n[d].name===l){n[d]=A1,n=n.slice(0,d).concat(n.slice(d+1));break}return s!=null&&n.push({name:l,value:s}),n}var yg="http://www.w3.org/1999/xhtml";const F0={svg:"http://www.w3.org/2000/svg",xhtml:yg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Hh(n){var l=n+="",s=l.indexOf(":");return s>=0&&(l=n.slice(0,s))!=="xmlns"&&(n=n.slice(s+1)),F0.hasOwnProperty(l)?{space:F0[l],local:n}:n}function z1(n){return function(){var l=this.ownerDocument,s=this.namespaceURI;return s===yg&&l.documentElement.namespaceURI===yg?l.createElement(n):l.createElementNS(s,n)}}function O1(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Zm(n){var l=Hh(n);return(l.local?O1:z1)(l)}function I1(){}function Og(n){return n==null?I1:function(){return this.querySelector(n)}}function $1(n){typeof n!="function"&&(n=Og(n));for(var l=this._groups,s=l.length,d=new Array(s),f=0;f<s;++f)for(var g=l[f],p=g.length,y=d[f]=new Array(p),w,v,S=0;S<p;++S)(w=g[S])&&(v=n.call(w,w.__data__,S,g))&&("__data__"in w&&(v.__data__=w.__data__),y[S]=v);return new Lr(d,this._parents)}function L1(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function F1(){return[]}function Qm(n){return n==null?F1:function(){return this.querySelectorAll(n)}}function H1(n){return function(){return L1(n.apply(this,arguments))}}function U1(n){typeof n=="function"?n=H1(n):n=Qm(n);for(var l=this._groups,s=l.length,d=[],f=[],g=0;g<s;++g)for(var p=l[g],y=p.length,w,v=0;v<y;++v)(w=p[v])&&(d.push(n.call(w,w.__data__,v,p)),f.push(w));return new Lr(d,f)}function Jm(n){return function(){return this.matches(n)}}function ex(n){return function(l){return l.matches(n)}}var B1=Array.prototype.find;function W1(n){return function(){return B1.call(this.children,n)}}function V1(){return this.firstElementChild}function Y1(n){return this.select(n==null?V1:W1(typeof n=="function"?n:ex(n)))}var q1=Array.prototype.filter;function G1(){return Array.from(this.children)}function X1(n){return function(){return q1.call(this.children,n)}}function K1(n){return this.selectAll(n==null?G1:X1(typeof n=="function"?n:ex(n)))}function Z1(n){typeof n!="function"&&(n=Jm(n));for(var l=this._groups,s=l.length,d=new Array(s),f=0;f<s;++f)for(var g=l[f],p=g.length,y=d[f]=[],w,v=0;v<p;++v)(w=g[v])&&n.call(w,w.__data__,v,g)&&y.push(w);return new Lr(d,this._parents)}function tx(n){return new Array(n.length)}function Q1(){return new Lr(this._enter||this._groups.map(tx),this._parents)}function Th(n,l){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=l}Th.prototype={constructor:Th,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,l){return this._parent.insertBefore(n,l)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function J1(n){return function(){return n}}function e2(n,l,s,d,f,g){for(var p=0,y,w=l.length,v=g.length;p<v;++p)(y=l[p])?(y.__data__=g[p],d[p]=y):s[p]=new Th(n,g[p]);for(;p<w;++p)(y=l[p])&&(f[p]=y)}function t2(n,l,s,d,f,g,p){var y,w,v=new Map,S=l.length,_=g.length,R=new Array(S),D;for(y=0;y<S;++y)(w=l[y])&&(R[y]=D=p.call(w,w.__data__,y,l)+"",v.has(D)?f[y]=w:v.set(D,w));for(y=0;y<_;++y)D=p.call(n,g[y],y,g)+"",(w=v.get(D))?(d[y]=w,w.__data__=g[y],v.delete(D)):s[y]=new Th(n,g[y]);for(y=0;y<S;++y)(w=l[y])&&v.get(R[y])===w&&(f[y]=w)}function n2(n){return n.__data__}function r2(n,l){if(!arguments.length)return Array.from(this,n2);var s=l?t2:e2,d=this._parents,f=this._groups;typeof n!="function"&&(n=J1(n));for(var g=f.length,p=new Array(g),y=new Array(g),w=new Array(g),v=0;v<g;++v){var S=d[v],_=f[v],R=_.length,D=i2(n.call(S,S&&S.__data__,v,d)),B=D.length,H=y[v]=new Array(B),$=p[v]=new Array(B),T=w[v]=new Array(R);s(S,_,H,$,T,D,l);for(var N=0,M=0,P,O;N<B;++N)if(P=H[N]){for(N>=M&&(M=N+1);!(O=$[M])&&++M<B;);P._next=O||null}}return p=new Lr(p,d),p._enter=y,p._exit=w,p}function i2(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function s2(){return new Lr(this._exit||this._groups.map(tx),this._parents)}function o2(n,l,s){var d=this.enter(),f=this,g=this.exit();return typeof n=="function"?(d=n(d),d&&(d=d.selection())):d=d.append(n+""),l!=null&&(f=l(f),f&&(f=f.selection())),s==null?g.remove():s(g),d&&f?d.merge(f).order():f}function l2(n){for(var l=n.selection?n.selection():n,s=this._groups,d=l._groups,f=s.length,g=d.length,p=Math.min(f,g),y=new Array(f),w=0;w<p;++w)for(var v=s[w],S=d[w],_=v.length,R=y[w]=new Array(_),D,B=0;B<_;++B)(D=v[B]||S[B])&&(R[B]=D);for(;w<f;++w)y[w]=s[w];return new Lr(y,this._parents)}function a2(){for(var n=this._groups,l=-1,s=n.length;++l<s;)for(var d=n[l],f=d.length-1,g=d[f],p;--f>=0;)(p=d[f])&&(g&&p.compareDocumentPosition(g)^4&&g.parentNode.insertBefore(p,g),g=p);return this}function u2(n){n||(n=c2);function l(_,R){return _&&R?n(_.__data__,R.__data__):!_-!R}for(var s=this._groups,d=s.length,f=new Array(d),g=0;g<d;++g){for(var p=s[g],y=p.length,w=f[g]=new Array(y),v,S=0;S<y;++S)(v=p[S])&&(w[S]=v);w.sort(l)}return new Lr(f,this._parents).order()}function c2(n,l){return n<l?-1:n>l?1:n>=l?0:NaN}function d2(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function f2(){return Array.from(this)}function h2(){for(var n=this._groups,l=0,s=n.length;l<s;++l)for(var d=n[l],f=0,g=d.length;f<g;++f){var p=d[f];if(p)return p}return null}function p2(){let n=0;for(const l of this)++n;return n}function g2(){return!this.node()}function m2(n){for(var l=this._groups,s=0,d=l.length;s<d;++s)for(var f=l[s],g=0,p=f.length,y;g<p;++g)(y=f[g])&&n.call(y,y.__data__,g,f);return this}function x2(n){return function(){this.removeAttribute(n)}}function y2(n){return function(){this.removeAttributeNS(n.space,n.local)}}function v2(n,l){return function(){this.setAttribute(n,l)}}function w2(n,l){return function(){this.setAttributeNS(n.space,n.local,l)}}function S2(n,l){return function(){var s=l.apply(this,arguments);s==null?this.removeAttribute(n):this.setAttribute(n,s)}}function _2(n,l){return function(){var s=l.apply(this,arguments);s==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,s)}}function N2(n,l){var s=Hh(n);if(arguments.length<2){var d=this.node();return s.local?d.getAttributeNS(s.space,s.local):d.getAttribute(s)}return this.each((l==null?s.local?y2:x2:typeof l=="function"?s.local?_2:S2:s.local?w2:v2)(s,l))}function nx(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function b2(n){return function(){this.style.removeProperty(n)}}function E2(n,l,s){return function(){this.style.setProperty(n,l,s)}}function C2(n,l,s){return function(){var d=l.apply(this,arguments);d==null?this.style.removeProperty(n):this.style.setProperty(n,d,s)}}function k2(n,l,s){return arguments.length>1?this.each((l==null?b2:typeof l=="function"?C2:E2)(n,l,s??"")):Iu(this.node(),n)}function Iu(n,l){return n.style.getPropertyValue(l)||nx(n).getComputedStyle(n,null).getPropertyValue(l)}function j2(n){return function(){delete this[n]}}function T2(n,l){return function(){this[n]=l}}function P2(n,l){return function(){var s=l.apply(this,arguments);s==null?delete this[n]:this[n]=s}}function R2(n,l){return arguments.length>1?this.each((l==null?j2:typeof l=="function"?P2:T2)(n,l)):this.node()[n]}function rx(n){return n.trim().split(/^|\s+/)}function Ig(n){return n.classList||new ix(n)}function ix(n){this._node=n,this._names=rx(n.getAttribute("class")||"")}ix.prototype={add:function(n){var l=this._names.indexOf(n);l<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var l=this._names.indexOf(n);l>=0&&(this._names.splice(l,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function sx(n,l){for(var s=Ig(n),d=-1,f=l.length;++d<f;)s.add(l[d])}function ox(n,l){for(var s=Ig(n),d=-1,f=l.length;++d<f;)s.remove(l[d])}function A2(n){return function(){sx(this,n)}}function M2(n){return function(){ox(this,n)}}function D2(n,l){return function(){(l.apply(this,arguments)?sx:ox)(this,n)}}function z2(n,l){var s=rx(n+"");if(arguments.length<2){for(var d=Ig(this.node()),f=-1,g=s.length;++f<g;)if(!d.contains(s[f]))return!1;return!0}return this.each((typeof l=="function"?D2:l?A2:M2)(s,l))}function O2(){this.textContent=""}function I2(n){return function(){this.textContent=n}}function $2(n){return function(){var l=n.apply(this,arguments);this.textContent=l??""}}function L2(n){return arguments.length?this.each(n==null?O2:(typeof n=="function"?$2:I2)(n)):this.node().textContent}function F2(){this.innerHTML=""}function H2(n){return function(){this.innerHTML=n}}function U2(n){return function(){var l=n.apply(this,arguments);this.innerHTML=l??""}}function B2(n){return arguments.length?this.each(n==null?F2:(typeof n=="function"?U2:H2)(n)):this.node().innerHTML}function W2(){this.nextSibling&&this.parentNode.appendChild(this)}function V2(){return this.each(W2)}function Y2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function q2(){return this.each(Y2)}function G2(n){var l=typeof n=="function"?n:Zm(n);return this.select(function(){return this.appendChild(l.apply(this,arguments))})}function X2(){return null}function K2(n,l){var s=typeof n=="function"?n:Zm(n),d=l==null?X2:typeof l=="function"?l:Og(l);return this.select(function(){return this.insertBefore(s.apply(this,arguments),d.apply(this,arguments)||null)})}function Z2(){var n=this.parentNode;n&&n.removeChild(this)}function Q2(){return this.each(Z2)}function J2(){var n=this.cloneNode(!1),l=this.parentNode;return l?l.insertBefore(n,this.nextSibling):n}function eS(){var n=this.cloneNode(!0),l=this.parentNode;return l?l.insertBefore(n,this.nextSibling):n}function tS(n){return this.select(n?eS:J2)}function nS(n){return arguments.length?this.property("__data__",n):this.node().__data__}function rS(n){return function(l){n.call(this,l,this.__data__)}}function iS(n){return n.trim().split(/^|\s+/).map(function(l){var s="",d=l.indexOf(".");return d>=0&&(s=l.slice(d+1),l=l.slice(0,d)),{type:l,name:s}})}function sS(n){return function(){var l=this.__on;if(l){for(var s=0,d=-1,f=l.length,g;s<f;++s)g=l[s],(!n.type||g.type===n.type)&&g.name===n.name?this.removeEventListener(g.type,g.listener,g.options):l[++d]=g;++d?l.length=d:delete this.__on}}}function oS(n,l,s){return function(){var d=this.__on,f,g=rS(l);if(d){for(var p=0,y=d.length;p<y;++p)if((f=d[p]).type===n.type&&f.name===n.name){this.removeEventListener(f.type,f.listener,f.options),this.addEventListener(f.type,f.listener=g,f.options=s),f.value=l;return}}this.addEventListener(n.type,g,s),f={type:n.type,name:n.name,value:l,listener:g,options:s},d?d.push(f):this.__on=[f]}}function lS(n,l,s){var d=iS(n+""),f,g=d.length,p;if(arguments.length<2){var y=this.node().__on;if(y){for(var w=0,v=y.length,S;w<v;++w)for(f=0,S=y[w];f<g;++f)if((p=d[f]).type===S.type&&p.name===S.name)return S.value}return}for(y=l?oS:sS,f=0;f<g;++f)this.each(y(d[f],l,s));return this}function lx(n,l,s){var d=nx(n),f=d.CustomEvent;typeof f=="function"?f=new f(l,s):(f=d.document.createEvent("Event"),s?(f.initEvent(l,s.bubbles,s.cancelable),f.detail=s.detail):f.initEvent(l,!1,!1)),n.dispatchEvent(f)}function aS(n,l){return function(){return lx(this,n,l)}}function uS(n,l){return function(){return lx(this,n,l.apply(this,arguments))}}function cS(n,l){return this.each((typeof l=="function"?uS:aS)(n,l))}function*dS(){for(var n=this._groups,l=0,s=n.length;l<s;++l)for(var d=n[l],f=0,g=d.length,p;f<g;++f)(p=d[f])&&(yield p)}var ax=[null];function Lr(n,l){this._groups=n,this._parents=l}function Dd(){return new Lr([[document.documentElement]],ax)}function fS(){return this}Lr.prototype=Dd.prototype={constructor:Lr,select:$1,selectAll:U1,selectChild:Y1,selectChildren:K1,filter:Z1,data:r2,enter:Q1,exit:s2,join:o2,merge:l2,selection:fS,order:a2,sort:u2,call:d2,nodes:f2,node:h2,size:p2,empty:g2,each:m2,attr:N2,style:k2,property:R2,classed:z2,text:L2,html:B2,raise:V2,lower:q2,append:G2,insert:K2,remove:Q2,clone:tS,datum:nS,on:lS,dispatch:cS,[Symbol.iterator]:dS};function si(n){return typeof n=="string"?new Lr([[document.querySelector(n)]],[document.documentElement]):new Lr([[n]],ax)}function hS(n){let l;for(;l=n.sourceEvent;)n=l;return n}function Ei(n,l){if(n=hS(n),l===void 0&&(l=n.currentTarget),l){var s=l.ownerSVGElement||l;if(s.createSVGPoint){var d=s.createSVGPoint();return d.x=n.clientX,d.y=n.clientY,d=d.matrixTransform(l.getScreenCTM().inverse()),[d.x,d.y]}if(l.getBoundingClientRect){var f=l.getBoundingClientRect();return[n.clientX-f.left-l.clientLeft,n.clientY-f.top-l.clientTop]}}return[n.pageX,n.pageY]}const pS={passive:!1},Cd={capture:!0,passive:!1};function ng(n){n.stopImmediatePropagation()}function Du(n){n.preventDefault(),n.stopImmediatePropagation()}function ux(n){var l=n.document.documentElement,s=si(n).on("dragstart.drag",Du,Cd);"onselectstart"in l?s.on("selectstart.drag",Du,Cd):(l.__noselect=l.style.MozUserSelect,l.style.MozUserSelect="none")}function cx(n,l){var s=n.document.documentElement,d=si(n).on("dragstart.drag",null);l&&(d.on("click.drag",Du,Cd),setTimeout(function(){d.on("click.drag",null)},0)),"onselectstart"in s?d.on("selectstart.drag",null):(s.style.MozUserSelect=s.__noselect,delete s.__noselect)}const lh=n=>()=>n;function vg(n,{sourceEvent:l,subject:s,target:d,identifier:f,active:g,x:p,y,dx:w,dy:v,dispatch:S}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:l,enumerable:!0,configurable:!0},subject:{value:s,enumerable:!0,configurable:!0},target:{value:d,enumerable:!0,configurable:!0},identifier:{value:f,enumerable:!0,configurable:!0},active:{value:g,enumerable:!0,configurable:!0},x:{value:p,enumerable:!0,configurable:!0},y:{value:y,enumerable:!0,configurable:!0},dx:{value:w,enumerable:!0,configurable:!0},dy:{value:v,enumerable:!0,configurable:!0},_:{value:S}})}vg.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function gS(n){return!n.ctrlKey&&!n.button}function mS(){return this.parentNode}function xS(n,l){return l??{x:n.x,y:n.y}}function yS(){return navigator.maxTouchPoints||"ontouchstart"in this}function vS(){var n=gS,l=mS,s=xS,d=yS,f={},g=Fh("start","drag","end"),p=0,y,w,v,S,_=0;function R(P){P.on("mousedown.drag",D).filter(d).on("touchstart.drag",$).on("touchmove.drag",T,pS).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function D(P,O){if(!(S||!n.call(this,P,O))){var F=M(this,l.call(this,P,O),P,O,"mouse");F&&(si(P.view).on("mousemove.drag",B,Cd).on("mouseup.drag",H,Cd),ux(P.view),ng(P),v=!1,y=P.clientX,w=P.clientY,F("start",P))}}function B(P){if(Du(P),!v){var O=P.clientX-y,F=P.clientY-w;v=O*O+F*F>_}f.mouse("drag",P)}function H(P){si(P.view).on("mousemove.drag mouseup.drag",null),cx(P.view,v),Du(P),f.mouse("end",P)}function $(P,O){if(n.call(this,P,O)){var F=P.changedTouches,b=l.call(this,P,O),U=F.length,Y,re;for(Y=0;Y<U;++Y)(re=M(this,b,P,O,F[Y].identifier,F[Y]))&&(ng(P),re("start",P,F[Y]))}}function T(P){var O=P.changedTouches,F=O.length,b,U;for(b=0;b<F;++b)(U=f[O[b].identifier])&&(Du(P),U("drag",P,O[b]))}function N(P){var O=P.changedTouches,F=O.length,b,U;for(S&&clearTimeout(S),S=setTimeout(function(){S=null},500),b=0;b<F;++b)(U=f[O[b].identifier])&&(ng(P),U("end",P,O[b]))}function M(P,O,F,b,U,Y){var re=g.copy(),se=Ei(Y||F,O),le,ce,j;if((j=s.call(P,new vg("beforestart",{sourceEvent:F,target:R,identifier:U,active:p,x:se[0],y:se[1],dx:0,dy:0,dispatch:re}),b))!=null)return le=j.x-se[0]||0,ce=j.y-se[1]||0,function q(X,te,Q){var C=se,L;switch(X){case"start":f[U]=q,L=p++;break;case"end":delete f[U],--p;case"drag":se=Ei(Q||te,O),L=p;break}re.call(X,P,new vg(X,{sourceEvent:te,subject:j,target:R,identifier:U,active:L,x:se[0]+le,y:se[1]+ce,dx:se[0]-C[0],dy:se[1]-C[1],dispatch:re}),b)}}return R.filter=function(P){return arguments.length?(n=typeof P=="function"?P:lh(!!P),R):n},R.container=function(P){return arguments.length?(l=typeof P=="function"?P:lh(P),R):l},R.subject=function(P){return arguments.length?(s=typeof P=="function"?P:lh(P),R):s},R.touchable=function(P){return arguments.length?(d=typeof P=="function"?P:lh(!!P),R):d},R.on=function(){var P=g.on.apply(g,arguments);return P===g?R:P},R.clickDistance=function(P){return arguments.length?(_=(P=+P)*P,R):Math.sqrt(_)},R}function $g(n,l,s){n.prototype=l.prototype=s,s.constructor=n}function dx(n,l){var s=Object.create(n.prototype);for(var d in l)s[d]=l[d];return s}function zd(){}var kd=.7,Ph=1/kd,zu="\\s*([+-]?\\d+)\\s*",jd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ns="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wS=/^#([0-9a-f]{3,8})$/,SS=new RegExp(`^rgb\\(${zu},${zu},${zu}\\)$`),_S=new RegExp(`^rgb\\(${ns},${ns},${ns}\\)$`),NS=new RegExp(`^rgba\\(${zu},${zu},${zu},${jd}\\)$`),bS=new RegExp(`^rgba\\(${ns},${ns},${ns},${jd}\\)$`),ES=new RegExp(`^hsl\\(${jd},${ns},${ns}\\)$`),CS=new RegExp(`^hsla\\(${jd},${ns},${ns},${jd}\\)$`),H0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$g(zd,Td,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:U0,formatHex:U0,formatHex8:kS,formatHsl:jS,formatRgb:B0,toString:B0});function U0(){return this.rgb().formatHex()}function kS(){return this.rgb().formatHex8()}function jS(){return fx(this).formatHsl()}function B0(){return this.rgb().formatRgb()}function Td(n){var l,s;return n=(n+"").trim().toLowerCase(),(l=wS.exec(n))?(s=l[1].length,l=parseInt(l[1],16),s===6?W0(l):s===3?new br(l>>8&15|l>>4&240,l>>4&15|l&240,(l&15)<<4|l&15,1):s===8?ah(l>>24&255,l>>16&255,l>>8&255,(l&255)/255):s===4?ah(l>>12&15|l>>8&240,l>>8&15|l>>4&240,l>>4&15|l&240,((l&15)<<4|l&15)/255):null):(l=SS.exec(n))?new br(l[1],l[2],l[3],1):(l=_S.exec(n))?new br(l[1]*255/100,l[2]*255/100,l[3]*255/100,1):(l=NS.exec(n))?ah(l[1],l[2],l[3],l[4]):(l=bS.exec(n))?ah(l[1]*255/100,l[2]*255/100,l[3]*255/100,l[4]):(l=ES.exec(n))?q0(l[1],l[2]/100,l[3]/100,1):(l=CS.exec(n))?q0(l[1],l[2]/100,l[3]/100,l[4]):H0.hasOwnProperty(n)?W0(H0[n]):n==="transparent"?new br(NaN,NaN,NaN,0):null}function W0(n){return new br(n>>16&255,n>>8&255,n&255,1)}function ah(n,l,s,d){return d<=0&&(n=l=s=NaN),new br(n,l,s,d)}function TS(n){return n instanceof zd||(n=Td(n)),n?(n=n.rgb(),new br(n.r,n.g,n.b,n.opacity)):new br}function wg(n,l,s,d){return arguments.length===1?TS(n):new br(n,l,s,d??1)}function br(n,l,s,d){this.r=+n,this.g=+l,this.b=+s,this.opacity=+d}$g(br,wg,dx(zd,{brighter(n){return n=n==null?Ph:Math.pow(Ph,n),new br(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?kd:Math.pow(kd,n),new br(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new br(Vl(this.r),Vl(this.g),Vl(this.b),Rh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:V0,formatHex:V0,formatHex8:PS,formatRgb:Y0,toString:Y0}));function V0(){return`#${Bl(this.r)}${Bl(this.g)}${Bl(this.b)}`}function PS(){return`#${Bl(this.r)}${Bl(this.g)}${Bl(this.b)}${Bl((isNaN(this.opacity)?1:this.opacity)*255)}`}function Y0(){const n=Rh(this.opacity);return`${n===1?"rgb(":"rgba("}${Vl(this.r)}, ${Vl(this.g)}, ${Vl(this.b)}${n===1?")":`, ${n})`}`}function Rh(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Vl(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Bl(n){return n=Vl(n),(n<16?"0":"")+n.toString(16)}function q0(n,l,s,d){return d<=0?n=l=s=NaN:s<=0||s>=1?n=l=NaN:l<=0&&(n=NaN),new Ci(n,l,s,d)}function fx(n){if(n instanceof Ci)return new Ci(n.h,n.s,n.l,n.opacity);if(n instanceof zd||(n=Td(n)),!n)return new Ci;if(n instanceof Ci)return n;n=n.rgb();var l=n.r/255,s=n.g/255,d=n.b/255,f=Math.min(l,s,d),g=Math.max(l,s,d),p=NaN,y=g-f,w=(g+f)/2;return y?(l===g?p=(s-d)/y+(s<d)*6:s===g?p=(d-l)/y+2:p=(l-s)/y+4,y/=w<.5?g+f:2-g-f,p*=60):y=w>0&&w<1?0:p,new Ci(p,y,w,n.opacity)}function RS(n,l,s,d){return arguments.length===1?fx(n):new Ci(n,l,s,d??1)}function Ci(n,l,s,d){this.h=+n,this.s=+l,this.l=+s,this.opacity=+d}$g(Ci,RS,dx(zd,{brighter(n){return n=n==null?Ph:Math.pow(Ph,n),new Ci(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?kd:Math.pow(kd,n),new Ci(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,l=isNaN(n)||isNaN(this.s)?0:this.s,s=this.l,d=s+(s<.5?s:1-s)*l,f=2*s-d;return new br(rg(n>=240?n-240:n+120,f,d),rg(n,f,d),rg(n<120?n+240:n-120,f,d),this.opacity)},clamp(){return new Ci(G0(this.h),uh(this.s),uh(this.l),Rh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Rh(this.opacity);return`${n===1?"hsl(":"hsla("}${G0(this.h)}, ${uh(this.s)*100}%, ${uh(this.l)*100}%${n===1?")":`, ${n})`}`}}));function G0(n){return n=(n||0)%360,n<0?n+360:n}function uh(n){return Math.max(0,Math.min(1,n||0))}function rg(n,l,s){return(n<60?l+(s-l)*n/60:n<180?s:n<240?l+(s-l)*(240-n)/60:l)*255}const hx=n=>()=>n;function AS(n,l){return function(s){return n+s*l}}function MS(n,l,s){return n=Math.pow(n,s),l=Math.pow(l,s)-n,s=1/s,function(d){return Math.pow(n+d*l,s)}}function DS(n){return(n=+n)==1?px:function(l,s){return s-l?MS(l,s,n):hx(isNaN(l)?s:l)}}function px(n,l){var s=l-n;return s?AS(n,s):hx(isNaN(n)?l:n)}const X0=function n(l){var s=DS(l);function d(f,g){var p=s((f=wg(f)).r,(g=wg(g)).r),y=s(f.g,g.g),w=s(f.b,g.b),v=px(f.opacity,g.opacity);return function(S){return f.r=p(S),f.g=y(S),f.b=w(S),f.opacity=v(S),f+""}}return d.gamma=n,d}(1);function Io(n,l){return n=+n,l=+l,function(s){return n*(1-s)+l*s}}var Sg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ig=new RegExp(Sg.source,"g");function zS(n){return function(){return n}}function OS(n){return function(l){return n(l)+""}}function IS(n,l){var s=Sg.lastIndex=ig.lastIndex=0,d,f,g,p=-1,y=[],w=[];for(n=n+"",l=l+"";(d=Sg.exec(n))&&(f=ig.exec(l));)(g=f.index)>s&&(g=l.slice(s,g),y[p]?y[p]+=g:y[++p]=g),(d=d[0])===(f=f[0])?y[p]?y[p]+=f:y[++p]=f:(y[++p]=null,w.push({i:p,x:Io(d,f)})),s=ig.lastIndex;return s<l.length&&(g=l.slice(s),y[p]?y[p]+=g:y[++p]=g),y.length<2?w[0]?OS(w[0].x):zS(l):(l=w.length,function(v){for(var S=0,_;S<l;++S)y[(_=w[S]).i]=_.x(v);return y.join("")})}var K0=180/Math.PI,_g={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function gx(n,l,s,d,f,g){var p,y,w;return(p=Math.sqrt(n*n+l*l))&&(n/=p,l/=p),(w=n*s+l*d)&&(s-=n*w,d-=l*w),(y=Math.sqrt(s*s+d*d))&&(s/=y,d/=y,w/=y),n*d<l*s&&(n=-n,l=-l,w=-w,p=-p),{translateX:f,translateY:g,rotate:Math.atan2(l,n)*K0,skewX:Math.atan(w)*K0,scaleX:p,scaleY:y}}var ch;function $S(n){const l=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return l.isIdentity?_g:gx(l.a,l.b,l.c,l.d,l.e,l.f)}function LS(n){return n==null||(ch||(ch=document.createElementNS("http://www.w3.org/2000/svg","g")),ch.setAttribute("transform",n),!(n=ch.transform.baseVal.consolidate()))?_g:(n=n.matrix,gx(n.a,n.b,n.c,n.d,n.e,n.f))}function mx(n,l,s,d){function f(v){return v.length?v.pop()+" ":""}function g(v,S,_,R,D,B){if(v!==_||S!==R){var H=D.push("translate(",null,l,null,s);B.push({i:H-4,x:Io(v,_)},{i:H-2,x:Io(S,R)})}else(_||R)&&D.push("translate("+_+l+R+s)}function p(v,S,_,R){v!==S?(v-S>180?S+=360:S-v>180&&(v+=360),R.push({i:_.push(f(_)+"rotate(",null,d)-2,x:Io(v,S)})):S&&_.push(f(_)+"rotate("+S+d)}function y(v,S,_,R){v!==S?R.push({i:_.push(f(_)+"skewX(",null,d)-2,x:Io(v,S)}):S&&_.push(f(_)+"skewX("+S+d)}function w(v,S,_,R,D,B){if(v!==_||S!==R){var H=D.push(f(D)+"scale(",null,",",null,")");B.push({i:H-4,x:Io(v,_)},{i:H-2,x:Io(S,R)})}else(_!==1||R!==1)&&D.push(f(D)+"scale("+_+","+R+")")}return function(v,S){var _=[],R=[];return v=n(v),S=n(S),g(v.translateX,v.translateY,S.translateX,S.translateY,_,R),p(v.rotate,S.rotate,_,R),y(v.skewX,S.skewX,_,R),w(v.scaleX,v.scaleY,S.scaleX,S.scaleY,_,R),v=S=null,function(D){for(var B=-1,H=R.length,$;++B<H;)_[($=R[B]).i]=$.x(D);return _.join("")}}}var FS=mx($S,"px, ","px)","deg)"),HS=mx(LS,", ",")",")"),US=1e-12;function Z0(n){return((n=Math.exp(n))+1/n)/2}function BS(n){return((n=Math.exp(n))-1/n)/2}function WS(n){return((n=Math.exp(2*n))-1)/(n+1)}const VS=function n(l,s,d){function f(g,p){var y=g[0],w=g[1],v=g[2],S=p[0],_=p[1],R=p[2],D=S-y,B=_-w,H=D*D+B*B,$,T;if(H<US)T=Math.log(R/v)/l,$=function(b){return[y+b*D,w+b*B,v*Math.exp(l*b*T)]};else{var N=Math.sqrt(H),M=(R*R-v*v+d*H)/(2*v*s*N),P=(R*R-v*v-d*H)/(2*R*s*N),O=Math.log(Math.sqrt(M*M+1)-M),F=Math.log(Math.sqrt(P*P+1)-P);T=(F-O)/l,$=function(b){var U=b*T,Y=Z0(O),re=v/(s*N)*(Y*WS(l*U+O)-BS(O));return[y+re*D,w+re*B,v*Y/Z0(l*U+O)]}}return $.duration=T*1e3*l/Math.SQRT2,$}return f.rho=function(g){var p=Math.max(.001,+g),y=p*p,w=y*y;return n(p,y,w)},f}(Math.SQRT2,2,4);var $u=0,Sd=0,cd=0,xx=1e3,Ah,_d,Mh=0,Gl=0,Uh=0,Pd=typeof performance=="object"&&performance.now?performance:Date,yx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Lg(){return Gl||(yx(YS),Gl=Pd.now()+Uh)}function YS(){Gl=0}function Dh(){this._call=this._time=this._next=null}Dh.prototype=vx.prototype={constructor:Dh,restart:function(n,l,s){if(typeof n!="function")throw new TypeError("callback is not a function");s=(s==null?Lg():+s)+(l==null?0:+l),!this._next&&_d!==this&&(_d?_d._next=this:Ah=this,_d=this),this._call=n,this._time=s,Ng()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ng())}};function vx(n,l,s){var d=new Dh;return d.restart(n,l,s),d}function qS(){Lg(),++$u;for(var n=Ah,l;n;)(l=Gl-n._time)>=0&&n._call.call(void 0,l),n=n._next;--$u}function Q0(){Gl=(Mh=Pd.now())+Uh,$u=Sd=0;try{qS()}finally{$u=0,XS(),Gl=0}}function GS(){var n=Pd.now(),l=n-Mh;l>xx&&(Uh-=l,Mh=n)}function XS(){for(var n,l=Ah,s,d=1/0;l;)l._call?(d>l._time&&(d=l._time),n=l,l=l._next):(s=l._next,l._next=null,l=n?n._next=s:Ah=s);_d=n,Ng(d)}function Ng(n){if(!$u){Sd&&(Sd=clearTimeout(Sd));var l=n-Gl;l>24?(n<1/0&&(Sd=setTimeout(Q0,n-Pd.now()-Uh)),cd&&(cd=clearInterval(cd))):(cd||(Mh=Pd.now(),cd=setInterval(GS,xx)),$u=1,yx(Q0))}}function J0(n,l,s){var d=new Dh;return l=l==null?0:+l,d.restart(f=>{d.stop(),n(f+l)},l,s),d}var KS=Fh("start","end","cancel","interrupt"),ZS=[],wx=0,em=1,bg=2,Sh=3,tm=4,Eg=5,_h=6;function Bh(n,l,s,d,f,g){var p=n.__transition;if(!p)n.__transition={};else if(s in p)return;QS(n,s,{name:l,index:d,group:f,on:KS,tween:ZS,time:g.time,delay:g.delay,duration:g.duration,ease:g.ease,timer:null,state:wx})}function Fg(n,l){var s=ji(n,l);if(s.state>wx)throw new Error("too late; already scheduled");return s}function ss(n,l){var s=ji(n,l);if(s.state>Sh)throw new Error("too late; already running");return s}function ji(n,l){var s=n.__transition;if(!s||!(s=s[l]))throw new Error("transition not found");return s}function QS(n,l,s){var d=n.__transition,f;d[l]=s,s.timer=vx(g,0,s.time);function g(v){s.state=em,s.timer.restart(p,s.delay,s.time),s.delay<=v&&p(v-s.delay)}function p(v){var S,_,R,D;if(s.state!==em)return w();for(S in d)if(D=d[S],D.name===s.name){if(D.state===Sh)return J0(p);D.state===tm?(D.state=_h,D.timer.stop(),D.on.call("interrupt",n,n.__data__,D.index,D.group),delete d[S]):+S<l&&(D.state=_h,D.timer.stop(),D.on.call("cancel",n,n.__data__,D.index,D.group),delete d[S])}if(J0(function(){s.state===Sh&&(s.state=tm,s.timer.restart(y,s.delay,s.time),y(v))}),s.state=bg,s.on.call("start",n,n.__data__,s.index,s.group),s.state===bg){for(s.state=Sh,f=new Array(R=s.tween.length),S=0,_=-1;S<R;++S)(D=s.tween[S].value.call(n,n.__data__,s.index,s.group))&&(f[++_]=D);f.length=_+1}}function y(v){for(var S=v<s.duration?s.ease.call(null,v/s.duration):(s.timer.restart(w),s.state=Eg,1),_=-1,R=f.length;++_<R;)f[_].call(n,S);s.state===Eg&&(s.on.call("end",n,n.__data__,s.index,s.group),w())}function w(){s.state=_h,s.timer.stop(),delete d[l];for(var v in d)return;delete n.__transition}}function Nh(n,l){var s=n.__transition,d,f,g=!0,p;if(s){l=l==null?null:l+"";for(p in s){if((d=s[p]).name!==l){g=!1;continue}f=d.state>bg&&d.state<Eg,d.state=_h,d.timer.stop(),d.on.call(f?"interrupt":"cancel",n,n.__data__,d.index,d.group),delete s[p]}g&&delete n.__transition}}function JS(n){return this.each(function(){Nh(this,n)})}function e_(n,l){var s,d;return function(){var f=ss(this,n),g=f.tween;if(g!==s){d=s=g;for(var p=0,y=d.length;p<y;++p)if(d[p].name===l){d=d.slice(),d.splice(p,1);break}}f.tween=d}}function t_(n,l,s){var d,f;if(typeof s!="function")throw new Error;return function(){var g=ss(this,n),p=g.tween;if(p!==d){f=(d=p).slice();for(var y={name:l,value:s},w=0,v=f.length;w<v;++w)if(f[w].name===l){f[w]=y;break}w===v&&f.push(y)}g.tween=f}}function n_(n,l){var s=this._id;if(n+="",arguments.length<2){for(var d=ji(this.node(),s).tween,f=0,g=d.length,p;f<g;++f)if((p=d[f]).name===n)return p.value;return null}return this.each((l==null?e_:t_)(s,n,l))}function Hg(n,l,s){var d=n._id;return n.each(function(){var f=ss(this,d);(f.value||(f.value={}))[l]=s.apply(this,arguments)}),function(f){return ji(f,d).value[l]}}function Sx(n,l){var s;return(typeof l=="number"?Io:l instanceof Td?X0:(s=Td(l))?(l=s,X0):IS)(n,l)}function r_(n){return function(){this.removeAttribute(n)}}function i_(n){return function(){this.removeAttributeNS(n.space,n.local)}}function s_(n,l,s){var d,f=s+"",g;return function(){var p=this.getAttribute(n);return p===f?null:p===d?g:g=l(d=p,s)}}function o_(n,l,s){var d,f=s+"",g;return function(){var p=this.getAttributeNS(n.space,n.local);return p===f?null:p===d?g:g=l(d=p,s)}}function l_(n,l,s){var d,f,g;return function(){var p,y=s(this),w;return y==null?void this.removeAttribute(n):(p=this.getAttribute(n),w=y+"",p===w?null:p===d&&w===f?g:(f=w,g=l(d=p,y)))}}function a_(n,l,s){var d,f,g;return function(){var p,y=s(this),w;return y==null?void this.removeAttributeNS(n.space,n.local):(p=this.getAttributeNS(n.space,n.local),w=y+"",p===w?null:p===d&&w===f?g:(f=w,g=l(d=p,y)))}}function u_(n,l){var s=Hh(n),d=s==="transform"?HS:Sx;return this.attrTween(n,typeof l=="function"?(s.local?a_:l_)(s,d,Hg(this,"attr."+n,l)):l==null?(s.local?i_:r_)(s):(s.local?o_:s_)(s,d,l))}function c_(n,l){return function(s){this.setAttribute(n,l.call(this,s))}}function d_(n,l){return function(s){this.setAttributeNS(n.space,n.local,l.call(this,s))}}function f_(n,l){var s,d;function f(){var g=l.apply(this,arguments);return g!==d&&(s=(d=g)&&d_(n,g)),s}return f._value=l,f}function h_(n,l){var s,d;function f(){var g=l.apply(this,arguments);return g!==d&&(s=(d=g)&&c_(n,g)),s}return f._value=l,f}function p_(n,l){var s="attr."+n;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(l==null)return this.tween(s,null);if(typeof l!="function")throw new Error;var d=Hh(n);return this.tween(s,(d.local?f_:h_)(d,l))}function g_(n,l){return function(){Fg(this,n).delay=+l.apply(this,arguments)}}function m_(n,l){return l=+l,function(){Fg(this,n).delay=l}}function x_(n){var l=this._id;return arguments.length?this.each((typeof n=="function"?g_:m_)(l,n)):ji(this.node(),l).delay}function y_(n,l){return function(){ss(this,n).duration=+l.apply(this,arguments)}}function v_(n,l){return l=+l,function(){ss(this,n).duration=l}}function w_(n){var l=this._id;return arguments.length?this.each((typeof n=="function"?y_:v_)(l,n)):ji(this.node(),l).duration}function S_(n,l){if(typeof l!="function")throw new Error;return function(){ss(this,n).ease=l}}function __(n){var l=this._id;return arguments.length?this.each(S_(l,n)):ji(this.node(),l).ease}function N_(n,l){return function(){var s=l.apply(this,arguments);if(typeof s!="function")throw new Error;ss(this,n).ease=s}}function b_(n){if(typeof n!="function")throw new Error;return this.each(N_(this._id,n))}function E_(n){typeof n!="function"&&(n=Jm(n));for(var l=this._groups,s=l.length,d=new Array(s),f=0;f<s;++f)for(var g=l[f],p=g.length,y=d[f]=[],w,v=0;v<p;++v)(w=g[v])&&n.call(w,w.__data__,v,g)&&y.push(w);return new Ws(d,this._parents,this._name,this._id)}function C_(n){if(n._id!==this._id)throw new Error;for(var l=this._groups,s=n._groups,d=l.length,f=s.length,g=Math.min(d,f),p=new Array(d),y=0;y<g;++y)for(var w=l[y],v=s[y],S=w.length,_=p[y]=new Array(S),R,D=0;D<S;++D)(R=w[D]||v[D])&&(_[D]=R);for(;y<d;++y)p[y]=l[y];return new Ws(p,this._parents,this._name,this._id)}function k_(n){return(n+"").trim().split(/^|\s+/).every(function(l){var s=l.indexOf(".");return s>=0&&(l=l.slice(0,s)),!l||l==="start"})}function j_(n,l,s){var d,f,g=k_(l)?Fg:ss;return function(){var p=g(this,n),y=p.on;y!==d&&(f=(d=y).copy()).on(l,s),p.on=f}}function T_(n,l){var s=this._id;return arguments.length<2?ji(this.node(),s).on.on(n):this.each(j_(s,n,l))}function P_(n){return function(){var l=this.parentNode;for(var s in this.__transition)if(+s!==n)return;l&&l.removeChild(this)}}function R_(){return this.on("end.remove",P_(this._id))}function A_(n){var l=this._name,s=this._id;typeof n!="function"&&(n=Og(n));for(var d=this._groups,f=d.length,g=new Array(f),p=0;p<f;++p)for(var y=d[p],w=y.length,v=g[p]=new Array(w),S,_,R=0;R<w;++R)(S=y[R])&&(_=n.call(S,S.__data__,R,y))&&("__data__"in S&&(_.__data__=S.__data__),v[R]=_,Bh(v[R],l,s,R,v,ji(S,s)));return new Ws(g,this._parents,l,s)}function M_(n){var l=this._name,s=this._id;typeof n!="function"&&(n=Qm(n));for(var d=this._groups,f=d.length,g=[],p=[],y=0;y<f;++y)for(var w=d[y],v=w.length,S,_=0;_<v;++_)if(S=w[_]){for(var R=n.call(S,S.__data__,_,w),D,B=ji(S,s),H=0,$=R.length;H<$;++H)(D=R[H])&&Bh(D,l,s,H,R,B);g.push(R),p.push(S)}return new Ws(g,p,l,s)}var D_=Dd.prototype.constructor;function z_(){return new D_(this._groups,this._parents)}function O_(n,l){var s,d,f;return function(){var g=Iu(this,n),p=(this.style.removeProperty(n),Iu(this,n));return g===p?null:g===s&&p===d?f:f=l(s=g,d=p)}}function _x(n){return function(){this.style.removeProperty(n)}}function I_(n,l,s){var d,f=s+"",g;return function(){var p=Iu(this,n);return p===f?null:p===d?g:g=l(d=p,s)}}function $_(n,l,s){var d,f,g;return function(){var p=Iu(this,n),y=s(this),w=y+"";return y==null&&(w=y=(this.style.removeProperty(n),Iu(this,n))),p===w?null:p===d&&w===f?g:(f=w,g=l(d=p,y))}}function L_(n,l){var s,d,f,g="style."+l,p="end."+g,y;return function(){var w=ss(this,n),v=w.on,S=w.value[g]==null?y||(y=_x(l)):void 0;(v!==s||f!==S)&&(d=(s=v).copy()).on(p,f=S),w.on=d}}function F_(n,l,s){var d=(n+="")=="transform"?FS:Sx;return l==null?this.styleTween(n,O_(n,d)).on("end.style."+n,_x(n)):typeof l=="function"?this.styleTween(n,$_(n,d,Hg(this,"style."+n,l))).each(L_(this._id,n)):this.styleTween(n,I_(n,d,l),s).on("end.style."+n,null)}function H_(n,l,s){return function(d){this.style.setProperty(n,l.call(this,d),s)}}function U_(n,l,s){var d,f;function g(){var p=l.apply(this,arguments);return p!==f&&(d=(f=p)&&H_(n,p,s)),d}return g._value=l,g}function B_(n,l,s){var d="style."+(n+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(l==null)return this.tween(d,null);if(typeof l!="function")throw new Error;return this.tween(d,U_(n,l,s??""))}function W_(n){return function(){this.textContent=n}}function V_(n){return function(){var l=n(this);this.textContent=l??""}}function Y_(n){return this.tween("text",typeof n=="function"?V_(Hg(this,"text",n)):W_(n==null?"":n+""))}function q_(n){return function(l){this.textContent=n.call(this,l)}}function G_(n){var l,s;function d(){var f=n.apply(this,arguments);return f!==s&&(l=(s=f)&&q_(f)),l}return d._value=n,d}function X_(n){var l="text";if(arguments.length<1)return(l=this.tween(l))&&l._value;if(n==null)return this.tween(l,null);if(typeof n!="function")throw new Error;return this.tween(l,G_(n))}function K_(){for(var n=this._name,l=this._id,s=Nx(),d=this._groups,f=d.length,g=0;g<f;++g)for(var p=d[g],y=p.length,w,v=0;v<y;++v)if(w=p[v]){var S=ji(w,l);Bh(w,n,s,v,p,{time:S.time+S.delay+S.duration,delay:0,duration:S.duration,ease:S.ease})}return new Ws(d,this._parents,n,s)}function Z_(){var n,l,s=this,d=s._id,f=s.size();return new Promise(function(g,p){var y={value:p},w={value:function(){--f===0&&g()}};s.each(function(){var v=ss(this,d),S=v.on;S!==n&&(l=(n=S).copy(),l._.cancel.push(y),l._.interrupt.push(y),l._.end.push(w)),v.on=l}),f===0&&g()})}var Q_=0;function Ws(n,l,s,d){this._groups=n,this._parents=l,this._name=s,this._id=d}function Nx(){return++Q_}var Fs=Dd.prototype;Ws.prototype={constructor:Ws,select:A_,selectAll:M_,selectChild:Fs.selectChild,selectChildren:Fs.selectChildren,filter:E_,merge:C_,selection:z_,transition:K_,call:Fs.call,nodes:Fs.nodes,node:Fs.node,size:Fs.size,empty:Fs.empty,each:Fs.each,on:T_,attr:u_,attrTween:p_,style:F_,styleTween:B_,text:Y_,textTween:X_,remove:R_,tween:n_,delay:x_,duration:w_,ease:__,easeVarying:b_,end:Z_,[Symbol.iterator]:Fs[Symbol.iterator]};function J_(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var eN={time:null,delay:0,duration:250,ease:J_};function tN(n,l){for(var s;!(s=n.__transition)||!(s=s[l]);)if(!(n=n.parentNode))throw new Error(`transition ${l} not found`);return s}function nN(n){var l,s;n instanceof Ws?(l=n._id,n=n._name):(l=Nx(),(s=eN).time=Lg(),n=n==null?null:n+"");for(var d=this._groups,f=d.length,g=0;g<f;++g)for(var p=d[g],y=p.length,w,v=0;v<y;++v)(w=p[v])&&Bh(w,n,l,v,p,s||tN(w,l));return new Ws(d,this._parents,n,l)}Dd.prototype.interrupt=JS;Dd.prototype.transition=nN;const dh=n=>()=>n;function rN(n,{sourceEvent:l,target:s,transform:d,dispatch:f}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:l,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},transform:{value:d,enumerable:!0,configurable:!0},_:{value:f}})}function Us(n,l,s){this.k=n,this.x=l,this.y=s}Us.prototype={constructor:Us,scale:function(n){return n===1?this:new Us(this.k*n,this.x,this.y)},translate:function(n,l){return n===0&l===0?this:new Us(this.k,this.x+this.k*n,this.y+this.k*l)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Bs=new Us(1,0,0);Us.prototype;function sg(n){n.stopImmediatePropagation()}function dd(n){n.preventDefault(),n.stopImmediatePropagation()}function iN(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function sN(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function nm(){return this.__zoom||Bs}function oN(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function lN(){return navigator.maxTouchPoints||"ontouchstart"in this}function aN(n,l,s){var d=n.invertX(l[0][0])-s[0][0],f=n.invertX(l[1][0])-s[1][0],g=n.invertY(l[0][1])-s[0][1],p=n.invertY(l[1][1])-s[1][1];return n.translate(f>d?(d+f)/2:Math.min(0,d)||Math.max(0,f),p>g?(g+p)/2:Math.min(0,g)||Math.max(0,p))}function bx(){var n=iN,l=sN,s=aN,d=oN,f=lN,g=[0,1/0],p=[[-1/0,-1/0],[1/0,1/0]],y=250,w=VS,v=Fh("start","zoom","end"),S,_,R,D=500,B=150,H=0,$=10;function T(j){j.property("__zoom",nm).on("wheel.zoom",U,{passive:!1}).on("mousedown.zoom",Y).on("dblclick.zoom",re).filter(f).on("touchstart.zoom",se).on("touchmove.zoom",le).on("touchend.zoom touchcancel.zoom",ce).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}T.transform=function(j,q,X,te){var Q=j.selection?j.selection():j;Q.property("__zoom",nm),j!==Q?O(j,q,X,te):Q.interrupt().each(function(){F(this,arguments).event(te).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},T.scaleBy=function(j,q,X,te){T.scaleTo(j,function(){var Q=this.__zoom.k,C=typeof q=="function"?q.apply(this,arguments):q;return Q*C},X,te)},T.scaleTo=function(j,q,X,te){T.transform(j,function(){var Q=l.apply(this,arguments),C=this.__zoom,L=X==null?P(Q):typeof X=="function"?X.apply(this,arguments):X,A=C.invert(L),K=typeof q=="function"?q.apply(this,arguments):q;return s(M(N(C,K),L,A),Q,p)},X,te)},T.translateBy=function(j,q,X,te){T.transform(j,function(){return s(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof X=="function"?X.apply(this,arguments):X),l.apply(this,arguments),p)},null,te)},T.translateTo=function(j,q,X,te,Q){T.transform(j,function(){var C=l.apply(this,arguments),L=this.__zoom,A=te==null?P(C):typeof te=="function"?te.apply(this,arguments):te;return s(Bs.translate(A[0],A[1]).scale(L.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof X=="function"?-X.apply(this,arguments):-X),C,p)},te,Q)};function N(j,q){return q=Math.max(g[0],Math.min(g[1],q)),q===j.k?j:new Us(q,j.x,j.y)}function M(j,q,X){var te=q[0]-X[0]*j.k,Q=q[1]-X[1]*j.k;return te===j.x&&Q===j.y?j:new Us(j.k,te,Q)}function P(j){return[(+j[0][0]+ +j[1][0])/2,(+j[0][1]+ +j[1][1])/2]}function O(j,q,X,te){j.on("start.zoom",function(){F(this,arguments).event(te).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(te).end()}).tween("zoom",function(){var Q=this,C=arguments,L=F(Q,C).event(te),A=l.apply(Q,C),K=X==null?P(A):typeof X=="function"?X.apply(Q,C):X,pe=Math.max(A[1][0]-A[0][0],A[1][1]-A[0][1]),ge=Q.__zoom,ve=typeof q=="function"?q.apply(Q,C):q,Ce=w(ge.invert(K).concat(pe/ge.k),ve.invert(K).concat(pe/ve.k));return function(je){if(je===1)je=ve;else{var Pe=Ce(je),Te=pe/Pe[2];je=new Us(Te,K[0]-Pe[0]*Te,K[1]-Pe[1]*Te)}L.zoom(null,je)}})}function F(j,q,X){return!X&&j.__zooming||new b(j,q)}function b(j,q){this.that=j,this.args=q,this.active=0,this.sourceEvent=null,this.extent=l.apply(j,q),this.taps=0}b.prototype={event:function(j){return j&&(this.sourceEvent=j),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(j,q){return this.mouse&&j!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&j!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&j!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(j){var q=si(this.that).datum();v.call(j,this.that,new rN(j,{sourceEvent:this.sourceEvent,target:T,transform:this.that.__zoom,dispatch:v}),q)}};function U(j,...q){if(!n.apply(this,arguments))return;var X=F(this,q).event(j),te=this.__zoom,Q=Math.max(g[0],Math.min(g[1],te.k*Math.pow(2,d.apply(this,arguments)))),C=Ei(j);if(X.wheel)(X.mouse[0][0]!==C[0]||X.mouse[0][1]!==C[1])&&(X.mouse[1]=te.invert(X.mouse[0]=C)),clearTimeout(X.wheel);else{if(te.k===Q)return;X.mouse=[C,te.invert(C)],Nh(this),X.start()}dd(j),X.wheel=setTimeout(L,B),X.zoom("mouse",s(M(N(te,Q),X.mouse[0],X.mouse[1]),X.extent,p));function L(){X.wheel=null,X.end()}}function Y(j,...q){if(R||!n.apply(this,arguments))return;var X=j.currentTarget,te=F(this,q,!0).event(j),Q=si(j.view).on("mousemove.zoom",K,!0).on("mouseup.zoom",pe,!0),C=Ei(j,X),L=j.clientX,A=j.clientY;ux(j.view),sg(j),te.mouse=[C,this.__zoom.invert(C)],Nh(this),te.start();function K(ge){if(dd(ge),!te.moved){var ve=ge.clientX-L,Ce=ge.clientY-A;te.moved=ve*ve+Ce*Ce>H}te.event(ge).zoom("mouse",s(M(te.that.__zoom,te.mouse[0]=Ei(ge,X),te.mouse[1]),te.extent,p))}function pe(ge){Q.on("mousemove.zoom mouseup.zoom",null),cx(ge.view,te.moved),dd(ge),te.event(ge).end()}}function re(j,...q){if(n.apply(this,arguments)){var X=this.__zoom,te=Ei(j.changedTouches?j.changedTouches[0]:j,this),Q=X.invert(te),C=X.k*(j.shiftKey?.5:2),L=s(M(N(X,C),te,Q),l.apply(this,q),p);dd(j),y>0?si(this).transition().duration(y).call(O,L,te,j):si(this).call(T.transform,L,te,j)}}function se(j,...q){if(n.apply(this,arguments)){var X=j.touches,te=X.length,Q=F(this,q,j.changedTouches.length===te).event(j),C,L,A,K;for(sg(j),L=0;L<te;++L)A=X[L],K=Ei(A,this),K=[K,this.__zoom.invert(K),A.identifier],Q.touch0?!Q.touch1&&Q.touch0[2]!==K[2]&&(Q.touch1=K,Q.taps=0):(Q.touch0=K,C=!0,Q.taps=1+!!S);S&&(S=clearTimeout(S)),C&&(Q.taps<2&&(_=K[0],S=setTimeout(function(){S=null},D)),Nh(this),Q.start())}}function le(j,...q){if(this.__zooming){var X=F(this,q).event(j),te=j.changedTouches,Q=te.length,C,L,A,K;for(dd(j),C=0;C<Q;++C)L=te[C],A=Ei(L,this),X.touch0&&X.touch0[2]===L.identifier?X.touch0[0]=A:X.touch1&&X.touch1[2]===L.identifier&&(X.touch1[0]=A);if(L=X.that.__zoom,X.touch1){var pe=X.touch0[0],ge=X.touch0[1],ve=X.touch1[0],Ce=X.touch1[1],je=(je=ve[0]-pe[0])*je+(je=ve[1]-pe[1])*je,Pe=(Pe=Ce[0]-ge[0])*Pe+(Pe=Ce[1]-ge[1])*Pe;L=N(L,Math.sqrt(je/Pe)),A=[(pe[0]+ve[0])/2,(pe[1]+ve[1])/2],K=[(ge[0]+Ce[0])/2,(ge[1]+Ce[1])/2]}else if(X.touch0)A=X.touch0[0],K=X.touch0[1];else return;X.zoom("touch",s(M(L,A,K),X.extent,p))}}function ce(j,...q){if(this.__zooming){var X=F(this,q).event(j),te=j.changedTouches,Q=te.length,C,L;for(sg(j),R&&clearTimeout(R),R=setTimeout(function(){R=null},D),C=0;C<Q;++C)L=te[C],X.touch0&&X.touch0[2]===L.identifier?delete X.touch0:X.touch1&&X.touch1[2]===L.identifier&&delete X.touch1;if(X.touch1&&!X.touch0&&(X.touch0=X.touch1,delete X.touch1),X.touch0)X.touch0[1]=this.__zoom.invert(X.touch0[0]);else if(X.end(),X.taps===2&&(L=Ei(L,this),Math.hypot(_[0]-L[0],_[1]-L[1])<$)){var A=si(this).on("dblclick.zoom");A&&A.apply(this,arguments)}}}return T.wheelDelta=function(j){return arguments.length?(d=typeof j=="function"?j:dh(+j),T):d},T.filter=function(j){return arguments.length?(n=typeof j=="function"?j:dh(!!j),T):n},T.touchable=function(j){return arguments.length?(f=typeof j=="function"?j:dh(!!j),T):f},T.extent=function(j){return arguments.length?(l=typeof j=="function"?j:dh([[+j[0][0],+j[0][1]],[+j[1][0],+j[1][1]]]),T):l},T.scaleExtent=function(j){return arguments.length?(g[0]=+j[0],g[1]=+j[1],T):[g[0],g[1]]},T.translateExtent=function(j){return arguments.length?(p[0][0]=+j[0][0],p[1][0]=+j[1][0],p[0][1]=+j[0][1],p[1][1]=+j[1][1],T):[[p[0][0],p[0][1]],[p[1][0],p[1][1]]]},T.constrain=function(j){return arguments.length?(s=j,T):s},T.duration=function(j){return arguments.length?(y=+j,T):y},T.interpolate=function(j){return arguments.length?(w=j,T):w},T.on=function(){var j=v.on.apply(v,arguments);return j===v?T:j},T.clickDistance=function(j){return arguments.length?(H=(j=+j)*j,T):Math.sqrt(H)},T.tapDistance=function(j){return arguments.length?($=+j,T):$},T}Lh();const Wh=W.createContext(null),uN=Wh.Provider,Vs={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:n=>`Node type "${n}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:n=>`The old edge with id=${n} does not exist.`,error009:n=>`Marker type "${n}" doesn't exist.`,error008:(n,l)=>`Couldn't create edge for ${n?"target":"source"} handle id: "${n?l.targetHandle:l.sourceHandle}", edge id: ${l.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:n=>`Edge type "${n}" not found. Using fallback type "default".`,error012:n=>`Node with id "${n}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Ex=Vs.error001();function $t(n,l){const s=W.useContext(Wh);if(s===null)throw new Error(Ex);return Km(s,n,l)}const wn=()=>{const n=W.useContext(Wh);if(n===null)throw new Error(Ex);return W.useMemo(()=>({getState:n.getState,setState:n.setState,subscribe:n.subscribe,destroy:n.destroy}),[n])},cN=n=>n.userSelectionActive?"none":"all";function Ug({position:n,children:l,className:s,style:d,...f}){const g=$t(cN),p=`${n}`.split("-");return fe.createElement("div",{className:Fn(["react-flow__panel",s,...p]),style:{...d,pointerEvents:g},...f},l)}function dN({proOptions:n,position:l="bottom-right"}){return n!=null&&n.hideAttribution?null:fe.createElement(Ug,{position:l,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},fe.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const fN=({x:n,y:l,label:s,labelStyle:d={},labelShowBg:f=!0,labelBgStyle:g={},labelBgPadding:p=[2,4],labelBgBorderRadius:y=2,children:w,className:v,...S})=>{const _=W.useRef(null),[R,D]=W.useState({x:0,y:0,width:0,height:0}),B=Fn(["react-flow__edge-textwrapper",v]);return W.useEffect(()=>{if(_.current){const H=_.current.getBBox();D({x:H.x,y:H.y,width:H.width,height:H.height})}},[s]),typeof s>"u"||!s?null:fe.createElement("g",{transform:`translate(${n-R.width/2} ${l-R.height/2})`,className:B,visibility:R.width?"visible":"hidden",...S},f&&fe.createElement("rect",{width:R.width+2*p[0],x:-p[0],y:-p[1],height:R.height+2*p[1],className:"react-flow__edge-textbg",style:g,rx:y,ry:y}),fe.createElement("text",{className:"react-flow__edge-text",y:R.height/2,dy:"0.3em",ref:_,style:d},s),w)};var hN=W.memo(fN);const Bg=n=>({width:n.offsetWidth,height:n.offsetHeight}),Lu=(n,l=0,s=1)=>Math.min(Math.max(n,l),s),Wg=(n={x:0,y:0},l)=>({x:Lu(n.x,l[0][0],l[1][0]),y:Lu(n.y,l[0][1],l[1][1])}),rm=(n,l,s)=>n<l?Lu(Math.abs(n-l),1,50)/50:n>s?-Lu(Math.abs(n-s),1,50)/50:0,Cx=(n,l)=>{const s=rm(n.x,35,l.width-35)*20,d=rm(n.y,35,l.height-35)*20;return[s,d]},kx=n=>{var l;return((l=n.getRootNode)==null?void 0:l.call(n))||(window==null?void 0:window.document)},jx=(n,l)=>({x:Math.min(n.x,l.x),y:Math.min(n.y,l.y),x2:Math.max(n.x2,l.x2),y2:Math.max(n.y2,l.y2)}),Rd=({x:n,y:l,width:s,height:d})=>({x:n,y:l,x2:n+s,y2:l+d}),Tx=({x:n,y:l,x2:s,y2:d})=>({x:n,y:l,width:s-n,height:d-l}),im=n=>({...n.positionAbsolute||{x:0,y:0},width:n.width||0,height:n.height||0}),pN=(n,l)=>Tx(jx(Rd(n),Rd(l))),Cg=(n,l)=>{const s=Math.max(0,Math.min(n.x+n.width,l.x+l.width)-Math.max(n.x,l.x)),d=Math.max(0,Math.min(n.y+n.height,l.y+l.height)-Math.max(n.y,l.y));return Math.ceil(s*d)},gN=n=>oi(n.width)&&oi(n.height)&&oi(n.x)&&oi(n.y),oi=n=>!isNaN(n)&&isFinite(n),Zt=Symbol.for("internals"),Px=["Enter"," ","Escape"],mN=(n,l)=>{},xN=n=>"nativeEvent"in n;function kg(n){var f,g;const l=xN(n)?n.nativeEvent:n,s=((g=(f=l.composedPath)==null?void 0:f.call(l))==null?void 0:g[0])||n.target;return["INPUT","SELECT","TEXTAREA"].includes(s==null?void 0:s.nodeName)||(s==null?void 0:s.hasAttribute("contenteditable"))||!!(s!=null&&s.closest(".nokey"))}const Rx=n=>"clientX"in n,Fo=(n,l)=>{var g,p;const s=Rx(n),d=s?n.clientX:(g=n.touches)==null?void 0:g[0].clientX,f=s?n.clientY:(p=n.touches)==null?void 0:p[0].clientY;return{x:d-((l==null?void 0:l.left)??0),y:f-((l==null?void 0:l.top)??0)}},zh=()=>{var n;return typeof navigator<"u"&&((n=navigator==null?void 0:navigator.userAgent)==null?void 0:n.indexOf("Mac"))>=0},Od=({id:n,path:l,labelX:s,labelY:d,label:f,labelStyle:g,labelShowBg:p,labelBgStyle:y,labelBgPadding:w,labelBgBorderRadius:v,style:S,markerEnd:_,markerStart:R,interactionWidth:D=20})=>fe.createElement(fe.Fragment,null,fe.createElement("path",{id:n,style:S,d:l,fill:"none",className:"react-flow__edge-path",markerEnd:_,markerStart:R}),D&&fe.createElement("path",{d:l,fill:"none",strokeOpacity:0,strokeWidth:D,className:"react-flow__edge-interaction"}),f&&oi(s)&&oi(d)?fe.createElement(hN,{x:s,y:d,label:f,labelStyle:g,labelShowBg:p,labelBgStyle:y,labelBgPadding:w,labelBgBorderRadius:v}):null);Od.displayName="BaseEdge";function fd(n,l,s){return s===void 0?s:d=>{const f=l().edges.find(g=>g.id===n);f&&s(d,{...f})}}function Ax({sourceX:n,sourceY:l,targetX:s,targetY:d}){const f=Math.abs(s-n)/2,g=s<n?s+f:s-f,p=Math.abs(d-l)/2,y=d<l?d+p:d-p;return[g,y,f,p]}function Mx({sourceX:n,sourceY:l,targetX:s,targetY:d,sourceControlX:f,sourceControlY:g,targetControlX:p,targetControlY:y}){const w=n*.125+f*.375+p*.375+s*.125,v=l*.125+g*.375+y*.375+d*.125,S=Math.abs(w-n),_=Math.abs(v-l);return[w,v,S,_]}var Xl;(function(n){n.Strict="strict",n.Loose="loose"})(Xl||(Xl={}));var Wl;(function(n){n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal"})(Wl||(Wl={}));var Ad;(function(n){n.Partial="partial",n.Full="full"})(Ad||(Ad={}));var Lo;(function(n){n.Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier"})(Lo||(Lo={}));var Oh;(function(n){n.Arrow="arrow",n.ArrowClosed="arrowclosed"})(Oh||(Oh={}));var Be;(function(n){n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom"})(Be||(Be={}));function sm({pos:n,x1:l,y1:s,x2:d,y2:f}){return n===Be.Left||n===Be.Right?[.5*(l+d),s]:[l,.5*(s+f)]}function Dx({sourceX:n,sourceY:l,sourcePosition:s=Be.Bottom,targetX:d,targetY:f,targetPosition:g=Be.Top}){const[p,y]=sm({pos:s,x1:n,y1:l,x2:d,y2:f}),[w,v]=sm({pos:g,x1:d,y1:f,x2:n,y2:l}),[S,_,R,D]=Mx({sourceX:n,sourceY:l,targetX:d,targetY:f,sourceControlX:p,sourceControlY:y,targetControlX:w,targetControlY:v});return[`M${n},${l} C${p},${y} ${w},${v} ${d},${f}`,S,_,R,D]}const Vg=W.memo(({sourceX:n,sourceY:l,targetX:s,targetY:d,sourcePosition:f=Be.Bottom,targetPosition:g=Be.Top,label:p,labelStyle:y,labelShowBg:w,labelBgStyle:v,labelBgPadding:S,labelBgBorderRadius:_,style:R,markerEnd:D,markerStart:B,interactionWidth:H})=>{const[$,T,N]=Dx({sourceX:n,sourceY:l,sourcePosition:f,targetX:s,targetY:d,targetPosition:g});return fe.createElement(Od,{path:$,labelX:T,labelY:N,label:p,labelStyle:y,labelShowBg:w,labelBgStyle:v,labelBgPadding:S,labelBgBorderRadius:_,style:R,markerEnd:D,markerStart:B,interactionWidth:H})});Vg.displayName="SimpleBezierEdge";const om={[Be.Left]:{x:-1,y:0},[Be.Right]:{x:1,y:0},[Be.Top]:{x:0,y:-1},[Be.Bottom]:{x:0,y:1}},yN=({source:n,sourcePosition:l=Be.Bottom,target:s})=>l===Be.Left||l===Be.Right?n.x<s.x?{x:1,y:0}:{x:-1,y:0}:n.y<s.y?{x:0,y:1}:{x:0,y:-1},lm=(n,l)=>Math.sqrt(Math.pow(l.x-n.x,2)+Math.pow(l.y-n.y,2));function vN({source:n,sourcePosition:l=Be.Bottom,target:s,targetPosition:d=Be.Top,center:f,offset:g}){const p=om[l],y=om[d],w={x:n.x+p.x*g,y:n.y+p.y*g},v={x:s.x+y.x*g,y:s.y+y.y*g},S=yN({source:w,sourcePosition:l,target:v}),_=S.x!==0?"x":"y",R=S[_];let D=[],B,H;const $={x:0,y:0},T={x:0,y:0},[N,M,P,O]=Ax({sourceX:n.x,sourceY:n.y,targetX:s.x,targetY:s.y});if(p[_]*y[_]===-1){B=f.x??N,H=f.y??M;const b=[{x:B,y:w.y},{x:B,y:v.y}],U=[{x:w.x,y:H},{x:v.x,y:H}];p[_]===R?D=_==="x"?b:U:D=_==="x"?U:b}else{const b=[{x:w.x,y:v.y}],U=[{x:v.x,y:w.y}];if(_==="x"?D=p.x===R?U:b:D=p.y===R?b:U,l===d){const ce=Math.abs(n[_]-s[_]);if(ce<=g){const j=Math.min(g-1,g-ce);p[_]===R?$[_]=(w[_]>n[_]?-1:1)*j:T[_]=(v[_]>s[_]?-1:1)*j}}if(l!==d){const ce=_==="x"?"y":"x",j=p[_]===y[ce],q=w[ce]>v[ce],X=w[ce]<v[ce];(p[_]===1&&(!j&&q||j&&X)||p[_]!==1&&(!j&&X||j&&q))&&(D=_==="x"?b:U)}const Y={x:w.x+$.x,y:w.y+$.y},re={x:v.x+T.x,y:v.y+T.y},se=Math.max(Math.abs(Y.x-D[0].x),Math.abs(re.x-D[0].x)),le=Math.max(Math.abs(Y.y-D[0].y),Math.abs(re.y-D[0].y));se>=le?(B=(Y.x+re.x)/2,H=D[0].y):(B=D[0].x,H=(Y.y+re.y)/2)}return[[n,{x:w.x+$.x,y:w.y+$.y},...D,{x:v.x+T.x,y:v.y+T.y},s],B,H,P,O]}function wN(n,l,s,d){const f=Math.min(lm(n,l)/2,lm(l,s)/2,d),{x:g,y:p}=l;if(n.x===g&&g===s.x||n.y===p&&p===s.y)return`L${g} ${p}`;if(n.y===p){const v=n.x<s.x?-1:1,S=n.y<s.y?1:-1;return`L ${g+f*v},${p}Q ${g},${p} ${g},${p+f*S}`}const y=n.x<s.x?1:-1,w=n.y<s.y?-1:1;return`L ${g},${p+f*w}Q ${g},${p} ${g+f*y},${p}`}function jg({sourceX:n,sourceY:l,sourcePosition:s=Be.Bottom,targetX:d,targetY:f,targetPosition:g=Be.Top,borderRadius:p=5,centerX:y,centerY:w,offset:v=20}){const[S,_,R,D,B]=vN({source:{x:n,y:l},sourcePosition:s,target:{x:d,y:f},targetPosition:g,center:{x:y,y:w},offset:v});return[S.reduce(($,T,N)=>{let M="";return N>0&&N<S.length-1?M=wN(S[N-1],T,S[N+1],p):M=`${N===0?"M":"L"}${T.x} ${T.y}`,$+=M,$},""),_,R,D,B]}const Vh=W.memo(({sourceX:n,sourceY:l,targetX:s,targetY:d,label:f,labelStyle:g,labelShowBg:p,labelBgStyle:y,labelBgPadding:w,labelBgBorderRadius:v,style:S,sourcePosition:_=Be.Bottom,targetPosition:R=Be.Top,markerEnd:D,markerStart:B,pathOptions:H,interactionWidth:$})=>{const[T,N,M]=jg({sourceX:n,sourceY:l,sourcePosition:_,targetX:s,targetY:d,targetPosition:R,borderRadius:H==null?void 0:H.borderRadius,offset:H==null?void 0:H.offset});return fe.createElement(Od,{path:T,labelX:N,labelY:M,label:f,labelStyle:g,labelShowBg:p,labelBgStyle:y,labelBgPadding:w,labelBgBorderRadius:v,style:S,markerEnd:D,markerStart:B,interactionWidth:$})});Vh.displayName="SmoothStepEdge";const Yg=W.memo(n=>{var l;return fe.createElement(Vh,{...n,pathOptions:W.useMemo(()=>{var s;return{borderRadius:0,offset:(s=n.pathOptions)==null?void 0:s.offset}},[(l=n.pathOptions)==null?void 0:l.offset])})});Yg.displayName="StepEdge";function SN({sourceX:n,sourceY:l,targetX:s,targetY:d}){const[f,g,p,y]=Ax({sourceX:n,sourceY:l,targetX:s,targetY:d});return[`M ${n},${l}L ${s},${d}`,f,g,p,y]}const qg=W.memo(({sourceX:n,sourceY:l,targetX:s,targetY:d,label:f,labelStyle:g,labelShowBg:p,labelBgStyle:y,labelBgPadding:w,labelBgBorderRadius:v,style:S,markerEnd:_,markerStart:R,interactionWidth:D})=>{const[B,H,$]=SN({sourceX:n,sourceY:l,targetX:s,targetY:d});return fe.createElement(Od,{path:B,labelX:H,labelY:$,label:f,labelStyle:g,labelShowBg:p,labelBgStyle:y,labelBgPadding:w,labelBgBorderRadius:v,style:S,markerEnd:_,markerStart:R,interactionWidth:D})});qg.displayName="StraightEdge";function fh(n,l){return n>=0?.5*n:l*25*Math.sqrt(-n)}function am({pos:n,x1:l,y1:s,x2:d,y2:f,c:g}){switch(n){case Be.Left:return[l-fh(l-d,g),s];case Be.Right:return[l+fh(d-l,g),s];case Be.Top:return[l,s-fh(s-f,g)];case Be.Bottom:return[l,s+fh(f-s,g)]}}function Gg({sourceX:n,sourceY:l,sourcePosition:s=Be.Bottom,targetX:d,targetY:f,targetPosition:g=Be.Top,curvature:p=.25}){const[y,w]=am({pos:s,x1:n,y1:l,x2:d,y2:f,c:p}),[v,S]=am({pos:g,x1:d,y1:f,x2:n,y2:l,c:p}),[_,R,D,B]=Mx({sourceX:n,sourceY:l,targetX:d,targetY:f,sourceControlX:y,sourceControlY:w,targetControlX:v,targetControlY:S});return[`M${n},${l} C${y},${w} ${v},${S} ${d},${f}`,_,R,D,B]}const Ih=W.memo(({sourceX:n,sourceY:l,targetX:s,targetY:d,sourcePosition:f=Be.Bottom,targetPosition:g=Be.Top,label:p,labelStyle:y,labelShowBg:w,labelBgStyle:v,labelBgPadding:S,labelBgBorderRadius:_,style:R,markerEnd:D,markerStart:B,pathOptions:H,interactionWidth:$})=>{const[T,N,M]=Gg({sourceX:n,sourceY:l,sourcePosition:f,targetX:s,targetY:d,targetPosition:g,curvature:H==null?void 0:H.curvature});return fe.createElement(Od,{path:T,labelX:N,labelY:M,label:p,labelStyle:y,labelShowBg:w,labelBgStyle:v,labelBgPadding:S,labelBgBorderRadius:_,style:R,markerEnd:D,markerStart:B,interactionWidth:$})});Ih.displayName="BezierEdge";const Xg=W.createContext(null),_N=Xg.Provider;Xg.Consumer;const NN=()=>W.useContext(Xg),bN=n=>"id"in n&&"source"in n&&"target"in n,EN=({source:n,sourceHandle:l,target:s,targetHandle:d})=>`reactflow__edge-${n}${l||""}-${s}${d||""}`,Tg=(n,l)=>typeof n>"u"?"":typeof n=="string"?n:`${l?`${l}__`:""}${Object.keys(n).sort().map(d=>`${d}=${n[d]}`).join("&")}`,CN=(n,l)=>l.some(s=>s.source===n.source&&s.target===n.target&&(s.sourceHandle===n.sourceHandle||!s.sourceHandle&&!n.sourceHandle)&&(s.targetHandle===n.targetHandle||!s.targetHandle&&!n.targetHandle)),kN=(n,l)=>{if(!n.source||!n.target)return l;let s;return bN(n)?s={...n}:s={...n,id:EN(n)},CN(s,l)?l:l.concat(s)},Pg=({x:n,y:l},[s,d,f],g,[p,y])=>{const w={x:(n-s)/f,y:(l-d)/f};return g?{x:p*Math.round(w.x/p),y:y*Math.round(w.y/y)}:w},zx=({x:n,y:l},[s,d,f])=>({x:n*f+s,y:l*f+d}),Yl=(n,l=[0,0])=>{if(!n)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const s=(n.width??0)*l[0],d=(n.height??0)*l[1],f={x:n.position.x-s,y:n.position.y-d};return{...f,positionAbsolute:n.positionAbsolute?{x:n.positionAbsolute.x-s,y:n.positionAbsolute.y-d}:f}},Yh=(n,l=[0,0])=>{if(n.length===0)return{x:0,y:0,width:0,height:0};const s=n.reduce((d,f)=>{const{x:g,y:p}=Yl(f,l).positionAbsolute;return jx(d,Rd({x:g,y:p,width:f.width||0,height:f.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Tx(s)},Ox=(n,l,[s,d,f]=[0,0,1],g=!1,p=!1,y=[0,0])=>{const w={x:(l.x-s)/f,y:(l.y-d)/f,width:l.width/f,height:l.height/f},v=[];return n.forEach(S=>{const{width:_,height:R,selectable:D=!0,hidden:B=!1}=S;if(p&&!D||B)return!1;const{positionAbsolute:H}=Yl(S,y),$={x:H.x,y:H.y,width:_||0,height:R||0},T=Cg(w,$),N=typeof _>"u"||typeof R>"u"||_===null||R===null,M=g&&T>0,P=(_||0)*(R||0);(N||M||T>=P||S.dragging)&&v.push(S)}),v},Ix=(n,l)=>{const s=n.map(d=>d.id);return l.filter(d=>s.includes(d.source)||s.includes(d.target))},$x=(n,l,s,d,f,g=.1)=>{const p=l/(n.width*(1+g)),y=s/(n.height*(1+g)),w=Math.min(p,y),v=Lu(w,d,f),S=n.x+n.width/2,_=n.y+n.height/2,R=l/2-S*v,D=s/2-_*v;return{x:R,y:D,zoom:v}},Ul=(n,l=0)=>n.transition().duration(l);function um(n,l,s,d){return(l[s]||[]).reduce((f,g)=>{var p,y;return`${n.id}-${g.id}-${s}`!==d&&f.push({id:g.id||null,type:s,nodeId:n.id,x:(((p=n.positionAbsolute)==null?void 0:p.x)??0)+g.x+g.width/2,y:(((y=n.positionAbsolute)==null?void 0:y.y)??0)+g.y+g.height/2}),f},[])}function jN(n,l,s,d,f,g){const{x:p,y}=Fo(n),v=l.elementsFromPoint(p,y).find(B=>B.classList.contains("react-flow__handle"));if(v){const B=v.getAttribute("data-nodeid");if(B){const H=Kg(void 0,v),$=v.getAttribute("data-handleid"),T=g({nodeId:B,id:$,type:H});if(T){const N=f.find(M=>M.nodeId===B&&M.type===H&&M.id===$);return{handle:{id:$,type:H,nodeId:B,x:(N==null?void 0:N.x)||s.x,y:(N==null?void 0:N.y)||s.y},validHandleResult:T}}}}let S=[],_=1/0;if(f.forEach(B=>{const H=Math.sqrt((B.x-s.x)**2+(B.y-s.y)**2);if(H<=d){const $=g(B);H<=_&&(H<_?S=[{handle:B,validHandleResult:$}]:H===_&&S.push({handle:B,validHandleResult:$}),_=H)}}),!S.length)return{handle:null,validHandleResult:Lx()};if(S.length===1)return S[0];const R=S.some(({validHandleResult:B})=>B.isValid),D=S.some(({handle:B})=>B.type==="target");return S.find(({handle:B,validHandleResult:H})=>D?B.type==="target":R?H.isValid:!0)||S[0]}const TN={source:null,target:null,sourceHandle:null,targetHandle:null},Lx=()=>({handleDomNode:null,isValid:!1,connection:TN,endHandle:null});function Fx(n,l,s,d,f,g,p){const y=f==="target",w=p.querySelector(`.react-flow__handle[data-id="${n==null?void 0:n.nodeId}-${n==null?void 0:n.id}-${n==null?void 0:n.type}"]`),v={...Lx(),handleDomNode:w};if(w){const S=Kg(void 0,w),_=w.getAttribute("data-nodeid"),R=w.getAttribute("data-handleid"),D=w.classList.contains("connectable"),B=w.classList.contains("connectableend"),H={source:y?_:s,sourceHandle:y?R:d,target:y?s:_,targetHandle:y?d:R};v.connection=H,D&&B&&(l===Xl.Strict?y&&S==="source"||!y&&S==="target":_!==s||R!==d)&&(v.endHandle={nodeId:_,handleId:R,type:S},v.isValid=g(H))}return v}function PN({nodes:n,nodeId:l,handleId:s,handleType:d}){return n.reduce((f,g)=>{if(g[Zt]){const{handleBounds:p}=g[Zt];let y=[],w=[];p&&(y=um(g,p,"source",`${l}-${s}-${d}`),w=um(g,p,"target",`${l}-${s}-${d}`)),f.push(...y,...w)}return f},[])}function Kg(n,l){return n||(l!=null&&l.classList.contains("target")?"target":l!=null&&l.classList.contains("source")?"source":null)}function og(n){n==null||n.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function RN(n,l){let s=null;return l?s="valid":n&&!l&&(s="invalid"),s}function Hx({event:n,handleId:l,nodeId:s,onConnect:d,isTarget:f,getState:g,setState:p,isValidConnection:y,edgeUpdaterType:w,onReconnectEnd:v}){const S=kx(n.target),{connectionMode:_,domNode:R,autoPanOnConnect:D,connectionRadius:B,onConnectStart:H,panBy:$,getNodes:T,cancelConnection:N}=g();let M=0,P;const{x:O,y:F}=Fo(n),b=S==null?void 0:S.elementFromPoint(O,F),U=Kg(w,b),Y=R==null?void 0:R.getBoundingClientRect();if(!Y||!U)return;let re,se=Fo(n,Y),le=!1,ce=null,j=!1,q=null;const X=PN({nodes:T(),nodeId:s,handleId:l,handleType:U}),te=()=>{if(!D)return;const[L,A]=Cx(se,Y);$({x:L,y:A}),M=requestAnimationFrame(te)};p({connectionPosition:se,connectionStatus:null,connectionNodeId:s,connectionHandleId:l,connectionHandleType:U,connectionStartHandle:{nodeId:s,handleId:l,type:U},connectionEndHandle:null}),H==null||H(n,{nodeId:s,handleId:l,handleType:U});function Q(L){const{transform:A}=g();se=Fo(L,Y);const{handle:K,validHandleResult:pe}=jN(L,S,Pg(se,A,!1,[1,1]),B,X,ge=>Fx(ge,_,s,l,f?"target":"source",y,S));if(P=K,le||(te(),le=!0),q=pe.handleDomNode,ce=pe.connection,j=pe.isValid,p({connectionPosition:P&&j?zx({x:P.x,y:P.y},A):se,connectionStatus:RN(!!P,j),connectionEndHandle:pe.endHandle}),!P&&!j&&!q)return og(re);ce.source!==ce.target&&q&&(og(re),re=q,q.classList.add("connecting","react-flow__handle-connecting"),q.classList.toggle("valid",j),q.classList.toggle("react-flow__handle-valid",j))}function C(L){var A,K;(P||q)&&ce&&j&&(d==null||d(ce)),(K=(A=g()).onConnectEnd)==null||K.call(A,L),w&&(v==null||v(L)),og(re),N(),cancelAnimationFrame(M),le=!1,j=!1,ce=null,q=null,S.removeEventListener("mousemove",Q),S.removeEventListener("mouseup",C),S.removeEventListener("touchmove",Q),S.removeEventListener("touchend",C)}S.addEventListener("mousemove",Q),S.addEventListener("mouseup",C),S.addEventListener("touchmove",Q),S.addEventListener("touchend",C)}const cm=()=>!0,AN=n=>({connectionStartHandle:n.connectionStartHandle,connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName}),MN=(n,l,s)=>d=>{const{connectionStartHandle:f,connectionEndHandle:g,connectionClickStartHandle:p}=d;return{connecting:(f==null?void 0:f.nodeId)===n&&(f==null?void 0:f.handleId)===l&&(f==null?void 0:f.type)===s||(g==null?void 0:g.nodeId)===n&&(g==null?void 0:g.handleId)===l&&(g==null?void 0:g.type)===s,clickConnecting:(p==null?void 0:p.nodeId)===n&&(p==null?void 0:p.handleId)===l&&(p==null?void 0:p.type)===s}},Ux=W.forwardRef(({type:n="source",position:l=Be.Top,isValidConnection:s,isConnectable:d=!0,isConnectableStart:f=!0,isConnectableEnd:g=!0,id:p,onConnect:y,children:w,className:v,onMouseDown:S,onTouchStart:_,...R},D)=>{var Y,re;const B=p||null,H=n==="target",$=wn(),T=NN(),{connectOnClick:N,noPanClassName:M}=$t(AN,Pn),{connecting:P,clickConnecting:O}=$t(MN(T,B,n),Pn);T||(re=(Y=$.getState()).onError)==null||re.call(Y,"010",Vs.error010());const F=se=>{const{defaultEdgeOptions:le,onConnect:ce,hasDefaultEdges:j}=$.getState(),q={...le,...se};if(j){const{edges:X,setEdges:te}=$.getState();te(kN(q,X))}ce==null||ce(q),y==null||y(q)},b=se=>{if(!T)return;const le=Rx(se);f&&(le&&se.button===0||!le)&&Hx({event:se,handleId:B,nodeId:T,onConnect:F,isTarget:H,getState:$.getState,setState:$.setState,isValidConnection:s||$.getState().isValidConnection||cm}),le?S==null||S(se):_==null||_(se)},U=se=>{const{onClickConnectStart:le,onClickConnectEnd:ce,connectionClickStartHandle:j,connectionMode:q,isValidConnection:X}=$.getState();if(!T||!j&&!f)return;if(!j){le==null||le(se,{nodeId:T,handleId:B,handleType:n}),$.setState({connectionClickStartHandle:{nodeId:T,type:n,handleId:B}});return}const te=kx(se.target),Q=s||X||cm,{connection:C,isValid:L}=Fx({nodeId:T,id:B,type:n},q,j.nodeId,j.handleId||null,j.type,Q,te);L&&F(C),ce==null||ce(se),$.setState({connectionClickStartHandle:null})};return fe.createElement("div",{"data-handleid":B,"data-nodeid":T,"data-handlepos":l,"data-id":`${T}-${B}-${n}`,className:Fn(["react-flow__handle",`react-flow__handle-${l}`,"nodrag",M,v,{source:!H,target:H,connectable:d,connectablestart:f,connectableend:g,connecting:O,connectionindicator:d&&(f&&!P||g&&P)}]),onMouseDown:b,onTouchStart:b,onClick:N?U:void 0,ref:D,...R},w)});Ux.displayName="Handle";var $h=W.memo(Ux);const Bx=({data:n,isConnectable:l,targetPosition:s=Be.Top,sourcePosition:d=Be.Bottom})=>fe.createElement(fe.Fragment,null,fe.createElement($h,{type:"target",position:s,isConnectable:l}),n==null?void 0:n.label,fe.createElement($h,{type:"source",position:d,isConnectable:l}));Bx.displayName="DefaultNode";var Rg=W.memo(Bx);const Wx=({data:n,isConnectable:l,sourcePosition:s=Be.Bottom})=>fe.createElement(fe.Fragment,null,n==null?void 0:n.label,fe.createElement($h,{type:"source",position:s,isConnectable:l}));Wx.displayName="InputNode";var Vx=W.memo(Wx);const Yx=({data:n,isConnectable:l,targetPosition:s=Be.Top})=>fe.createElement(fe.Fragment,null,fe.createElement($h,{type:"target",position:s,isConnectable:l}),n==null?void 0:n.label);Yx.displayName="OutputNode";var qx=W.memo(Yx);const Zg=()=>null;Zg.displayName="GroupNode";const DN=n=>({selectedNodes:n.getNodes().filter(l=>l.selected),selectedEdges:n.edges.filter(l=>l.selected).map(l=>({...l}))}),hh=n=>n.id;function zN(n,l){return Pn(n.selectedNodes.map(hh),l.selectedNodes.map(hh))&&Pn(n.selectedEdges.map(hh),l.selectedEdges.map(hh))}const Gx=W.memo(({onSelectionChange:n})=>{const l=wn(),{selectedNodes:s,selectedEdges:d}=$t(DN,zN);return W.useEffect(()=>{const f={nodes:s,edges:d};n==null||n(f),l.getState().onSelectionChange.forEach(g=>g(f))},[s,d,n]),null});Gx.displayName="SelectionListener";const ON=n=>!!n.onSelectionChange;function IN({onSelectionChange:n}){const l=$t(ON);return n||l?fe.createElement(Gx,{onSelectionChange:n}):null}const $N=n=>({setNodes:n.setNodes,setEdges:n.setEdges,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset});function ju(n,l){W.useEffect(()=>{typeof n<"u"&&l(n)},[n])}function at(n,l,s){W.useEffect(()=>{typeof l<"u"&&s({[n]:l})},[l])}const LN=({nodes:n,edges:l,defaultNodes:s,defaultEdges:d,onConnect:f,onConnectStart:g,onConnectEnd:p,onClickConnectStart:y,onClickConnectEnd:w,nodesDraggable:v,nodesConnectable:S,nodesFocusable:_,edgesFocusable:R,edgesUpdatable:D,elevateNodesOnSelect:B,minZoom:H,maxZoom:$,nodeExtent:T,onNodesChange:N,onEdgesChange:M,elementsSelectable:P,connectionMode:O,snapGrid:F,snapToGrid:b,translateExtent:U,connectOnClick:Y,defaultEdgeOptions:re,fitView:se,fitViewOptions:le,onNodesDelete:ce,onEdgesDelete:j,onNodeDrag:q,onNodeDragStart:X,onNodeDragStop:te,onSelectionDrag:Q,onSelectionDragStart:C,onSelectionDragStop:L,noPanClassName:A,nodeOrigin:K,rfId:pe,autoPanOnConnect:ge,autoPanOnNodeDrag:ve,onError:Ce,connectionRadius:je,isValidConnection:Pe,nodeDragThreshold:Te})=>{const{setNodes:We,setEdges:ft,setDefaultNodesAndEdges:St,setMinZoom:Pt,setMaxZoom:ot,setTranslateExtent:ct,setNodeExtent:Lt,reset:Ze}=$t($N,Pn),Oe=wn();return W.useEffect(()=>{const Ft=d==null?void 0:d.map(Dt=>({...Dt,...re}));return St(s,Ft),()=>{Ze()}},[]),at("defaultEdgeOptions",re,Oe.setState),at("connectionMode",O,Oe.setState),at("onConnect",f,Oe.setState),at("onConnectStart",g,Oe.setState),at("onConnectEnd",p,Oe.setState),at("onClickConnectStart",y,Oe.setState),at("onClickConnectEnd",w,Oe.setState),at("nodesDraggable",v,Oe.setState),at("nodesConnectable",S,Oe.setState),at("nodesFocusable",_,Oe.setState),at("edgesFocusable",R,Oe.setState),at("edgesUpdatable",D,Oe.setState),at("elementsSelectable",P,Oe.setState),at("elevateNodesOnSelect",B,Oe.setState),at("snapToGrid",b,Oe.setState),at("snapGrid",F,Oe.setState),at("onNodesChange",N,Oe.setState),at("onEdgesChange",M,Oe.setState),at("connectOnClick",Y,Oe.setState),at("fitViewOnInit",se,Oe.setState),at("fitViewOnInitOptions",le,Oe.setState),at("onNodesDelete",ce,Oe.setState),at("onEdgesDelete",j,Oe.setState),at("onNodeDrag",q,Oe.setState),at("onNodeDragStart",X,Oe.setState),at("onNodeDragStop",te,Oe.setState),at("onSelectionDrag",Q,Oe.setState),at("onSelectionDragStart",C,Oe.setState),at("onSelectionDragStop",L,Oe.setState),at("noPanClassName",A,Oe.setState),at("nodeOrigin",K,Oe.setState),at("rfId",pe,Oe.setState),at("autoPanOnConnect",ge,Oe.setState),at("autoPanOnNodeDrag",ve,Oe.setState),at("onError",Ce,Oe.setState),at("connectionRadius",je,Oe.setState),at("isValidConnection",Pe,Oe.setState),at("nodeDragThreshold",Te,Oe.setState),ju(n,We),ju(l,ft),ju(H,Pt),ju($,ot),ju(U,ct),ju(T,Lt),null},dm={display:"none"},FN={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Xx="react-flow__node-desc",Kx="react-flow__edge-desc",HN="react-flow__aria-live",UN=n=>n.ariaLiveMessage;function BN({rfId:n}){const l=$t(UN);return fe.createElement("div",{id:`${HN}-${n}`,"aria-live":"assertive","aria-atomic":"true",style:FN},l)}function WN({rfId:n,disableKeyboardA11y:l}){return fe.createElement(fe.Fragment,null,fe.createElement("div",{id:`${Xx}-${n}`,style:dm},"Press enter or space to select a node.",!l&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),fe.createElement("div",{id:`${Kx}-${n}`,style:dm},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!l&&fe.createElement(BN,{rfId:n}))}var Md=(n=null,l={actInsideInputWithModifier:!0})=>{const[s,d]=W.useState(!1),f=W.useRef(!1),g=W.useRef(new Set([])),[p,y]=W.useMemo(()=>{if(n!==null){const v=(Array.isArray(n)?n:[n]).filter(_=>typeof _=="string").map(_=>_.split("+")),S=v.reduce((_,R)=>_.concat(...R),[]);return[v,S]}return[[],[]]},[n]);return W.useEffect(()=>{const w=typeof document<"u"?document:null,v=(l==null?void 0:l.target)||w;if(n!==null){const S=D=>{if(f.current=D.ctrlKey||D.metaKey||D.shiftKey,(!f.current||f.current&&!l.actInsideInputWithModifier)&&kg(D))return!1;const H=hm(D.code,y);g.current.add(D[H]),fm(p,g.current,!1)&&(D.preventDefault(),d(!0))},_=D=>{if((!f.current||f.current&&!l.actInsideInputWithModifier)&&kg(D))return!1;const H=hm(D.code,y);fm(p,g.current,!0)?(d(!1),g.current.clear()):g.current.delete(D[H]),D.key==="Meta"&&g.current.clear(),f.current=!1},R=()=>{g.current.clear(),d(!1)};return v==null||v.addEventListener("keydown",S),v==null||v.addEventListener("keyup",_),window.addEventListener("blur",R),()=>{v==null||v.removeEventListener("keydown",S),v==null||v.removeEventListener("keyup",_),window.removeEventListener("blur",R)}}},[n,d]),s};function fm(n,l,s){return n.filter(d=>s||d.length===l.size).some(d=>d.every(f=>l.has(f)))}function hm(n,l){return l.includes(n)?"code":"key"}function Zx(n,l,s,d){var y,w;const f=n.parentNode||n.parentId;if(!f)return s;const g=l.get(f),p=Yl(g,d);return Zx(g,l,{x:(s.x??0)+p.x,y:(s.y??0)+p.y,z:(((y=g[Zt])==null?void 0:y.z)??0)>(s.z??0)?((w=g[Zt])==null?void 0:w.z)??0:s.z??0},d)}function Qx(n,l,s){n.forEach(d=>{var g;const f=d.parentNode||d.parentId;if(f&&!n.has(f))throw new Error(`Parent node ${f} not found`);if(f||s!=null&&s[d.id]){const{x:p,y,z:w}=Zx(d,n,{...d.position,z:((g=d[Zt])==null?void 0:g.z)??0},l);d.positionAbsolute={x:p,y},d[Zt].z=w,s!=null&&s[d.id]&&(d[Zt].isParent=!0)}})}function lg(n,l,s,d){const f=new Map,g={},p=d?1e3:0;return n.forEach(y=>{var D;const w=(oi(y.zIndex)?y.zIndex:0)+(y.selected?p:0),v=l.get(y.id),S={...y,positionAbsolute:{x:y.position.x,y:y.position.y}},_=y.parentNode||y.parentId;_&&(g[_]=!0);const R=(v==null?void 0:v.type)&&(v==null?void 0:v.type)!==y.type;Object.defineProperty(S,Zt,{enumerable:!1,value:{handleBounds:R||(D=v==null?void 0:v[Zt])==null?void 0:D.handleBounds,z:w}}),f.set(y.id,S)}),Qx(f,s,g),f}function Jx(n,l={}){const{getNodes:s,width:d,height:f,minZoom:g,maxZoom:p,d3Zoom:y,d3Selection:w,fitViewOnInitDone:v,fitViewOnInit:S,nodeOrigin:_}=n(),R=l.initial&&!v&&S;if(y&&w&&(R||!l.initial)){const B=s().filter($=>{var N;const T=l.includeHiddenNodes?$.width&&$.height:!$.hidden;return(N=l.nodes)!=null&&N.length?T&&l.nodes.some(M=>M.id===$.id):T}),H=B.every($=>$.width&&$.height);if(B.length>0&&H){const $=Yh(B,_),{x:T,y:N,zoom:M}=$x($,d,f,l.minZoom??g,l.maxZoom??p,l.padding??.1),P=Bs.translate(T,N).scale(M);return typeof l.duration=="number"&&l.duration>0?y.transform(Ul(w,l.duration),P):y.transform(w,P),!0}}return!1}function VN(n,l){return n.forEach(s=>{const d=l.get(s.id);d&&l.set(d.id,{...d,[Zt]:d[Zt],selected:s.selected})}),new Map(l)}function YN(n,l){return l.map(s=>{const d=n.find(f=>f.id===s.id);return d&&(s.selected=d.selected),s})}function ph({changedNodes:n,changedEdges:l,get:s,set:d}){const{nodeInternals:f,edges:g,onNodesChange:p,onEdgesChange:y,hasDefaultNodes:w,hasDefaultEdges:v}=s();n!=null&&n.length&&(w&&d({nodeInternals:VN(n,f)}),p==null||p(n)),l!=null&&l.length&&(v&&d({edges:YN(l,g)}),y==null||y(l))}const Tu=()=>{},qN={zoomIn:Tu,zoomOut:Tu,zoomTo:Tu,getZoom:()=>1,setViewport:Tu,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Tu,fitBounds:Tu,project:n=>n,screenToFlowPosition:n=>n,flowToScreenPosition:n=>n,viewportInitialized:!1},GN=n=>({d3Zoom:n.d3Zoom,d3Selection:n.d3Selection}),XN=()=>{const n=wn(),{d3Zoom:l,d3Selection:s}=$t(GN,Pn);return W.useMemo(()=>s&&l?{zoomIn:f=>l.scaleBy(Ul(s,f==null?void 0:f.duration),1.2),zoomOut:f=>l.scaleBy(Ul(s,f==null?void 0:f.duration),1/1.2),zoomTo:(f,g)=>l.scaleTo(Ul(s,g==null?void 0:g.duration),f),getZoom:()=>n.getState().transform[2],setViewport:(f,g)=>{const[p,y,w]=n.getState().transform,v=Bs.translate(f.x??p,f.y??y).scale(f.zoom??w);l.transform(Ul(s,g==null?void 0:g.duration),v)},getViewport:()=>{const[f,g,p]=n.getState().transform;return{x:f,y:g,zoom:p}},fitView:f=>Jx(n.getState,f),setCenter:(f,g,p)=>{const{width:y,height:w,maxZoom:v}=n.getState(),S=typeof(p==null?void 0:p.zoom)<"u"?p.zoom:v,_=y/2-f*S,R=w/2-g*S,D=Bs.translate(_,R).scale(S);l.transform(Ul(s,p==null?void 0:p.duration),D)},fitBounds:(f,g)=>{const{width:p,height:y,minZoom:w,maxZoom:v}=n.getState(),{x:S,y:_,zoom:R}=$x(f,p,y,w,v,(g==null?void 0:g.padding)??.1),D=Bs.translate(S,_).scale(R);l.transform(Ul(s,g==null?void 0:g.duration),D)},project:f=>{const{transform:g,snapToGrid:p,snapGrid:y}=n.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Pg(f,g,p,y)},screenToFlowPosition:f=>{const{transform:g,snapToGrid:p,snapGrid:y,domNode:w}=n.getState();if(!w)return f;const{x:v,y:S}=w.getBoundingClientRect(),_={x:f.x-v,y:f.y-S};return Pg(_,g,p,y)},flowToScreenPosition:f=>{const{transform:g,domNode:p}=n.getState();if(!p)return f;const{x:y,y:w}=p.getBoundingClientRect(),v=zx(f,g);return{x:v.x+y,y:v.y+w}},viewportInitialized:!0}:qN,[l,s])};function Qg(){const n=XN(),l=wn(),s=W.useCallback(()=>l.getState().getNodes().map(H=>({...H})),[]),d=W.useCallback(H=>l.getState().nodeInternals.get(H),[]),f=W.useCallback(()=>{const{edges:H=[]}=l.getState();return H.map($=>({...$}))},[]),g=W.useCallback(H=>{const{edges:$=[]}=l.getState();return $.find(T=>T.id===H)},[]),p=W.useCallback(H=>{const{getNodes:$,setNodes:T,hasDefaultNodes:N,onNodesChange:M}=l.getState(),P=$(),O=typeof H=="function"?H(P):H;if(N)T(O);else if(M){const F=O.length===0?P.map(b=>({type:"remove",id:b.id})):O.map(b=>({item:b,type:"reset"}));M(F)}},[]),y=W.useCallback(H=>{const{edges:$=[],setEdges:T,hasDefaultEdges:N,onEdgesChange:M}=l.getState(),P=typeof H=="function"?H($):H;if(N)T(P);else if(M){const O=P.length===0?$.map(F=>({type:"remove",id:F.id})):P.map(F=>({item:F,type:"reset"}));M(O)}},[]),w=W.useCallback(H=>{const $=Array.isArray(H)?H:[H],{getNodes:T,setNodes:N,hasDefaultNodes:M,onNodesChange:P}=l.getState();if(M){const F=[...T(),...$];N(F)}else if(P){const O=$.map(F=>({item:F,type:"add"}));P(O)}},[]),v=W.useCallback(H=>{const $=Array.isArray(H)?H:[H],{edges:T=[],setEdges:N,hasDefaultEdges:M,onEdgesChange:P}=l.getState();if(M)N([...T,...$]);else if(P){const O=$.map(F=>({item:F,type:"add"}));P(O)}},[]),S=W.useCallback(()=>{const{getNodes:H,edges:$=[],transform:T}=l.getState(),[N,M,P]=T;return{nodes:H().map(O=>({...O})),edges:$.map(O=>({...O})),viewport:{x:N,y:M,zoom:P}}},[]),_=W.useCallback(({nodes:H,edges:$})=>{const{nodeInternals:T,getNodes:N,edges:M,hasDefaultNodes:P,hasDefaultEdges:O,onNodesDelete:F,onEdgesDelete:b,onNodesChange:U,onEdgesChange:Y}=l.getState(),re=(H||[]).map(q=>q.id),se=($||[]).map(q=>q.id),le=N().reduce((q,X)=>{const te=X.parentNode||X.parentId,Q=!re.includes(X.id)&&te&&q.find(L=>L.id===te);return(typeof X.deletable=="boolean"?X.deletable:!0)&&(re.includes(X.id)||Q)&&q.push(X),q},[]),ce=M.filter(q=>typeof q.deletable=="boolean"?q.deletable:!0),j=ce.filter(q=>se.includes(q.id));if(le||j){const q=Ix(le,ce),X=[...j,...q],te=X.reduce((Q,C)=>(Q.includes(C.id)||Q.push(C.id),Q),[]);if((O||P)&&(O&&l.setState({edges:M.filter(Q=>!te.includes(Q.id))}),P&&(le.forEach(Q=>{T.delete(Q.id)}),l.setState({nodeInternals:new Map(T)}))),te.length>0&&(b==null||b(X),Y&&Y(te.map(Q=>({id:Q,type:"remove"})))),le.length>0&&(F==null||F(le),U)){const Q=le.map(C=>({id:C.id,type:"remove"}));U(Q)}}},[]),R=W.useCallback(H=>{const $=gN(H),T=$?null:l.getState().nodeInternals.get(H.id);return!$&&!T?[null,null,$]:[$?H:im(T),T,$]},[]),D=W.useCallback((H,$=!0,T)=>{const[N,M,P]=R(H);return N?(T||l.getState().getNodes()).filter(O=>{if(!P&&(O.id===M.id||!O.positionAbsolute))return!1;const F=im(O),b=Cg(F,N);return $&&b>0||b>=N.width*N.height}):[]},[]),B=W.useCallback((H,$,T=!0)=>{const[N]=R(H);if(!N)return!1;const M=Cg(N,$);return T&&M>0||M>=N.width*N.height},[]);return W.useMemo(()=>({...n,getNodes:s,getNode:d,getEdges:f,getEdge:g,setNodes:p,setEdges:y,addNodes:w,addEdges:v,toObject:S,deleteElements:_,getIntersectingNodes:D,isNodeIntersecting:B}),[n,s,d,f,g,p,y,w,v,S,_,D,B])}const KN={actInsideInputWithModifier:!1};var ZN=({deleteKeyCode:n,multiSelectionKeyCode:l})=>{const s=wn(),{deleteElements:d}=Qg(),f=Md(n,KN),g=Md(l);W.useEffect(()=>{if(f){const{edges:p,getNodes:y}=s.getState(),w=y().filter(S=>S.selected),v=p.filter(S=>S.selected);d({nodes:w,edges:v}),s.setState({nodesSelectionActive:!1})}},[f]),W.useEffect(()=>{s.setState({multiSelectionActive:g})},[g])};function QN(n){const l=wn();W.useEffect(()=>{let s;const d=()=>{var g,p;if(!n.current)return;const f=Bg(n.current);(f.height===0||f.width===0)&&((p=(g=l.getState()).onError)==null||p.call(g,"004",Vs.error004())),l.setState({width:f.width||500,height:f.height||500})};return d(),window.addEventListener("resize",d),n.current&&(s=new ResizeObserver(()=>d()),s.observe(n.current)),()=>{window.removeEventListener("resize",d),s&&n.current&&s.unobserve(n.current)}},[])}const Jg={position:"absolute",width:"100%",height:"100%",top:0,left:0},JN=(n,l)=>n.x!==l.x||n.y!==l.y||n.zoom!==l.k,gh=n=>({x:n.x,y:n.y,zoom:n.k}),Pu=(n,l)=>n.target.closest(`.${l}`),pm=(n,l)=>l===2&&Array.isArray(n)&&n.includes(2),gm=n=>{const l=n.ctrlKey&&zh()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*l},eb=n=>({d3Zoom:n.d3Zoom,d3Selection:n.d3Selection,d3ZoomHandler:n.d3ZoomHandler,userSelectionActive:n.userSelectionActive}),tb=({onMove:n,onMoveStart:l,onMoveEnd:s,onPaneContextMenu:d,zoomOnScroll:f=!0,zoomOnPinch:g=!0,panOnScroll:p=!1,panOnScrollSpeed:y=.5,panOnScrollMode:w=Wl.Free,zoomOnDoubleClick:v=!0,elementsSelectable:S,panOnDrag:_=!0,defaultViewport:R,translateExtent:D,minZoom:B,maxZoom:H,zoomActivationKeyCode:$,preventScrolling:T=!0,children:N,noWheelClassName:M,noPanClassName:P})=>{const O=W.useRef(),F=wn(),b=W.useRef(!1),U=W.useRef(!1),Y=W.useRef(null),re=W.useRef({x:0,y:0,zoom:0}),{d3Zoom:se,d3Selection:le,d3ZoomHandler:ce,userSelectionActive:j}=$t(eb,Pn),q=Md($),X=W.useRef(0),te=W.useRef(!1),Q=W.useRef();return QN(Y),W.useEffect(()=>{if(Y.current){const C=Y.current.getBoundingClientRect(),L=bx().scaleExtent([B,H]).translateExtent(D),A=si(Y.current).call(L),K=Bs.translate(R.x,R.y).scale(Lu(R.zoom,B,H)),pe=[[0,0],[C.width,C.height]],ge=L.constrain()(K,pe,D);L.transform(A,ge),L.wheelDelta(gm),F.setState({d3Zoom:L,d3Selection:A,d3ZoomHandler:A.on("wheel.zoom"),transform:[ge.x,ge.y,ge.k],domNode:Y.current.closest(".react-flow")})}},[]),W.useEffect(()=>{le&&se&&(p&&!q&&!j?le.on("wheel.zoom",C=>{if(Pu(C,M))return!1;C.preventDefault(),C.stopImmediatePropagation();const L=le.property("__zoom").k||1;if(C.ctrlKey&&g){const Pe=Ei(C),Te=gm(C),We=L*Math.pow(2,Te);se.scaleTo(le,We,Pe,C);return}const A=C.deltaMode===1?20:1;let K=w===Wl.Vertical?0:C.deltaX*A,pe=w===Wl.Horizontal?0:C.deltaY*A;!zh()&&C.shiftKey&&w!==Wl.Vertical&&(K=C.deltaY*A,pe=0),se.translateBy(le,-(K/L)*y,-(pe/L)*y,{internal:!0});const ge=gh(le.property("__zoom")),{onViewportChangeStart:ve,onViewportChange:Ce,onViewportChangeEnd:je}=F.getState();clearTimeout(Q.current),te.current||(te.current=!0,l==null||l(C,ge),ve==null||ve(ge)),te.current&&(n==null||n(C,ge),Ce==null||Ce(ge),Q.current=setTimeout(()=>{s==null||s(C,ge),je==null||je(ge),te.current=!1},150))},{passive:!1}):typeof ce<"u"&&le.on("wheel.zoom",function(C,L){if(!T&&C.type==="wheel"&&!C.ctrlKey||Pu(C,M))return null;C.preventDefault(),ce.call(this,C,L)},{passive:!1}))},[j,p,w,le,se,ce,q,g,T,M,l,n,s]),W.useEffect(()=>{se&&se.on("start",C=>{var K,pe;if(!C.sourceEvent||C.sourceEvent.internal)return null;X.current=(K=C.sourceEvent)==null?void 0:K.button;const{onViewportChangeStart:L}=F.getState(),A=gh(C.transform);b.current=!0,re.current=A,((pe=C.sourceEvent)==null?void 0:pe.type)==="mousedown"&&F.setState({paneDragging:!0}),L==null||L(A),l==null||l(C.sourceEvent,A)})},[se,l]),W.useEffect(()=>{se&&(j&&!b.current?se.on("zoom",null):j||se.on("zoom",C=>{var A;const{onViewportChange:L}=F.getState();if(F.setState({transform:[C.transform.x,C.transform.y,C.transform.k]}),U.current=!!(d&&pm(_,X.current??0)),(n||L)&&!((A=C.sourceEvent)!=null&&A.internal)){const K=gh(C.transform);L==null||L(K),n==null||n(C.sourceEvent,K)}}))},[j,se,n,_,d]),W.useEffect(()=>{se&&se.on("end",C=>{if(!C.sourceEvent||C.sourceEvent.internal)return null;const{onViewportChangeEnd:L}=F.getState();if(b.current=!1,F.setState({paneDragging:!1}),d&&pm(_,X.current??0)&&!U.current&&d(C.sourceEvent),U.current=!1,(s||L)&&JN(re.current,C.transform)){const A=gh(C.transform);re.current=A,clearTimeout(O.current),O.current=setTimeout(()=>{L==null||L(A),s==null||s(C.sourceEvent,A)},p?150:0)}})},[se,p,_,s,d]),W.useEffect(()=>{se&&se.filter(C=>{const L=q||f,A=g&&C.ctrlKey;if((_===!0||Array.isArray(_)&&_.includes(1))&&C.button===1&&C.type==="mousedown"&&(Pu(C,"react-flow__node")||Pu(C,"react-flow__edge")))return!0;if(!_&&!L&&!p&&!v&&!g||j||!v&&C.type==="dblclick"||Pu(C,M)&&C.type==="wheel"||Pu(C,P)&&(C.type!=="wheel"||p&&C.type==="wheel"&&!q)||!g&&C.ctrlKey&&C.type==="wheel"||!L&&!p&&!A&&C.type==="wheel"||!_&&(C.type==="mousedown"||C.type==="touchstart")||Array.isArray(_)&&!_.includes(C.button)&&C.type==="mousedown")return!1;const K=Array.isArray(_)&&_.includes(C.button)||!C.button||C.button<=1;return(!C.ctrlKey||C.type==="wheel")&&K})},[j,se,f,g,p,v,_,S,q]),fe.createElement("div",{className:"react-flow__renderer",ref:Y,style:Jg},N)},nb=n=>({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function rb(){const{userSelectionActive:n,userSelectionRect:l}=$t(nb,Pn);return n&&l?fe.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:l.width,height:l.height,transform:`translate(${l.x}px, ${l.y}px)`}}):null}function mm(n,l){const s=l.parentNode||l.parentId,d=n.find(f=>f.id===s);if(d){const f=l.position.x+l.width-d.width,g=l.position.y+l.height-d.height;if(f>0||g>0||l.position.x<0||l.position.y<0){if(d.style={...d.style},d.style.width=d.style.width??d.width,d.style.height=d.style.height??d.height,f>0&&(d.style.width+=f),g>0&&(d.style.height+=g),l.position.x<0){const p=Math.abs(l.position.x);d.position.x=d.position.x-p,d.style.width+=p,l.position.x=0}if(l.position.y<0){const p=Math.abs(l.position.y);d.position.y=d.position.y-p,d.style.height+=p,l.position.y=0}d.width=d.style.width,d.height=d.style.height}}}function ib(n,l){if(n.some(d=>d.type==="reset"))return n.filter(d=>d.type==="reset").map(d=>d.item);const s=n.filter(d=>d.type==="add").map(d=>d.item);return l.reduce((d,f)=>{const g=n.filter(y=>y.id===f.id);if(g.length===0)return d.push(f),d;const p={...f};for(const y of g)if(y)switch(y.type){case"select":{p.selected=y.selected;break}case"position":{typeof y.position<"u"&&(p.position=y.position),typeof y.positionAbsolute<"u"&&(p.positionAbsolute=y.positionAbsolute),typeof y.dragging<"u"&&(p.dragging=y.dragging),p.expandParent&&mm(d,p);break}case"dimensions":{typeof y.dimensions<"u"&&(p.width=y.dimensions.width,p.height=y.dimensions.height),typeof y.updateStyle<"u"&&(p.style={...p.style||{},...y.dimensions}),typeof y.resizing=="boolean"&&(p.resizing=y.resizing),p.expandParent&&mm(d,p);break}case"remove":return d}return d.push(p),d},s)}function ey(n,l){return ib(n,l)}const $o=(n,l)=>({id:n,type:"select",selected:l});function Mu(n,l){return n.reduce((s,d)=>{const f=l.includes(d.id);return!d.selected&&f?(d.selected=!0,s.push($o(d.id,!0))):d.selected&&!f&&(d.selected=!1,s.push($o(d.id,!1))),s},[])}const ag=(n,l)=>s=>{s.target===l.current&&(n==null||n(s))},sb=n=>({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,dragging:n.paneDragging}),ty=W.memo(({isSelecting:n,selectionMode:l=Ad.Full,panOnDrag:s,onSelectionStart:d,onSelectionEnd:f,onPaneClick:g,onPaneContextMenu:p,onPaneScroll:y,onPaneMouseEnter:w,onPaneMouseMove:v,onPaneMouseLeave:S,children:_})=>{const R=W.useRef(null),D=wn(),B=W.useRef(0),H=W.useRef(0),$=W.useRef(),{userSelectionActive:T,elementsSelectable:N,dragging:M}=$t(sb,Pn),P=()=>{D.setState({userSelectionActive:!1,userSelectionRect:null}),B.current=0,H.current=0},O=ce=>{g==null||g(ce),D.getState().resetSelectedElements(),D.setState({nodesSelectionActive:!1})},F=ce=>{if(Array.isArray(s)&&(s!=null&&s.includes(2))){ce.preventDefault();return}p==null||p(ce)},b=y?ce=>y(ce):void 0,U=ce=>{const{resetSelectedElements:j,domNode:q}=D.getState();if($.current=q==null?void 0:q.getBoundingClientRect(),!N||!n||ce.button!==0||ce.target!==R.current||!$.current)return;const{x:X,y:te}=Fo(ce,$.current);j(),D.setState({userSelectionRect:{width:0,height:0,startX:X,startY:te,x:X,y:te}}),d==null||d(ce)},Y=ce=>{const{userSelectionRect:j,nodeInternals:q,edges:X,transform:te,onNodesChange:Q,onEdgesChange:C,nodeOrigin:L,getNodes:A}=D.getState();if(!n||!$.current||!j)return;D.setState({userSelectionActive:!0,nodesSelectionActive:!1});const K=Fo(ce,$.current),pe=j.startX??0,ge=j.startY??0,ve={...j,x:K.x<pe?K.x:pe,y:K.y<ge?K.y:ge,width:Math.abs(K.x-pe),height:Math.abs(K.y-ge)},Ce=A(),je=Ox(q,ve,te,l===Ad.Partial,!0,L),Pe=Ix(je,X).map(We=>We.id),Te=je.map(We=>We.id);if(B.current!==Te.length){B.current=Te.length;const We=Mu(Ce,Te);We.length&&(Q==null||Q(We))}if(H.current!==Pe.length){H.current=Pe.length;const We=Mu(X,Pe);We.length&&(C==null||C(We))}D.setState({userSelectionRect:ve})},re=ce=>{if(ce.button!==0)return;const{userSelectionRect:j}=D.getState();!T&&j&&ce.target===R.current&&(O==null||O(ce)),D.setState({nodesSelectionActive:B.current>0}),P(),f==null||f(ce)},se=ce=>{T&&(D.setState({nodesSelectionActive:B.current>0}),f==null||f(ce)),P()},le=N&&(n||T);return fe.createElement("div",{className:Fn(["react-flow__pane",{dragging:M,selection:n}]),onClick:le?void 0:ag(O,R),onContextMenu:ag(F,R),onWheel:ag(b,R),onMouseEnter:le?void 0:w,onMouseDown:le?U:void 0,onMouseMove:le?Y:v,onMouseUp:le?re:void 0,onMouseLeave:le?se:S,ref:R,style:Jg},_,fe.createElement(rb,null))});ty.displayName="Pane";function ny(n,l){const s=n.parentNode||n.parentId;if(!s)return!1;const d=l.get(s);return d?d.selected?!0:ny(d,l):!1}function xm(n,l,s){let d=n;do{if(d!=null&&d.matches(l))return!0;if(d===s.current)return!1;d=d.parentElement}while(d);return!1}function ob(n,l,s,d){return Array.from(n.values()).filter(f=>(f.selected||f.id===d)&&(!f.parentNode||f.parentId||!ny(f,n))&&(f.draggable||l&&typeof f.draggable>"u")).map(f=>{var g,p;return{id:f.id,position:f.position||{x:0,y:0},positionAbsolute:f.positionAbsolute||{x:0,y:0},distance:{x:s.x-(((g=f.positionAbsolute)==null?void 0:g.x)??0),y:s.y-(((p=f.positionAbsolute)==null?void 0:p.y)??0)},delta:{x:0,y:0},extent:f.extent,parentNode:f.parentNode||f.parentId,parentId:f.parentNode||f.parentId,width:f.width,height:f.height,expandParent:f.expandParent}})}function lb(n,l){return!l||l==="parent"?l:[l[0],[l[1][0]-(n.width||0),l[1][1]-(n.height||0)]]}function ry(n,l,s,d,f=[0,0],g){const p=lb(n,n.extent||d);let y=p;const w=n.parentNode||n.parentId;if(n.extent==="parent"&&!n.expandParent)if(w&&n.width&&n.height){const _=s.get(w),{x:R,y:D}=Yl(_,f).positionAbsolute;y=_&&oi(R)&&oi(D)&&oi(_.width)&&oi(_.height)?[[R+n.width*f[0],D+n.height*f[1]],[R+_.width-n.width+n.width*f[0],D+_.height-n.height+n.height*f[1]]]:y}else g==null||g("005",Vs.error005()),y=p;else if(n.extent&&w&&n.extent!=="parent"){const _=s.get(w),{x:R,y:D}=Yl(_,f).positionAbsolute;y=[[n.extent[0][0]+R,n.extent[0][1]+D],[n.extent[1][0]+R,n.extent[1][1]+D]]}let v={x:0,y:0};if(w){const _=s.get(w);v=Yl(_,f).positionAbsolute}const S=y&&y!=="parent"?Wg(l,y):l;return{position:{x:S.x-v.x,y:S.y-v.y},positionAbsolute:S}}function ug({nodeId:n,dragItems:l,nodeInternals:s}){const d=l.map(f=>({...s.get(f.id),position:f.position,positionAbsolute:f.positionAbsolute}));return[n?d.find(f=>f.id===n):d[0],d]}const ym=(n,l,s,d)=>{const f=l.querySelectorAll(n);if(!f||!f.length)return null;const g=Array.from(f),p=l.getBoundingClientRect(),y={x:p.width*d[0],y:p.height*d[1]};return g.map(w=>{const v=w.getBoundingClientRect();return{id:w.getAttribute("data-handleid"),position:w.getAttribute("data-handlepos"),x:(v.left-p.left-y.x)/s,y:(v.top-p.top-y.y)/s,...Bg(w)}})};function hd(n,l,s){return s===void 0?s:d=>{const f=l().nodeInternals.get(n);f&&s(d,{...f})}}function Ag({id:n,store:l,unselect:s=!1,nodeRef:d}){const{addSelectedNodes:f,unselectNodesAndEdges:g,multiSelectionActive:p,nodeInternals:y,onError:w}=l.getState(),v=y.get(n);if(!v){w==null||w("012",Vs.error012(n));return}l.setState({nodesSelectionActive:!1}),v.selected?(s||v.selected&&p)&&(g({nodes:[v],edges:[]}),requestAnimationFrame(()=>{var S;return(S=d==null?void 0:d.current)==null?void 0:S.blur()})):f([n])}function ab(){const n=wn();return W.useCallback(({sourceEvent:s})=>{const{transform:d,snapGrid:f,snapToGrid:g}=n.getState(),p=s.touches?s.touches[0].clientX:s.clientX,y=s.touches?s.touches[0].clientY:s.clientY,w={x:(p-d[0])/d[2],y:(y-d[1])/d[2]};return{xSnapped:g?f[0]*Math.round(w.x/f[0]):w.x,ySnapped:g?f[1]*Math.round(w.y/f[1]):w.y,...w}},[])}function cg(n){return(l,s,d)=>n==null?void 0:n(l,d)}function iy({nodeRef:n,disabled:l=!1,noDragClassName:s,handleSelector:d,nodeId:f,isSelectable:g,selectNodesOnDrag:p}){const y=wn(),[w,v]=W.useState(!1),S=W.useRef([]),_=W.useRef({x:null,y:null}),R=W.useRef(0),D=W.useRef(null),B=W.useRef({x:0,y:0}),H=W.useRef(null),$=W.useRef(!1),T=W.useRef(!1),N=W.useRef(!1),M=ab();return W.useEffect(()=>{if(n!=null&&n.current){const P=si(n.current),O=({x:U,y:Y})=>{const{nodeInternals:re,onNodeDrag:se,onSelectionDrag:le,updateNodePositions:ce,nodeExtent:j,snapGrid:q,snapToGrid:X,nodeOrigin:te,onError:Q}=y.getState();_.current={x:U,y:Y};let C=!1,L={x:0,y:0,x2:0,y2:0};if(S.current.length>1&&j){const K=Yh(S.current,te);L=Rd(K)}if(S.current=S.current.map(K=>{const pe={x:U-K.distance.x,y:Y-K.distance.y};X&&(pe.x=q[0]*Math.round(pe.x/q[0]),pe.y=q[1]*Math.round(pe.y/q[1]));const ge=[[j[0][0],j[0][1]],[j[1][0],j[1][1]]];S.current.length>1&&j&&!K.extent&&(ge[0][0]=K.positionAbsolute.x-L.x+j[0][0],ge[1][0]=K.positionAbsolute.x+(K.width??0)-L.x2+j[1][0],ge[0][1]=K.positionAbsolute.y-L.y+j[0][1],ge[1][1]=K.positionAbsolute.y+(K.height??0)-L.y2+j[1][1]);const ve=ry(K,pe,re,ge,te,Q);return C=C||K.position.x!==ve.position.x||K.position.y!==ve.position.y,K.position=ve.position,K.positionAbsolute=ve.positionAbsolute,K}),!C)return;ce(S.current,!0,!0),v(!0);const A=f?se:cg(le);if(A&&H.current){const[K,pe]=ug({nodeId:f,dragItems:S.current,nodeInternals:re});A(H.current,K,pe)}},F=()=>{if(!D.current)return;const[U,Y]=Cx(B.current,D.current);if(U!==0||Y!==0){const{transform:re,panBy:se}=y.getState();_.current.x=(_.current.x??0)-U/re[2],_.current.y=(_.current.y??0)-Y/re[2],se({x:U,y:Y})&&O(_.current)}R.current=requestAnimationFrame(F)},b=U=>{var te;const{nodeInternals:Y,multiSelectionActive:re,nodesDraggable:se,unselectNodesAndEdges:le,onNodeDragStart:ce,onSelectionDragStart:j}=y.getState();T.current=!0;const q=f?ce:cg(j);(!p||!g)&&!re&&f&&((te=Y.get(f))!=null&&te.selected||le()),f&&g&&p&&Ag({id:f,store:y,nodeRef:n});const X=M(U);if(_.current=X,S.current=ob(Y,se,X,f),q&&S.current){const[Q,C]=ug({nodeId:f,dragItems:S.current,nodeInternals:Y});q(U.sourceEvent,Q,C)}};if(l)P.on(".drag",null);else{const U=vS().on("start",Y=>{const{domNode:re,nodeDragThreshold:se}=y.getState();se===0&&b(Y),N.current=!1;const le=M(Y);_.current=le,D.current=(re==null?void 0:re.getBoundingClientRect())||null,B.current=Fo(Y.sourceEvent,D.current)}).on("drag",Y=>{var ce,j;const re=M(Y),{autoPanOnNodeDrag:se,nodeDragThreshold:le}=y.getState();if(Y.sourceEvent.type==="touchmove"&&Y.sourceEvent.touches.length>1&&(N.current=!0),!N.current){if(!$.current&&T.current&&se&&($.current=!0,F()),!T.current){const q=re.xSnapped-(((ce=_==null?void 0:_.current)==null?void 0:ce.x)??0),X=re.ySnapped-(((j=_==null?void 0:_.current)==null?void 0:j.y)??0);Math.sqrt(q*q+X*X)>le&&b(Y)}(_.current.x!==re.xSnapped||_.current.y!==re.ySnapped)&&S.current&&T.current&&(H.current=Y.sourceEvent,B.current=Fo(Y.sourceEvent,D.current),O(re))}}).on("end",Y=>{if(!(!T.current||N.current)&&(v(!1),$.current=!1,T.current=!1,cancelAnimationFrame(R.current),S.current)){const{updateNodePositions:re,nodeInternals:se,onNodeDragStop:le,onSelectionDragStop:ce}=y.getState(),j=f?le:cg(ce);if(re(S.current,!1,!1),j){const[q,X]=ug({nodeId:f,dragItems:S.current,nodeInternals:se});j(Y.sourceEvent,q,X)}}}).filter(Y=>{const re=Y.target;return!Y.button&&(!s||!xm(re,`.${s}`,n))&&(!d||xm(re,d,n))});return P.call(U),()=>{P.on(".drag",null)}}}},[n,l,s,d,g,y,f,p,M]),w}function sy(){const n=wn();return W.useCallback(s=>{const{nodeInternals:d,nodeExtent:f,updateNodePositions:g,getNodes:p,snapToGrid:y,snapGrid:w,onError:v,nodesDraggable:S}=n.getState(),_=p().filter(N=>N.selected&&(N.draggable||S&&typeof N.draggable>"u")),R=y?w[0]:5,D=y?w[1]:5,B=s.isShiftPressed?4:1,H=s.x*R*B,$=s.y*D*B,T=_.map(N=>{if(N.positionAbsolute){const M={x:N.positionAbsolute.x+H,y:N.positionAbsolute.y+$};y&&(M.x=w[0]*Math.round(M.x/w[0]),M.y=w[1]*Math.round(M.y/w[1]));const{positionAbsolute:P,position:O}=ry(N,M,d,f,void 0,v);N.position=O,N.positionAbsolute=P}return N});g(T,!0,!1)},[])}const Ou={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var pd=n=>{const l=({id:s,type:d,data:f,xPos:g,yPos:p,xPosOrigin:y,yPosOrigin:w,selected:v,onClick:S,onMouseEnter:_,onMouseMove:R,onMouseLeave:D,onContextMenu:B,onDoubleClick:H,style:$,className:T,isDraggable:N,isSelectable:M,isConnectable:P,isFocusable:O,selectNodesOnDrag:F,sourcePosition:b,targetPosition:U,hidden:Y,resizeObserver:re,dragHandle:se,zIndex:le,isParent:ce,noDragClassName:j,noPanClassName:q,initialized:X,disableKeyboardA11y:te,ariaLabel:Q,rfId:C,hasHandleBounds:L})=>{const A=wn(),K=W.useRef(null),pe=W.useRef(null),ge=W.useRef(b),ve=W.useRef(U),Ce=W.useRef(d),je=M||N||S||_||R||D,Pe=sy(),Te=hd(s,A.getState,_),We=hd(s,A.getState,R),ft=hd(s,A.getState,D),St=hd(s,A.getState,B),Pt=hd(s,A.getState,H),ot=Ze=>{const{nodeDragThreshold:Oe}=A.getState();if(M&&(!F||!N||Oe>0)&&Ag({id:s,store:A,nodeRef:K}),S){const Ft=A.getState().nodeInternals.get(s);Ft&&S(Ze,{...Ft})}},ct=Ze=>{if(!kg(Ze)&&!te)if(Px.includes(Ze.key)&&M){const Oe=Ze.key==="Escape";Ag({id:s,store:A,unselect:Oe,nodeRef:K})}else N&&v&&Object.prototype.hasOwnProperty.call(Ou,Ze.key)&&(A.setState({ariaLiveMessage:`Moved selected node ${Ze.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~g}, y: ${~~p}`}),Pe({x:Ou[Ze.key].x,y:Ou[Ze.key].y,isShiftPressed:Ze.shiftKey}))};W.useEffect(()=>()=>{pe.current&&(re==null||re.unobserve(pe.current),pe.current=null)},[]),W.useEffect(()=>{if(K.current&&!Y){const Ze=K.current;(!X||!L||pe.current!==Ze)&&(pe.current&&(re==null||re.unobserve(pe.current)),re==null||re.observe(Ze),pe.current=Ze)}},[Y,X,L]),W.useEffect(()=>{const Ze=Ce.current!==d,Oe=ge.current!==b,Ft=ve.current!==U;K.current&&(Ze||Oe||Ft)&&(Ze&&(Ce.current=d),Oe&&(ge.current=b),Ft&&(ve.current=U),A.getState().updateNodeDimensions([{id:s,nodeElement:K.current,forceUpdate:!0}]))},[s,d,b,U]);const Lt=iy({nodeRef:K,disabled:Y||!N,noDragClassName:j,handleSelector:se,nodeId:s,isSelectable:M,selectNodesOnDrag:F});return Y?null:fe.createElement("div",{className:Fn(["react-flow__node",`react-flow__node-${d}`,{[q]:N},T,{selected:v,selectable:M,parent:ce,dragging:Lt}]),ref:K,style:{zIndex:le,transform:`translate(${y}px,${w}px)`,pointerEvents:je?"all":"none",visibility:X?"visible":"hidden",...$},"data-id":s,"data-testid":`rf__node-${s}`,onMouseEnter:Te,onMouseMove:We,onMouseLeave:ft,onContextMenu:St,onClick:ot,onDoubleClick:Pt,onKeyDown:O?ct:void 0,tabIndex:O?0:void 0,role:O?"button":void 0,"aria-describedby":te?void 0:`${Xx}-${C}`,"aria-label":Q},fe.createElement(_N,{value:s},fe.createElement(n,{id:s,data:f,type:d,xPos:g,yPos:p,selected:v,isConnectable:P,sourcePosition:b,targetPosition:U,dragging:Lt,dragHandle:se,zIndex:le})))};return l.displayName="NodeWrapper",W.memo(l)};const ub=n=>{const l=n.getNodes().filter(s=>s.selected);return{...Yh(l,n.nodeOrigin),transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`,userSelectionActive:n.userSelectionActive}};function cb({onSelectionContextMenu:n,noPanClassName:l,disableKeyboardA11y:s}){const d=wn(),{width:f,height:g,x:p,y,transformString:w,userSelectionActive:v}=$t(ub,Pn),S=sy(),_=W.useRef(null);if(W.useEffect(()=>{var B;s||(B=_.current)==null||B.focus({preventScroll:!0})},[s]),iy({nodeRef:_}),v||!f||!g)return null;const R=n?B=>{const H=d.getState().getNodes().filter($=>$.selected);n(B,H)}:void 0,D=B=>{Object.prototype.hasOwnProperty.call(Ou,B.key)&&S({x:Ou[B.key].x,y:Ou[B.key].y,isShiftPressed:B.shiftKey})};return fe.createElement("div",{className:Fn(["react-flow__nodesselection","react-flow__container",l]),style:{transform:w}},fe.createElement("div",{ref:_,className:"react-flow__nodesselection-rect",onContextMenu:R,tabIndex:s?void 0:-1,onKeyDown:s?void 0:D,style:{width:f,height:g,top:y,left:p}}))}var db=W.memo(cb);const fb=n=>n.nodesSelectionActive,oy=({children:n,onPaneClick:l,onPaneMouseEnter:s,onPaneMouseMove:d,onPaneMouseLeave:f,onPaneContextMenu:g,onPaneScroll:p,deleteKeyCode:y,onMove:w,onMoveStart:v,onMoveEnd:S,selectionKeyCode:_,selectionOnDrag:R,selectionMode:D,onSelectionStart:B,onSelectionEnd:H,multiSelectionKeyCode:$,panActivationKeyCode:T,zoomActivationKeyCode:N,elementsSelectable:M,zoomOnScroll:P,zoomOnPinch:O,panOnScroll:F,panOnScrollSpeed:b,panOnScrollMode:U,zoomOnDoubleClick:Y,panOnDrag:re,defaultViewport:se,translateExtent:le,minZoom:ce,maxZoom:j,preventScrolling:q,onSelectionContextMenu:X,noWheelClassName:te,noPanClassName:Q,disableKeyboardA11y:C})=>{const L=$t(fb),A=Md(_),K=Md(T),pe=K||re,ge=K||F,ve=A||R&&pe!==!0;return ZN({deleteKeyCode:y,multiSelectionKeyCode:$}),fe.createElement(tb,{onMove:w,onMoveStart:v,onMoveEnd:S,onPaneContextMenu:g,elementsSelectable:M,zoomOnScroll:P,zoomOnPinch:O,panOnScroll:ge,panOnScrollSpeed:b,panOnScrollMode:U,zoomOnDoubleClick:Y,panOnDrag:!A&&pe,defaultViewport:se,translateExtent:le,minZoom:ce,maxZoom:j,zoomActivationKeyCode:N,preventScrolling:q,noWheelClassName:te,noPanClassName:Q},fe.createElement(ty,{onSelectionStart:B,onSelectionEnd:H,onPaneClick:l,onPaneMouseEnter:s,onPaneMouseMove:d,onPaneMouseLeave:f,onPaneContextMenu:g,onPaneScroll:p,panOnDrag:pe,isSelecting:!!ve,selectionMode:D},n,L&&fe.createElement(db,{onSelectionContextMenu:X,noPanClassName:Q,disableKeyboardA11y:C})))};oy.displayName="FlowRenderer";var hb=W.memo(oy);function pb(n){return $t(W.useCallback(s=>n?Ox(s.nodeInternals,{x:0,y:0,width:s.width,height:s.height},s.transform,!0):s.getNodes(),[n]))}function gb(n){const l={input:pd(n.input||Vx),default:pd(n.default||Rg),output:pd(n.output||qx),group:pd(n.group||Zg)},s={},d=Object.keys(n).filter(f=>!["input","default","output","group"].includes(f)).reduce((f,g)=>(f[g]=pd(n[g]||Rg),f),s);return{...l,...d}}const mb=({x:n,y:l,width:s,height:d,origin:f})=>!s||!d?{x:n,y:l}:f[0]<0||f[1]<0||f[0]>1||f[1]>1?{x:n,y:l}:{x:n-s*f[0],y:l-d*f[1]},xb=n=>({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,updateNodeDimensions:n.updateNodeDimensions,onError:n.onError}),ly=n=>{const{nodesDraggable:l,nodesConnectable:s,nodesFocusable:d,elementsSelectable:f,updateNodeDimensions:g,onError:p}=$t(xb,Pn),y=pb(n.onlyRenderVisibleElements),w=W.useRef(),v=W.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const S=new ResizeObserver(_=>{const R=_.map(D=>({id:D.target.getAttribute("data-id"),nodeElement:D.target,forceUpdate:!0}));g(R)});return w.current=S,S},[]);return W.useEffect(()=>()=>{var S;(S=w==null?void 0:w.current)==null||S.disconnect()},[]),fe.createElement("div",{className:"react-flow__nodes",style:Jg},y.map(S=>{var O,F,b;let _=S.type||"default";n.nodeTypes[_]||(p==null||p("003",Vs.error003(_)),_="default");const R=n.nodeTypes[_]||n.nodeTypes.default,D=!!(S.draggable||l&&typeof S.draggable>"u"),B=!!(S.selectable||f&&typeof S.selectable>"u"),H=!!(S.connectable||s&&typeof S.connectable>"u"),$=!!(S.focusable||d&&typeof S.focusable>"u"),T=n.nodeExtent?Wg(S.positionAbsolute,n.nodeExtent):S.positionAbsolute,N=(T==null?void 0:T.x)??0,M=(T==null?void 0:T.y)??0,P=mb({x:N,y:M,width:S.width??0,height:S.height??0,origin:n.nodeOrigin});return fe.createElement(R,{key:S.id,id:S.id,className:S.className,style:S.style,type:_,data:S.data,sourcePosition:S.sourcePosition||Be.Bottom,targetPosition:S.targetPosition||Be.Top,hidden:S.hidden,xPos:N,yPos:M,xPosOrigin:P.x,yPosOrigin:P.y,selectNodesOnDrag:n.selectNodesOnDrag,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,selected:!!S.selected,isDraggable:D,isSelectable:B,isConnectable:H,isFocusable:$,resizeObserver:v,dragHandle:S.dragHandle,zIndex:((O=S[Zt])==null?void 0:O.z)??0,isParent:!!((F=S[Zt])!=null&&F.isParent),noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,initialized:!!S.width&&!!S.height,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,ariaLabel:S.ariaLabel,hasHandleBounds:!!((b=S[Zt])!=null&&b.handleBounds)})}))};ly.displayName="NodeRenderer";var yb=W.memo(ly);const vb=(n,l,s)=>s===Be.Left?n-l:s===Be.Right?n+l:n,wb=(n,l,s)=>s===Be.Top?n-l:s===Be.Bottom?n+l:n,vm="react-flow__edgeupdater",wm=({position:n,centerX:l,centerY:s,radius:d=10,onMouseDown:f,onMouseEnter:g,onMouseOut:p,type:y})=>fe.createElement("circle",{onMouseDown:f,onMouseEnter:g,onMouseOut:p,className:Fn([vm,`${vm}-${y}`]),cx:vb(l,d,n),cy:wb(s,d,n),r:d,stroke:"transparent",fill:"transparent"}),Sb=()=>!0;var Ru=n=>{const l=({id:s,className:d,type:f,data:g,onClick:p,onEdgeDoubleClick:y,selected:w,animated:v,label:S,labelStyle:_,labelShowBg:R,labelBgStyle:D,labelBgPadding:B,labelBgBorderRadius:H,style:$,source:T,target:N,sourceX:M,sourceY:P,targetX:O,targetY:F,sourcePosition:b,targetPosition:U,elementsSelectable:Y,hidden:re,sourceHandleId:se,targetHandleId:le,onContextMenu:ce,onMouseEnter:j,onMouseMove:q,onMouseLeave:X,reconnectRadius:te,onReconnect:Q,onReconnectStart:C,onReconnectEnd:L,markerEnd:A,markerStart:K,rfId:pe,ariaLabel:ge,isFocusable:ve,isReconnectable:Ce,pathOptions:je,interactionWidth:Pe,disableKeyboardA11y:Te})=>{const We=W.useRef(null),[ft,St]=W.useState(!1),[Pt,ot]=W.useState(!1),ct=wn(),Lt=W.useMemo(()=>`url('#${Tg(K,pe)}')`,[K,pe]),Ze=W.useMemo(()=>`url('#${Tg(A,pe)}')`,[A,pe]);if(re)return null;const Oe=yt=>{var qe;const{edges:on,addSelectedEdges:Rn,unselectNodesAndEdges:Ee,multiSelectionActive:He}=ct.getState(),et=on.find(ln=>ln.id===s);et&&(Y&&(ct.setState({nodesSelectionActive:!1}),et.selected&&He?(Ee({nodes:[],edges:[et]}),(qe=We.current)==null||qe.blur()):Rn([s])),p&&p(yt,et))},Ft=fd(s,ct.getState,y),Dt=fd(s,ct.getState,ce),bt=fd(s,ct.getState,j),Qt=fd(s,ct.getState,q),dn=fd(s,ct.getState,X),fn=(yt,on)=>{if(yt.button!==0)return;const{edges:Rn,isValidConnection:Ee}=ct.getState(),He=on?N:T,et=(on?le:se)||null,qe=on?"target":"source",ln=Ee||Sb,hn=on,pn=Rn.find(Fr=>Fr.id===s);ot(!0),C==null||C(yt,pn,qe);const Hn=Fr=>{ot(!1),L==null||L(Fr,pn,qe)};Hx({event:yt,handleId:et,nodeId:He,onConnect:Fr=>Q==null?void 0:Q(pn,Fr),isTarget:hn,getState:ct.getState,setState:ct.setState,isValidConnection:ln,edgeUpdaterType:qe,onReconnectEnd:Hn})},sn=yt=>fn(yt,!0),he=yt=>fn(yt,!1),ke=()=>St(!0),Ve=()=>St(!1),Je=!Y&&!p,_t=yt=>{var on;if(!Te&&Px.includes(yt.key)&&Y){const{unselectNodesAndEdges:Rn,addSelectedEdges:Ee,edges:He}=ct.getState();yt.key==="Escape"?((on=We.current)==null||on.blur(),Rn({edges:[He.find(qe=>qe.id===s)]})):Ee([s])}};return fe.createElement("g",{className:Fn(["react-flow__edge",`react-flow__edge-${f}`,d,{selected:w,animated:v,inactive:Je,updating:ft}]),onClick:Oe,onDoubleClick:Ft,onContextMenu:Dt,onMouseEnter:bt,onMouseMove:Qt,onMouseLeave:dn,onKeyDown:ve?_t:void 0,tabIndex:ve?0:void 0,role:ve?"button":"img","data-testid":`rf__edge-${s}`,"aria-label":ge===null?void 0:ge||`Edge from ${T} to ${N}`,"aria-describedby":ve?`${Kx}-${pe}`:void 0,ref:We},!Pt&&fe.createElement(n,{id:s,source:T,target:N,selected:w,animated:v,label:S,labelStyle:_,labelShowBg:R,labelBgStyle:D,labelBgPadding:B,labelBgBorderRadius:H,data:g,style:$,sourceX:M,sourceY:P,targetX:O,targetY:F,sourcePosition:b,targetPosition:U,sourceHandleId:se,targetHandleId:le,markerStart:Lt,markerEnd:Ze,pathOptions:je,interactionWidth:Pe}),Ce&&fe.createElement(fe.Fragment,null,(Ce==="source"||Ce===!0)&&fe.createElement(wm,{position:b,centerX:M,centerY:P,radius:te,onMouseDown:sn,onMouseEnter:ke,onMouseOut:Ve,type:"source"}),(Ce==="target"||Ce===!0)&&fe.createElement(wm,{position:U,centerX:O,centerY:F,radius:te,onMouseDown:he,onMouseEnter:ke,onMouseOut:Ve,type:"target"})))};return l.displayName="EdgeWrapper",W.memo(l)};function _b(n){const l={default:Ru(n.default||Ih),straight:Ru(n.bezier||qg),step:Ru(n.step||Yg),smoothstep:Ru(n.step||Vh),simplebezier:Ru(n.simplebezier||Vg)},s={},d=Object.keys(n).filter(f=>!["default","bezier"].includes(f)).reduce((f,g)=>(f[g]=Ru(n[g]||Ih),f),s);return{...l,...d}}function Sm(n,l,s=null){const d=((s==null?void 0:s.x)||0)+l.x,f=((s==null?void 0:s.y)||0)+l.y,g=(s==null?void 0:s.width)||l.width,p=(s==null?void 0:s.height)||l.height;switch(n){case Be.Top:return{x:d+g/2,y:f};case Be.Right:return{x:d+g,y:f+p/2};case Be.Bottom:return{x:d+g/2,y:f+p};case Be.Left:return{x:d,y:f+p/2}}}function _m(n,l){return n?n.length===1||!l?n[0]:l&&n.find(s=>s.id===l)||null:null}const Nb=(n,l,s,d,f,g)=>{const p=Sm(s,n,l),y=Sm(g,d,f);return{sourceX:p.x,sourceY:p.y,targetX:y.x,targetY:y.y}};function bb({sourcePos:n,targetPos:l,sourceWidth:s,sourceHeight:d,targetWidth:f,targetHeight:g,width:p,height:y,transform:w}){const v={x:Math.min(n.x,l.x),y:Math.min(n.y,l.y),x2:Math.max(n.x+s,l.x+f),y2:Math.max(n.y+d,l.y+g)};v.x===v.x2&&(v.x2+=1),v.y===v.y2&&(v.y2+=1);const S=Rd({x:(0-w[0])/w[2],y:(0-w[1])/w[2],width:p/w[2],height:y/w[2]}),_=Math.max(0,Math.min(S.x2,v.x2)-Math.max(S.x,v.x)),R=Math.max(0,Math.min(S.y2,v.y2)-Math.max(S.y,v.y));return Math.ceil(_*R)>0}function Nm(n){var d,f,g,p,y;const l=((d=n==null?void 0:n[Zt])==null?void 0:d.handleBounds)||null,s=l&&(n==null?void 0:n.width)&&(n==null?void 0:n.height)&&typeof((f=n==null?void 0:n.positionAbsolute)==null?void 0:f.x)<"u"&&typeof((g=n==null?void 0:n.positionAbsolute)==null?void 0:g.y)<"u";return[{x:((p=n==null?void 0:n.positionAbsolute)==null?void 0:p.x)||0,y:((y=n==null?void 0:n.positionAbsolute)==null?void 0:y.y)||0,width:(n==null?void 0:n.width)||0,height:(n==null?void 0:n.height)||0},l,!!s]}const Eb=[{level:0,isMaxLevel:!0,edges:[]}];function Cb(n,l,s=!1){let d=-1;const f=n.reduce((p,y)=>{var S,_;const w=oi(y.zIndex);let v=w?y.zIndex:0;if(s){const R=l.get(y.target),D=l.get(y.source),B=y.selected||(R==null?void 0:R.selected)||(D==null?void 0:D.selected),H=Math.max(((S=D==null?void 0:D[Zt])==null?void 0:S.z)||0,((_=R==null?void 0:R[Zt])==null?void 0:_.z)||0,1e3);v=(w?y.zIndex:0)+(B?H:0)}return p[v]?p[v].push(y):p[v]=[y],d=v>d?v:d,p},{}),g=Object.entries(f).map(([p,y])=>{const w=+p;return{edges:y,level:w,isMaxLevel:w===d}});return g.length===0?Eb:g}function kb(n,l,s){const d=$t(W.useCallback(f=>n?f.edges.filter(g=>{const p=l.get(g.source),y=l.get(g.target);return(p==null?void 0:p.width)&&(p==null?void 0:p.height)&&(y==null?void 0:y.width)&&(y==null?void 0:y.height)&&bb({sourcePos:p.positionAbsolute||{x:0,y:0},targetPos:y.positionAbsolute||{x:0,y:0},sourceWidth:p.width,sourceHeight:p.height,targetWidth:y.width,targetHeight:y.height,width:f.width,height:f.height,transform:f.transform})}):f.edges,[n,l]));return Cb(d,l,s)}const jb=({color:n="none",strokeWidth:l=1})=>fe.createElement("polyline",{style:{stroke:n,strokeWidth:l},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Tb=({color:n="none",strokeWidth:l=1})=>fe.createElement("polyline",{style:{stroke:n,fill:n,strokeWidth:l},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),bm={[Oh.Arrow]:jb,[Oh.ArrowClosed]:Tb};function Pb(n){const l=wn();return W.useMemo(()=>{var f,g;return Object.prototype.hasOwnProperty.call(bm,n)?bm[n]:((g=(f=l.getState()).onError)==null||g.call(f,"009",Vs.error009(n)),null)},[n])}const Rb=({id:n,type:l,color:s,width:d=12.5,height:f=12.5,markerUnits:g="strokeWidth",strokeWidth:p,orient:y="auto-start-reverse"})=>{const w=Pb(l);return w?fe.createElement("marker",{className:"react-flow__arrowhead",id:n,markerWidth:`${d}`,markerHeight:`${f}`,viewBox:"-10 -10 20 20",markerUnits:g,orient:y,refX:"0",refY:"0"},fe.createElement(w,{color:s,strokeWidth:p})):null},Ab=({defaultColor:n,rfId:l})=>s=>{const d=[];return s.edges.reduce((f,g)=>([g.markerStart,g.markerEnd].forEach(p=>{if(p&&typeof p=="object"){const y=Tg(p,l);d.includes(y)||(f.push({id:y,color:p.color||n,...p}),d.push(y))}}),f),[]).sort((f,g)=>f.id.localeCompare(g.id))},ay=({defaultColor:n,rfId:l})=>{const s=$t(W.useCallback(Ab({defaultColor:n,rfId:l}),[n,l]),(d,f)=>!(d.length!==f.length||d.some((g,p)=>g.id!==f[p].id)));return fe.createElement("defs",null,s.map(d=>fe.createElement(Rb,{id:d.id,key:d.id,type:d.type,color:d.color,width:d.width,height:d.height,markerUnits:d.markerUnits,strokeWidth:d.strokeWidth,orient:d.orient})))};ay.displayName="MarkerDefinitions";var Mb=W.memo(ay);const Db=n=>({nodesConnectable:n.nodesConnectable,edgesFocusable:n.edgesFocusable,edgesUpdatable:n.edgesUpdatable,elementsSelectable:n.elementsSelectable,width:n.width,height:n.height,connectionMode:n.connectionMode,nodeInternals:n.nodeInternals,onError:n.onError}),uy=({defaultMarkerColor:n,onlyRenderVisibleElements:l,elevateEdgesOnSelect:s,rfId:d,edgeTypes:f,noPanClassName:g,onEdgeContextMenu:p,onEdgeMouseEnter:y,onEdgeMouseMove:w,onEdgeMouseLeave:v,onEdgeClick:S,onEdgeDoubleClick:_,onReconnect:R,onReconnectStart:D,onReconnectEnd:B,reconnectRadius:H,children:$,disableKeyboardA11y:T})=>{const{edgesFocusable:N,edgesUpdatable:M,elementsSelectable:P,width:O,height:F,connectionMode:b,nodeInternals:U,onError:Y}=$t(Db,Pn),re=kb(l,U,s);return O?fe.createElement(fe.Fragment,null,re.map(({level:se,edges:le,isMaxLevel:ce})=>fe.createElement("svg",{key:se,style:{zIndex:se},width:O,height:F,className:"react-flow__edges react-flow__container"},ce&&fe.createElement(Mb,{defaultColor:n,rfId:d}),fe.createElement("g",null,le.map(j=>{const[q,X,te]=Nm(U.get(j.source)),[Q,C,L]=Nm(U.get(j.target));if(!te||!L)return null;let A=j.type||"default";f[A]||(Y==null||Y("011",Vs.error011(A)),A="default");const K=f[A]||f.default,pe=b===Xl.Strict?C.target:(C.target??[]).concat(C.source??[]),ge=_m(X.source,j.sourceHandle),ve=_m(pe,j.targetHandle),Ce=(ge==null?void 0:ge.position)||Be.Bottom,je=(ve==null?void 0:ve.position)||Be.Top,Pe=!!(j.focusable||N&&typeof j.focusable>"u"),Te=j.reconnectable||j.updatable,We=typeof R<"u"&&(Te||M&&typeof Te>"u");if(!ge||!ve)return Y==null||Y("008",Vs.error008(ge,j)),null;const{sourceX:ft,sourceY:St,targetX:Pt,targetY:ot}=Nb(q,ge,Ce,Q,ve,je);return fe.createElement(K,{key:j.id,id:j.id,className:Fn([j.className,g]),type:A,data:j.data,selected:!!j.selected,animated:!!j.animated,hidden:!!j.hidden,label:j.label,labelStyle:j.labelStyle,labelShowBg:j.labelShowBg,labelBgStyle:j.labelBgStyle,labelBgPadding:j.labelBgPadding,labelBgBorderRadius:j.labelBgBorderRadius,style:j.style,source:j.source,target:j.target,sourceHandleId:j.sourceHandle,targetHandleId:j.targetHandle,markerEnd:j.markerEnd,markerStart:j.markerStart,sourceX:ft,sourceY:St,targetX:Pt,targetY:ot,sourcePosition:Ce,targetPosition:je,elementsSelectable:P,onContextMenu:p,onMouseEnter:y,onMouseMove:w,onMouseLeave:v,onClick:S,onEdgeDoubleClick:_,onReconnect:R,onReconnectStart:D,onReconnectEnd:B,reconnectRadius:H,rfId:d,ariaLabel:j.ariaLabel,isFocusable:Pe,isReconnectable:We,pathOptions:"pathOptions"in j?j.pathOptions:void 0,interactionWidth:j.interactionWidth,disableKeyboardA11y:T})})))),$):null};uy.displayName="EdgeRenderer";var zb=W.memo(uy);const Ob=n=>`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function Ib({children:n}){const l=$t(Ob);return fe.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:l}},n)}function $b(n){const l=Qg(),s=W.useRef(!1);W.useEffect(()=>{!s.current&&l.viewportInitialized&&n&&(setTimeout(()=>n(l),1),s.current=!0)},[n,l.viewportInitialized])}const Lb={[Be.Left]:Be.Right,[Be.Right]:Be.Left,[Be.Top]:Be.Bottom,[Be.Bottom]:Be.Top},cy=({nodeId:n,handleType:l,style:s,type:d=Lo.Bezier,CustomComponent:f,connectionStatus:g})=>{var F,b,U;const{fromNode:p,handleId:y,toX:w,toY:v,connectionMode:S}=$t(W.useCallback(Y=>({fromNode:Y.nodeInternals.get(n),handleId:Y.connectionHandleId,toX:(Y.connectionPosition.x-Y.transform[0])/Y.transform[2],toY:(Y.connectionPosition.y-Y.transform[1])/Y.transform[2],connectionMode:Y.connectionMode}),[n]),Pn),_=(F=p==null?void 0:p[Zt])==null?void 0:F.handleBounds;let R=_==null?void 0:_[l];if(S===Xl.Loose&&(R=R||(_==null?void 0:_[l==="source"?"target":"source"])),!p||!R)return null;const D=y?R.find(Y=>Y.id===y):R[0],B=D?D.x+D.width/2:(p.width??0)/2,H=D?D.y+D.height/2:p.height??0,$=(((b=p.positionAbsolute)==null?void 0:b.x)??0)+B,T=(((U=p.positionAbsolute)==null?void 0:U.y)??0)+H,N=D==null?void 0:D.position,M=N?Lb[N]:null;if(!N||!M)return null;if(f)return fe.createElement(f,{connectionLineType:d,connectionLineStyle:s,fromNode:p,fromHandle:D,fromX:$,fromY:T,toX:w,toY:v,fromPosition:N,toPosition:M,connectionStatus:g});let P="";const O={sourceX:$,sourceY:T,sourcePosition:N,targetX:w,targetY:v,targetPosition:M};return d===Lo.Bezier?[P]=Gg(O):d===Lo.Step?[P]=jg({...O,borderRadius:0}):d===Lo.SmoothStep?[P]=jg(O):d===Lo.SimpleBezier?[P]=Dx(O):P=`M${$},${T} ${w},${v}`,fe.createElement("path",{d:P,fill:"none",className:"react-flow__connection-path",style:s})};cy.displayName="ConnectionLine";const Fb=n=>({nodeId:n.connectionNodeId,handleType:n.connectionHandleType,nodesConnectable:n.nodesConnectable,connectionStatus:n.connectionStatus,width:n.width,height:n.height});function Hb({containerStyle:n,style:l,type:s,component:d}){const{nodeId:f,handleType:g,nodesConnectable:p,width:y,height:w,connectionStatus:v}=$t(Fb,Pn);return!(f&&g&&y&&p)?null:fe.createElement("svg",{style:n,width:y,height:w,className:"react-flow__edges react-flow__connectionline react-flow__container"},fe.createElement("g",{className:Fn(["react-flow__connection",v])},fe.createElement(cy,{nodeId:f,handleType:g,style:l,type:s,CustomComponent:d,connectionStatus:v})))}function Em(n,l){return W.useRef(null),wn(),W.useMemo(()=>l(n),[n])}const dy=({nodeTypes:n,edgeTypes:l,onMove:s,onMoveStart:d,onMoveEnd:f,onInit:g,onNodeClick:p,onEdgeClick:y,onNodeDoubleClick:w,onEdgeDoubleClick:v,onNodeMouseEnter:S,onNodeMouseMove:_,onNodeMouseLeave:R,onNodeContextMenu:D,onSelectionContextMenu:B,onSelectionStart:H,onSelectionEnd:$,connectionLineType:T,connectionLineStyle:N,connectionLineComponent:M,connectionLineContainerStyle:P,selectionKeyCode:O,selectionOnDrag:F,selectionMode:b,multiSelectionKeyCode:U,panActivationKeyCode:Y,zoomActivationKeyCode:re,deleteKeyCode:se,onlyRenderVisibleElements:le,elementsSelectable:ce,selectNodesOnDrag:j,defaultViewport:q,translateExtent:X,minZoom:te,maxZoom:Q,preventScrolling:C,defaultMarkerColor:L,zoomOnScroll:A,zoomOnPinch:K,panOnScroll:pe,panOnScrollSpeed:ge,panOnScrollMode:ve,zoomOnDoubleClick:Ce,panOnDrag:je,onPaneClick:Pe,onPaneMouseEnter:Te,onPaneMouseMove:We,onPaneMouseLeave:ft,onPaneScroll:St,onPaneContextMenu:Pt,onEdgeContextMenu:ot,onEdgeMouseEnter:ct,onEdgeMouseMove:Lt,onEdgeMouseLeave:Ze,onReconnect:Oe,onReconnectStart:Ft,onReconnectEnd:Dt,reconnectRadius:bt,noDragClassName:Qt,noWheelClassName:dn,noPanClassName:fn,elevateEdgesOnSelect:sn,disableKeyboardA11y:he,nodeOrigin:ke,nodeExtent:Ve,rfId:Je})=>{const _t=Em(n,gb),yt=Em(l,_b);return $b(g),fe.createElement(hb,{onPaneClick:Pe,onPaneMouseEnter:Te,onPaneMouseMove:We,onPaneMouseLeave:ft,onPaneContextMenu:Pt,onPaneScroll:St,deleteKeyCode:se,selectionKeyCode:O,selectionOnDrag:F,selectionMode:b,onSelectionStart:H,onSelectionEnd:$,multiSelectionKeyCode:U,panActivationKeyCode:Y,zoomActivationKeyCode:re,elementsSelectable:ce,onMove:s,onMoveStart:d,onMoveEnd:f,zoomOnScroll:A,zoomOnPinch:K,zoomOnDoubleClick:Ce,panOnScroll:pe,panOnScrollSpeed:ge,panOnScrollMode:ve,panOnDrag:je,defaultViewport:q,translateExtent:X,minZoom:te,maxZoom:Q,onSelectionContextMenu:B,preventScrolling:C,noDragClassName:Qt,noWheelClassName:dn,noPanClassName:fn,disableKeyboardA11y:he},fe.createElement(Ib,null,fe.createElement(zb,{edgeTypes:yt,onEdgeClick:y,onEdgeDoubleClick:v,onlyRenderVisibleElements:le,onEdgeContextMenu:ot,onEdgeMouseEnter:ct,onEdgeMouseMove:Lt,onEdgeMouseLeave:Ze,onReconnect:Oe,onReconnectStart:Ft,onReconnectEnd:Dt,reconnectRadius:bt,defaultMarkerColor:L,noPanClassName:fn,elevateEdgesOnSelect:!!sn,disableKeyboardA11y:he,rfId:Je},fe.createElement(Hb,{style:N,type:T,component:M,containerStyle:P})),fe.createElement("div",{className:"react-flow__edgelabel-renderer"}),fe.createElement(yb,{nodeTypes:_t,onNodeClick:p,onNodeDoubleClick:w,onNodeMouseEnter:S,onNodeMouseMove:_,onNodeMouseLeave:R,onNodeContextMenu:D,selectNodesOnDrag:j,onlyRenderVisibleElements:le,noPanClassName:fn,noDragClassName:Qt,disableKeyboardA11y:he,nodeOrigin:ke,nodeExtent:Ve,rfId:Je})))};dy.displayName="GraphView";var Ub=W.memo(dy);const Mg=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Do={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Mg,nodeExtent:Mg,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Xl.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:mN,isValidConnection:void 0},Bb=()=>R1((n,l)=>({...Do,setNodes:s=>{const{nodeInternals:d,nodeOrigin:f,elevateNodesOnSelect:g}=l();n({nodeInternals:lg(s,d,f,g)})},getNodes:()=>Array.from(l().nodeInternals.values()),setEdges:s=>{const{defaultEdgeOptions:d={}}=l();n({edges:s.map(f=>({...d,...f}))})},setDefaultNodesAndEdges:(s,d)=>{const f=typeof s<"u",g=typeof d<"u",p=f?lg(s,new Map,l().nodeOrigin,l().elevateNodesOnSelect):new Map;n({nodeInternals:p,edges:g?d:[],hasDefaultNodes:f,hasDefaultEdges:g})},updateNodeDimensions:s=>{const{onNodesChange:d,nodeInternals:f,fitViewOnInit:g,fitViewOnInitDone:p,fitViewOnInitOptions:y,domNode:w,nodeOrigin:v}=l(),S=w==null?void 0:w.querySelector(".react-flow__viewport");if(!S)return;const _=window.getComputedStyle(S),{m22:R}=new window.DOMMatrixReadOnly(_.transform),D=s.reduce((H,$)=>{const T=f.get($.id);if(T!=null&&T.hidden)f.set(T.id,{...T,[Zt]:{...T[Zt],handleBounds:void 0}});else if(T){const N=Bg($.nodeElement);!!(N.width&&N.height&&(T.width!==N.width||T.height!==N.height||$.forceUpdate))&&(f.set(T.id,{...T,[Zt]:{...T[Zt],handleBounds:{source:ym(".source",$.nodeElement,R,v),target:ym(".target",$.nodeElement,R,v)}},...N}),H.push({id:T.id,type:"dimensions",dimensions:N}))}return H},[]);Qx(f,v);const B=p||g&&!p&&Jx(l,{initial:!0,...y});n({nodeInternals:new Map(f),fitViewOnInitDone:B}),(D==null?void 0:D.length)>0&&(d==null||d(D))},updateNodePositions:(s,d=!0,f=!1)=>{const{triggerNodeChanges:g}=l(),p=s.map(y=>{const w={id:y.id,type:"position",dragging:f};return d&&(w.positionAbsolute=y.positionAbsolute,w.position=y.position),w});g(p)},triggerNodeChanges:s=>{const{onNodesChange:d,nodeInternals:f,hasDefaultNodes:g,nodeOrigin:p,getNodes:y,elevateNodesOnSelect:w}=l();if(s!=null&&s.length){if(g){const v=ey(s,y()),S=lg(v,f,p,w);n({nodeInternals:S})}d==null||d(s)}},addSelectedNodes:s=>{const{multiSelectionActive:d,edges:f,getNodes:g}=l();let p,y=null;d?p=s.map(w=>$o(w,!0)):(p=Mu(g(),s),y=Mu(f,[])),ph({changedNodes:p,changedEdges:y,get:l,set:n})},addSelectedEdges:s=>{const{multiSelectionActive:d,edges:f,getNodes:g}=l();let p,y=null;d?p=s.map(w=>$o(w,!0)):(p=Mu(f,s),y=Mu(g(),[])),ph({changedNodes:y,changedEdges:p,get:l,set:n})},unselectNodesAndEdges:({nodes:s,edges:d}={})=>{const{edges:f,getNodes:g}=l(),p=s||g(),y=d||f,w=p.map(S=>(S.selected=!1,$o(S.id,!1))),v=y.map(S=>$o(S.id,!1));ph({changedNodes:w,changedEdges:v,get:l,set:n})},setMinZoom:s=>{const{d3Zoom:d,maxZoom:f}=l();d==null||d.scaleExtent([s,f]),n({minZoom:s})},setMaxZoom:s=>{const{d3Zoom:d,minZoom:f}=l();d==null||d.scaleExtent([f,s]),n({maxZoom:s})},setTranslateExtent:s=>{var d;(d=l().d3Zoom)==null||d.translateExtent(s),n({translateExtent:s})},resetSelectedElements:()=>{const{edges:s,getNodes:d}=l(),g=d().filter(y=>y.selected).map(y=>$o(y.id,!1)),p=s.filter(y=>y.selected).map(y=>$o(y.id,!1));ph({changedNodes:g,changedEdges:p,get:l,set:n})},setNodeExtent:s=>{const{nodeInternals:d}=l();d.forEach(f=>{f.positionAbsolute=Wg(f.position,s)}),n({nodeExtent:s,nodeInternals:new Map(d)})},panBy:s=>{const{transform:d,width:f,height:g,d3Zoom:p,d3Selection:y,translateExtent:w}=l();if(!p||!y||!s.x&&!s.y)return!1;const v=Bs.translate(d[0]+s.x,d[1]+s.y).scale(d[2]),S=[[0,0],[f,g]],_=p==null?void 0:p.constrain()(v,S,w);return p.transform(y,_),d[0]!==_.x||d[1]!==_.y||d[2]!==_.k},cancelConnection:()=>n({connectionNodeId:Do.connectionNodeId,connectionHandleId:Do.connectionHandleId,connectionHandleType:Do.connectionHandleType,connectionStatus:Do.connectionStatus,connectionStartHandle:Do.connectionStartHandle,connectionEndHandle:Do.connectionEndHandle}),reset:()=>n({...Do})}),Object.is),fy=({children:n})=>{const l=W.useRef(null);return l.current||(l.current=Bb()),fe.createElement(uN,{value:l.current},n)};fy.displayName="ReactFlowProvider";const hy=({children:n})=>W.useContext(Wh)?fe.createElement(fe.Fragment,null,n):fe.createElement(fy,null,n);hy.displayName="ReactFlowWrapper";const Wb={input:Vx,default:Rg,output:qx,group:Zg},Vb={default:Ih,straight:qg,step:Yg,smoothstep:Vh,simplebezier:Vg},Yb=[0,0],qb=[15,15],Gb={x:0,y:0,zoom:1},Xb={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},py=W.forwardRef(({nodes:n,edges:l,defaultNodes:s,defaultEdges:d,className:f,nodeTypes:g=Wb,edgeTypes:p=Vb,onNodeClick:y,onEdgeClick:w,onInit:v,onMove:S,onMoveStart:_,onMoveEnd:R,onConnect:D,onConnectStart:B,onConnectEnd:H,onClickConnectStart:$,onClickConnectEnd:T,onNodeMouseEnter:N,onNodeMouseMove:M,onNodeMouseLeave:P,onNodeContextMenu:O,onNodeDoubleClick:F,onNodeDragStart:b,onNodeDrag:U,onNodeDragStop:Y,onNodesDelete:re,onEdgesDelete:se,onSelectionChange:le,onSelectionDragStart:ce,onSelectionDrag:j,onSelectionDragStop:q,onSelectionContextMenu:X,onSelectionStart:te,onSelectionEnd:Q,connectionMode:C=Xl.Strict,connectionLineType:L=Lo.Bezier,connectionLineStyle:A,connectionLineComponent:K,connectionLineContainerStyle:pe,deleteKeyCode:ge="Backspace",selectionKeyCode:ve="Shift",selectionOnDrag:Ce=!1,selectionMode:je=Ad.Full,panActivationKeyCode:Pe="Space",multiSelectionKeyCode:Te=zh()?"Meta":"Control",zoomActivationKeyCode:We=zh()?"Meta":"Control",snapToGrid:ft=!1,snapGrid:St=qb,onlyRenderVisibleElements:Pt=!1,selectNodesOnDrag:ot=!0,nodesDraggable:ct,nodesConnectable:Lt,nodesFocusable:Ze,nodeOrigin:Oe=Yb,edgesFocusable:Ft,edgesUpdatable:Dt,elementsSelectable:bt,defaultViewport:Qt=Gb,minZoom:dn=.5,maxZoom:fn=2,translateExtent:sn=Mg,preventScrolling:he=!0,nodeExtent:ke,defaultMarkerColor:Ve="#b1b1b7",zoomOnScroll:Je=!0,zoomOnPinch:_t=!0,panOnScroll:yt=!1,panOnScrollSpeed:on=.5,panOnScrollMode:Rn=Wl.Free,zoomOnDoubleClick:Ee=!0,panOnDrag:He=!0,onPaneClick:et,onPaneMouseEnter:qe,onPaneMouseMove:ln,onPaneMouseLeave:hn,onPaneScroll:pn,onPaneContextMenu:Hn,children:sr,onEdgeContextMenu:Fr,onEdgeDoubleClick:Kl,onEdgeMouseEnter:Zl,onEdgeMouseMove:Ql,onEdgeMouseLeave:Uo,onEdgeUpdate:Bo,onEdgeUpdateStart:Jl,onEdgeUpdateEnd:os,onReconnect:ls,onReconnectStart:as,onReconnectEnd:Wo,reconnectRadius:us=10,edgeUpdaterRadius:Ys=10,onNodesChange:qs,onEdgesChange:Vo,noDragClassName:Fu="nodrag",noWheelClassName:Hu="nowheel",noPanClassName:ea="nopan",fitView:li=!1,fitViewOptions:Yo,connectOnClick:ta=!0,attributionPosition:Uu,proOptions:na,defaultEdgeOptions:ra,elevateNodesOnSelect:ia=!0,elevateEdgesOnSelect:sa=!1,disableKeyboardA11y:cs=!1,autoPanOnConnect:Bu=!0,autoPanOnNodeDrag:kt=!0,connectionRadius:Wu=20,isValidConnection:qo,onError:oa,style:ds,id:Go,nodeDragThreshold:Xo,...Gs},or)=>{const Ko=Go||"1";return fe.createElement("div",{...Gs,style:{...ds,...Xb},ref:or,className:Fn(["react-flow",f]),"data-testid":"rf__wrapper",id:Go},fe.createElement(hy,null,fe.createElement(Ub,{onInit:v,onMove:S,onMoveStart:_,onMoveEnd:R,onNodeClick:y,onEdgeClick:w,onNodeMouseEnter:N,onNodeMouseMove:M,onNodeMouseLeave:P,onNodeContextMenu:O,onNodeDoubleClick:F,nodeTypes:g,edgeTypes:p,connectionLineType:L,connectionLineStyle:A,connectionLineComponent:K,connectionLineContainerStyle:pe,selectionKeyCode:ve,selectionOnDrag:Ce,selectionMode:je,deleteKeyCode:ge,multiSelectionKeyCode:Te,panActivationKeyCode:Pe,zoomActivationKeyCode:We,onlyRenderVisibleElements:Pt,selectNodesOnDrag:ot,defaultViewport:Qt,translateExtent:sn,minZoom:dn,maxZoom:fn,preventScrolling:he,zoomOnScroll:Je,zoomOnPinch:_t,zoomOnDoubleClick:Ee,panOnScroll:yt,panOnScrollSpeed:on,panOnScrollMode:Rn,panOnDrag:He,onPaneClick:et,onPaneMouseEnter:qe,onPaneMouseMove:ln,onPaneMouseLeave:hn,onPaneScroll:pn,onPaneContextMenu:Hn,onSelectionContextMenu:X,onSelectionStart:te,onSelectionEnd:Q,onEdgeContextMenu:Fr,onEdgeDoubleClick:Kl,onEdgeMouseEnter:Zl,onEdgeMouseMove:Ql,onEdgeMouseLeave:Uo,onReconnect:ls??Bo,onReconnectStart:as??Jl,onReconnectEnd:Wo??os,reconnectRadius:us??Ys,defaultMarkerColor:Ve,noDragClassName:Fu,noWheelClassName:Hu,noPanClassName:ea,elevateEdgesOnSelect:sa,rfId:Ko,disableKeyboardA11y:cs,nodeOrigin:Oe,nodeExtent:ke}),fe.createElement(LN,{nodes:n,edges:l,defaultNodes:s,defaultEdges:d,onConnect:D,onConnectStart:B,onConnectEnd:H,onClickConnectStart:$,onClickConnectEnd:T,nodesDraggable:ct,nodesConnectable:Lt,nodesFocusable:Ze,edgesFocusable:Ft,edgesUpdatable:Dt,elementsSelectable:bt,elevateNodesOnSelect:ia,minZoom:dn,maxZoom:fn,nodeExtent:ke,onNodesChange:qs,onEdgesChange:Vo,snapToGrid:ft,snapGrid:St,connectionMode:C,translateExtent:sn,connectOnClick:ta,defaultEdgeOptions:ra,fitView:li,fitViewOptions:Yo,onNodesDelete:re,onEdgesDelete:se,onNodeDragStart:b,onNodeDrag:U,onNodeDragStop:Y,onSelectionDrag:j,onSelectionDragStart:ce,onSelectionDragStop:q,noPanClassName:ea,nodeOrigin:Oe,rfId:Ko,autoPanOnConnect:Bu,autoPanOnNodeDrag:kt,onError:oa,connectionRadius:Wu,isValidConnection:qo,nodeDragThreshold:Xo}),fe.createElement(IN,{onSelectionChange:le}),sr,fe.createElement(dN,{proOptions:na,position:Uu}),fe.createElement(WN,{rfId:Ko,disableKeyboardA11y:cs})))});py.displayName="ReactFlow";const gy=({id:n,x:l,y:s,width:d,height:f,style:g,color:p,strokeColor:y,strokeWidth:w,className:v,borderRadius:S,shapeRendering:_,onClick:R,selected:D})=>{const{background:B,backgroundColor:H}=g||{},$=p||B||H;return fe.createElement("rect",{className:Fn(["react-flow__minimap-node",{selected:D},v]),x:l,y:s,rx:S,ry:S,width:d,height:f,fill:$,stroke:y,strokeWidth:w,shapeRendering:_,onClick:R?T=>R(T,n):void 0})};gy.displayName="MiniMapNode";var Kb=W.memo(gy);const Zb=n=>n.nodeOrigin,Qb=n=>n.getNodes().filter(l=>!l.hidden&&l.width&&l.height),dg=n=>n instanceof Function?n:()=>n;function Jb({nodeStrokeColor:n="transparent",nodeColor:l="#e2e2e2",nodeClassName:s="",nodeBorderRadius:d=5,nodeStrokeWidth:f=2,nodeComponent:g=Kb,onClick:p}){const y=$t(Qb,Pn),w=$t(Zb),v=dg(l),S=dg(n),_=dg(s),R=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return fe.createElement(fe.Fragment,null,y.map(D=>{const{x:B,y:H}=Yl(D,w).positionAbsolute;return fe.createElement(g,{key:D.id,x:B,y:H,width:D.width,height:D.height,style:D.style,selected:D.selected,className:_(D),color:v(D),borderRadius:d,strokeColor:S(D),strokeWidth:f,shapeRendering:R,onClick:p,id:D.id})}))}var eE=W.memo(Jb);const tE=200,nE=150,rE=n=>{const l=n.getNodes(),s={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:s,boundingRect:l.length>0?pN(Yh(l,n.nodeOrigin),s):s,rfId:n.rfId}},iE="react-flow__minimap-desc";function my({style:n,className:l,nodeStrokeColor:s="transparent",nodeColor:d="#e2e2e2",nodeClassName:f="",nodeBorderRadius:g=5,nodeStrokeWidth:p=2,nodeComponent:y,maskColor:w="rgb(240, 240, 240, 0.6)",maskStrokeColor:v="none",maskStrokeWidth:S=1,position:_="bottom-right",onClick:R,onNodeClick:D,pannable:B=!1,zoomable:H=!1,ariaLabel:$="React Flow mini map",inversePan:T=!1,zoomStep:N=10,offsetScale:M=5}){const P=wn(),O=W.useRef(null),{boundingRect:F,viewBB:b,rfId:U}=$t(rE,Pn),Y=(n==null?void 0:n.width)??tE,re=(n==null?void 0:n.height)??nE,se=F.width/Y,le=F.height/re,ce=Math.max(se,le),j=ce*Y,q=ce*re,X=M*ce,te=F.x-(j-F.width)/2-X,Q=F.y-(q-F.height)/2-X,C=j+X*2,L=q+X*2,A=`${iE}-${U}`,K=W.useRef(0);K.current=ce,W.useEffect(()=>{if(O.current){const ve=si(O.current),Ce=Te=>{const{transform:We,d3Selection:ft,d3Zoom:St}=P.getState();if(Te.sourceEvent.type!=="wheel"||!ft||!St)return;const Pt=-Te.sourceEvent.deltaY*(Te.sourceEvent.deltaMode===1?.05:Te.sourceEvent.deltaMode?1:.002)*N,ot=We[2]*Math.pow(2,Pt);St.scaleTo(ft,ot)},je=Te=>{const{transform:We,d3Selection:ft,d3Zoom:St,translateExtent:Pt,width:ot,height:ct}=P.getState();if(Te.sourceEvent.type!=="mousemove"||!ft||!St)return;const Lt=K.current*Math.max(1,We[2])*(T?-1:1),Ze={x:We[0]-Te.sourceEvent.movementX*Lt,y:We[1]-Te.sourceEvent.movementY*Lt},Oe=[[0,0],[ot,ct]],Ft=Bs.translate(Ze.x,Ze.y).scale(We[2]),Dt=St.constrain()(Ft,Oe,Pt);St.transform(ft,Dt)},Pe=bx().on("zoom",B?je:null).on("zoom.wheel",H?Ce:null);return ve.call(Pe),()=>{ve.on("zoom",null)}}},[B,H,T,N]);const pe=R?ve=>{const Ce=Ei(ve);R(ve,{x:Ce[0],y:Ce[1]})}:void 0,ge=D?(ve,Ce)=>{const je=P.getState().nodeInternals.get(Ce);D(ve,je)}:void 0;return fe.createElement(Ug,{position:_,style:n,className:Fn(["react-flow__minimap",l]),"data-testid":"rf__minimap"},fe.createElement("svg",{width:Y,height:re,viewBox:`${te} ${Q} ${C} ${L}`,role:"img","aria-labelledby":A,ref:O,onClick:pe},$&&fe.createElement("title",{id:A},$),fe.createElement(eE,{onClick:ge,nodeColor:d,nodeStrokeColor:s,nodeBorderRadius:g,nodeClassName:f,nodeStrokeWidth:p,nodeComponent:y}),fe.createElement("path",{className:"react-flow__minimap-mask",d:`M${te-X},${Q-X}h${C+X*2}v${L+X*2}h${-C-X*2}z
        M${b.x},${b.y}h${b.width}v${b.height}h${-b.width}z`,fill:w,fillRule:"evenodd",stroke:v,strokeWidth:S,pointerEvents:"none"})))}my.displayName="MiniMap";var sE=W.memo(my);function oE(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},fe.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function lE(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},fe.createElement("path",{d:"M0 0h32v4.2H0z"}))}function aE(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},fe.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function uE(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},fe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function cE(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},fe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Nd=({children:n,className:l,...s})=>fe.createElement("button",{type:"button",className:Fn(["react-flow__controls-button",l]),...s},n);Nd.displayName="ControlButton";const dE=n=>({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]<=n.minZoom,maxZoomReached:n.transform[2]>=n.maxZoom}),xy=({style:n,showZoom:l=!0,showFitView:s=!0,showInteractive:d=!0,fitViewOptions:f,onZoomIn:g,onZoomOut:p,onFitView:y,onInteractiveChange:w,className:v,children:S,position:_="bottom-left"})=>{const R=wn(),[D,B]=W.useState(!1),{isInteractive:H,minZoomReached:$,maxZoomReached:T}=$t(dE,Pn),{zoomIn:N,zoomOut:M,fitView:P}=Qg();if(W.useEffect(()=>{B(!0)},[]),!D)return null;const O=()=>{N(),g==null||g()},F=()=>{M(),p==null||p()},b=()=>{P(f),y==null||y()},U=()=>{R.setState({nodesDraggable:!H,nodesConnectable:!H,elementsSelectable:!H}),w==null||w(!H)};return fe.createElement(Ug,{className:Fn(["react-flow__controls",v]),position:_,style:n,"data-testid":"rf__controls"},l&&fe.createElement(fe.Fragment,null,fe.createElement(Nd,{onClick:O,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:T},fe.createElement(oE,null)),fe.createElement(Nd,{onClick:F,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:$},fe.createElement(lE,null))),s&&fe.createElement(Nd,{className:"react-flow__controls-fitview",onClick:b,title:"fit view","aria-label":"fit view"},fe.createElement(aE,null)),d&&fe.createElement(Nd,{className:"react-flow__controls-interactive",onClick:U,title:"toggle interactivity","aria-label":"toggle interactivity"},H?fe.createElement(cE,null):fe.createElement(uE,null)),S)};xy.displayName="Controls";var fE=W.memo(xy),ki;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(ki||(ki={}));function hE({color:n,dimensions:l,lineWidth:s}){return fe.createElement("path",{stroke:n,strokeWidth:s,d:`M${l[0]/2} 0 V${l[1]} M0 ${l[1]/2} H${l[0]}`})}function pE({color:n,radius:l}){return fe.createElement("circle",{cx:l,cy:l,r:l,fill:n})}const gE={[ki.Dots]:"#91919a",[ki.Lines]:"#eee",[ki.Cross]:"#e2e2e2"},mE={[ki.Dots]:1,[ki.Lines]:1,[ki.Cross]:6},xE=n=>({transform:n.transform,patternId:`pattern-${n.rfId}`});function yy({id:n,variant:l=ki.Dots,gap:s=20,size:d,lineWidth:f=1,offset:g=2,color:p,style:y,className:w}){const v=W.useRef(null),{transform:S,patternId:_}=$t(xE,Pn),R=p||gE[l],D=d||mE[l],B=l===ki.Dots,H=l===ki.Cross,$=Array.isArray(s)?s:[s,s],T=[$[0]*S[2]||1,$[1]*S[2]||1],N=D*S[2],M=H?[N,N]:T,P=B?[N/g,N/g]:[M[0]/g,M[1]/g];return fe.createElement("svg",{className:Fn(["react-flow__background",w]),style:{...y,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:v,"data-testid":"rf__background"},fe.createElement("pattern",{id:_+n,x:S[0]%T[0],y:S[1]%T[1],width:T[0],height:T[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${P[0]},-${P[1]})`},B?fe.createElement(pE,{color:R,radius:N/g}):fe.createElement(hE,{dimensions:M,color:R,lineWidth:f})),fe.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${_+n})`}))}yy.displayName="Background";var yE=W.memo(yy),bd={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var vE=bd.exports,Cm;function wE(){return Cm||(Cm=1,function(n,l){(function(){var s,d="4.17.21",f=200,g="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",p="Expected a function",y="Invalid `variable` option passed into `_.template`",w="__lodash_hash_undefined__",v=500,S="__lodash_placeholder__",_=1,R=2,D=4,B=1,H=2,$=1,T=2,N=4,M=8,P=16,O=32,F=64,b=128,U=256,Y=512,re=30,se="...",le=800,ce=16,j=1,q=2,X=3,te=1/0,Q=9007199254740991,C=17976931348623157e292,L=NaN,A=4294967295,K=A-1,pe=A>>>1,ge=[["ary",b],["bind",$],["bindKey",T],["curry",M],["curryRight",P],["flip",Y],["partial",O],["partialRight",F],["rearg",U]],ve="[object Arguments]",Ce="[object Array]",je="[object AsyncFunction]",Pe="[object Boolean]",Te="[object Date]",We="[object DOMException]",ft="[object Error]",St="[object Function]",Pt="[object GeneratorFunction]",ot="[object Map]",ct="[object Number]",Lt="[object Null]",Ze="[object Object]",Oe="[object Promise]",Ft="[object Proxy]",Dt="[object RegExp]",bt="[object Set]",Qt="[object String]",dn="[object Symbol]",fn="[object Undefined]",sn="[object WeakMap]",he="[object WeakSet]",ke="[object ArrayBuffer]",Ve="[object DataView]",Je="[object Float32Array]",_t="[object Float64Array]",yt="[object Int8Array]",on="[object Int16Array]",Rn="[object Int32Array]",Ee="[object Uint8Array]",He="[object Uint8ClampedArray]",et="[object Uint16Array]",qe="[object Uint32Array]",ln=/\b__p \+= '';/g,hn=/\b(__p \+=) '' \+/g,pn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Hn=/&(?:amp|lt|gt|quot|#39);/g,sr=/[&<>"']/g,Fr=RegExp(Hn.source),Kl=RegExp(sr.source),Zl=/<%-([\s\S]+?)%>/g,Ql=/<%([\s\S]+?)%>/g,Uo=/<%=([\s\S]+?)%>/g,Bo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jl=/^\w*$/,os=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ls=/[\\^$.*+?()[\]{}|]/g,as=RegExp(ls.source),Wo=/^\s+/,us=/\s/,Ys=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,qs=/\{\n\/\* \[wrapped with (.+)\] \*/,Vo=/,? & /,Fu=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Hu=/[()=,{}\[\]\/\s]/,ea=/\\(\\)?/g,li=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Yo=/\w*$/,ta=/^[-+]0x[0-9a-f]+$/i,Uu=/^0b[01]+$/i,na=/^\[object .+?Constructor\]$/,ra=/^0o[0-7]+$/i,ia=/^(?:0|[1-9]\d*)$/,sa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,cs=/($^)/,Bu=/['\n\r\u2028\u2029\\]/g,kt="\\ud800-\\udfff",Wu="\\u0300-\\u036f",qo="\\ufe20-\\ufe2f",oa="\\u20d0-\\u20ff",ds=Wu+qo+oa,Go="\\u2700-\\u27bf",Xo="a-z\\xdf-\\xf6\\xf8-\\xff",Gs="\\xac\\xb1\\xd7\\xf7",or="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ko="\\u2000-\\u206f",Er=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Id="A-Z\\xc0-\\xd6\\xd8-\\xde",$d="\\ufe0e\\ufe0f",Ld=Gs+or+Ko+Er,Xs="[']",la="["+kt+"]",Ks="["+Ld+"]",fs="["+ds+"]",Fd="\\d+",Xh="["+Go+"]",aa="["+Xo+"]",Vu="[^"+kt+Ld+Fd+Go+Xo+Id+"]",Zo="\\ud83c[\\udffb-\\udfff]",Qo="(?:"+fs+"|"+Zo+")",Hd="[^"+kt+"]",Jo="(?:\\ud83c[\\udde6-\\uddff]){2}",vt="[\\ud800-\\udbff][\\udc00-\\udfff]",hs="["+Id+"]",Yu="\\u200d",ua="(?:"+aa+"|"+Vu+")",Ud="(?:"+hs+"|"+Vu+")",qu="(?:"+Xs+"(?:d|ll|m|re|s|t|ve))?",Gu="(?:"+Xs+"(?:D|LL|M|RE|S|T|VE))?",ca=Qo+"?",el="["+$d+"]?",Ti="(?:"+Yu+"(?:"+[Hd,Jo,vt].join("|")+")"+el+ca+")*",Pi="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ri="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Zs=el+ca+Ti,tl="(?:"+[Xh,Jo,vt].join("|")+")"+Zs,Ai="(?:"+[Hd+fs+"?",fs,Jo,vt,la].join("|")+")",Kh=RegExp(Xs,"g"),Bd=RegExp(fs,"g"),ps=RegExp(Zo+"(?="+Zo+")|"+Ai+Zs,"g"),Zh=RegExp([hs+"?"+aa+"+"+qu+"(?="+[Ks,hs,"$"].join("|")+")",Ud+"+"+Gu+"(?="+[Ks,hs+ua,"$"].join("|")+")",hs+"?"+ua+"+"+qu,hs+"+"+Gu,Ri,Pi,Fd,tl].join("|"),"g"),Wd=RegExp("["+Yu+kt+ds+$d+"]"),da=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Vd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qh=-1,Nt={};Nt[Je]=Nt[_t]=Nt[yt]=Nt[on]=Nt[Rn]=Nt[Ee]=Nt[He]=Nt[et]=Nt[qe]=!0,Nt[ve]=Nt[Ce]=Nt[ke]=Nt[Pe]=Nt[Ve]=Nt[Te]=Nt[ft]=Nt[St]=Nt[ot]=Nt[ct]=Nt[Ze]=Nt[Dt]=Nt[bt]=Nt[Qt]=Nt[sn]=!1;var wt={};wt[ve]=wt[Ce]=wt[ke]=wt[Ve]=wt[Pe]=wt[Te]=wt[Je]=wt[_t]=wt[yt]=wt[on]=wt[Rn]=wt[ot]=wt[ct]=wt[Ze]=wt[Dt]=wt[bt]=wt[Qt]=wt[dn]=wt[Ee]=wt[He]=wt[et]=wt[qe]=!0,wt[ft]=wt[St]=wt[sn]=!1;var Qs={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},fa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Jh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ep={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Xu=parseFloat,ha=parseInt,pa=typeof sh=="object"&&sh&&sh.Object===Object&&sh,Yd=typeof self=="object"&&self&&self.Object===Object&&self,zt=pa||Yd||Function("return this")(),nl=l&&!l.nodeType&&l,Hr=nl&&!0&&n&&!n.nodeType&&n,Ku=Hr&&Hr.exports===nl,Js=Ku&&pa.process,An=function(){try{var ne=Hr&&Hr.require&&Hr.require("util").types;return ne||Js&&Js.binding&&Js.binding("util")}catch{}}(),Zu=An&&An.isArrayBuffer,Un=An&&An.isDate,gs=An&&An.isMap,ga=An&&An.isRegExp,eo=An&&An.isSet,qd=An&&An.isTypedArray;function Mn(ne,me,ue){switch(ue.length){case 0:return ne.call(me);case 1:return ne.call(me,ue[0]);case 2:return ne.call(me,ue[0],ue[1]);case 3:return ne.call(me,ue[0],ue[1],ue[2])}return ne.apply(me,ue)}function Qu(ne,me,ue,Ae){for(var Qe=-1,gt=ne==null?0:ne.length;++Qe<gt;){var qt=ne[Qe];me(Ae,qt,ue(qt),ne)}return Ae}function Sn(ne,me){for(var ue=-1,Ae=ne==null?0:ne.length;++ue<Ae&&me(ne[ue],ue,ne)!==!1;);return ne}function ma(ne,me){for(var ue=ne==null?0:ne.length;ue--&&me(ne[ue],ue,ne)!==!1;);return ne}function Ju(ne,me){for(var ue=-1,Ae=ne==null?0:ne.length;++ue<Ae;)if(!me(ne[ue],ue,ne))return!1;return!0}function Mi(ne,me){for(var ue=-1,Ae=ne==null?0:ne.length,Qe=0,gt=[];++ue<Ae;){var qt=ne[ue];me(qt,ue,ne)&&(gt[Qe++]=qt)}return gt}function xa(ne,me){var ue=ne==null?0:ne.length;return!!ue&&to(ne,me,0)>-1}function ec(ne,me,ue){for(var Ae=-1,Qe=ne==null?0:ne.length;++Ae<Qe;)if(ue(me,ne[Ae]))return!0;return!1}function jt(ne,me){for(var ue=-1,Ae=ne==null?0:ne.length,Qe=Array(Ae);++ue<Ae;)Qe[ue]=me(ne[ue],ue,ne);return Qe}function Di(ne,me){for(var ue=-1,Ae=me.length,Qe=ne.length;++ue<Ae;)ne[Qe+ue]=me[ue];return ne}function tc(ne,me,ue,Ae){var Qe=-1,gt=ne==null?0:ne.length;for(Ae&&gt&&(ue=ne[++Qe]);++Qe<gt;)ue=me(ue,ne[Qe],Qe,ne);return ue}function tp(ne,me,ue,Ae){var Qe=ne==null?0:ne.length;for(Ae&&Qe&&(ue=ne[--Qe]);Qe--;)ue=me(ue,ne[Qe],Qe,ne);return ue}function nc(ne,me){for(var ue=-1,Ae=ne==null?0:ne.length;++ue<Ae;)if(me(ne[ue],ue,ne))return!0;return!1}var np=ic("length");function Gd(ne){return ne.split("")}function rp(ne){return ne.match(Fu)||[]}function Xd(ne,me,ue){var Ae;return ue(ne,function(Qe,gt,qt){if(me(Qe,gt,qt))return Ae=gt,!1}),Ae}function ya(ne,me,ue,Ae){for(var Qe=ne.length,gt=ue+(Ae?1:-1);Ae?gt--:++gt<Qe;)if(me(ne[gt],gt,ne))return gt;return-1}function to(ne,me,ue){return me===me?Sa(ne,me,ue):ya(ne,Kd,ue)}function rc(ne,me,ue,Ae){for(var Qe=ue-1,gt=ne.length;++Qe<gt;)if(Ae(ne[Qe],me))return Qe;return-1}function Kd(ne){return ne!==ne}function Zd(ne,me){var ue=ne==null?0:ne.length;return ue?sc(ne,me)/ue:L}function ic(ne){return function(me){return me==null?s:me[ne]}}function va(ne){return function(me){return ne==null?s:ne[me]}}function Qd(ne,me,ue,Ae,Qe){return Qe(ne,function(gt,qt,Et){ue=Ae?(Ae=!1,gt):me(ue,gt,qt,Et)}),ue}function ip(ne,me){var ue=ne.length;for(ne.sort(me);ue--;)ne[ue]=ne[ue].value;return ne}function sc(ne,me){for(var ue,Ae=-1,Qe=ne.length;++Ae<Qe;){var gt=me(ne[Ae]);gt!==s&&(ue=ue===s?gt:ue+gt)}return ue}function oc(ne,me){for(var ue=-1,Ae=Array(ne);++ue<ne;)Ae[ue]=me(ue);return Ae}function sp(ne,me){return jt(me,function(ue){return[ue,ne[ue]]})}function Jd(ne){return ne&&ne.slice(0,_a(ne)+1).replace(Wo,"")}function Kn(ne){return function(me){return ne(me)}}function rl(ne,me){return jt(me,function(ue){return ne[ue]})}function ai(ne,me){return ne.has(me)}function ef(ne,me){for(var ue=-1,Ae=ne.length;++ue<Ae&&to(me,ne[ue],0)>-1;);return ue}function lc(ne,me){for(var ue=ne.length;ue--&&to(me,ne[ue],0)>-1;);return ue}function tf(ne,me){for(var ue=ne.length,Ae=0;ue--;)ne[ue]===me&&++Ae;return Ae}var nf=va(Qs),rf=va(fa);function sf(ne){return"\\"+ep[ne]}function no(ne,me){return ne==null?s:ne[me]}function ro(ne){return Wd.test(ne)}function op(ne){return da.test(ne)}function lp(ne){for(var me,ue=[];!(me=ne.next()).done;)ue.push(me.value);return ue}function wa(ne){var me=-1,ue=Array(ne.size);return ne.forEach(function(Ae,Qe){ue[++me]=[Qe,Ae]}),ue}function ac(ne,me){return function(ue){return ne(me(ue))}}function lr(ne,me){for(var ue=-1,Ae=ne.length,Qe=0,gt=[];++ue<Ae;){var qt=ne[ue];(qt===me||qt===S)&&(ne[ue]=S,gt[Qe++]=ue)}return gt}function zi(ne){var me=-1,ue=Array(ne.size);return ne.forEach(function(Ae){ue[++me]=Ae}),ue}function ap(ne){var me=-1,ue=Array(ne.size);return ne.forEach(function(Ae){ue[++me]=[Ae,Ae]}),ue}function Sa(ne,me,ue){for(var Ae=ue-1,Qe=ne.length;++Ae<Qe;)if(ne[Ae]===me)return Ae;return-1}function up(ne,me,ue){for(var Ae=ue+1;Ae--;)if(ne[Ae]===me)return Ae;return Ae}function ms(ne){return ro(ne)?lf(ne):np(ne)}function Zn(ne){return ro(ne)?af(ne):Gd(ne)}function _a(ne){for(var me=ne.length;me--&&us.test(ne.charAt(me)););return me}var of=va(Jh);function lf(ne){for(var me=ps.lastIndex=0;ps.test(ne);)++me;return me}function af(ne){return ne.match(ps)||[]}function cp(ne){return ne.match(Zh)||[]}var dp=function ne(me){me=me==null?zt:io.defaults(zt.Object(),me,io.pick(zt,Vd));var ue=me.Array,Ae=me.Date,Qe=me.Error,gt=me.Function,qt=me.Math,Et=me.Object,il=me.RegExp,fp=me.String,ar=me.TypeError,ui=ue.prototype,uc=gt.prototype,Ur=Et.prototype,so=me["__core-js_shared__"],sl=uc.toString,mt=Ur.hasOwnProperty,oo=0,Na=function(){var r=/[^.]+$/.exec(so&&so.keys&&so.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),ol=Ur.toString,ba=sl.call(Et),uf=zt._,cf=il("^"+sl.call(mt).replace(ls,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ll=Ku?me.Buffer:s,ci=me.Symbol,al=me.Uint8Array,cc=ll?ll.allocUnsafe:s,Cr=ac(Et.getPrototypeOf,Et),Ea=Et.create,Ca=Ur.propertyIsEnumerable,ka=ui.splice,df=ci?ci.isConcatSpreadable:s,di=ci?ci.iterator:s,xs=ci?ci.toStringTag:s,ul=function(){try{var r=Yi(Et,"defineProperty");return r({},"",{}),r}catch{}}(),ff=me.clearTimeout!==zt.clearTimeout&&me.clearTimeout,Rt=Ae&&Ae.now!==zt.Date.now&&Ae.now,dc=me.setTimeout!==zt.setTimeout&&me.setTimeout,ys=qt.ceil,Oi=qt.floor,ja=Et.getOwnPropertySymbols,fc=ll?ll.isBuffer:s,lo=me.isFinite,Ta=ui.join,ao=ac(Et.keys,Et),Gt=qt.max,_n=qt.min,hp=Ae.now,hf=me.parseInt,cl=qt.random,Pa=ui.reverse,dl=Yi(me,"DataView"),vs=Yi(me,"Map"),fl=Yi(me,"Promise"),Ii=Yi(me,"Set"),hl=Yi(me,"WeakMap"),uo=Yi(Et,"create"),Ra=hl&&new hl,co={},hc=qi(dl),$i=qi(vs),pf=qi(fl),fo=qi(Ii),Br=qi(hl),Li=ci?ci.prototype:s,Qn=Li?Li.valueOf:s,Aa=Li?Li.toString:s;function z(r){if(Kt(r)&&!nt(r)&&!(r instanceof tt)){if(r instanceof Nn)return r;if(mt.call(r,"__wrapped__"))return Uf(r)}return new Nn(r)}var ho=function(){function r(){}return function(i){if(!Yt(i))return{};if(Ea)return Ea(i);r.prototype=i;var u=new r;return r.prototype=s,u}}();function Wr(){}function Nn(r,i){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=s}z.templateSettings={escape:Zl,evaluate:Ql,interpolate:Uo,variable:"",imports:{_:z}},z.prototype=Wr.prototype,z.prototype.constructor=z,Nn.prototype=ho(Wr.prototype),Nn.prototype.constructor=Nn;function tt(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=A,this.__views__=[]}function Ma(){var r=new tt(this.__wrapped__);return r.__actions__=zn(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=zn(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=zn(this.__views__),r}function pc(){if(this.__filtered__){var r=new tt(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function po(){var r=this.__wrapped__.value(),i=this.__dir__,u=nt(r),x=i<0,E=u?r.length:0,I=Uc(0,E,this.__views__),G=I.start,J=I.end,ie=J-G,xe=x?J:G-1,ye=this.__iteratees__,_e=ye.length,Re=0,Le=_n(ie,this.__takeCount__);if(!u||!x&&E==ie&&Le==ie)return _o(r,this.__actions__);var Xe=[];e:for(;ie--&&Re<Le;){xe+=i;for(var st=-1,Ke=r[xe];++st<_e;){var dt=ye[st],pt=dt.iteratee,Or=dt.type,rr=pt(Ke);if(Or==q)Ke=rr;else if(!rr){if(Or==j)continue e;break e}}Xe[Re++]=Ke}return Xe}tt.prototype=ho(Wr.prototype),tt.prototype.constructor=tt;function Bn(r){var i=-1,u=r==null?0:r.length;for(this.clear();++i<u;){var x=r[i];this.set(x[0],x[1])}}function At(){this.__data__=uo?uo(null):{},this.size=0}function Tt(r){var i=this.has(r)&&delete this.__data__[r];return this.size-=i?1:0,i}function Fi(r){var i=this.__data__;if(uo){var u=i[r];return u===w?s:u}return mt.call(i,r)?i[r]:s}function bn(r){var i=this.__data__;return uo?i[r]!==s:mt.call(i,r)}function Wn(r,i){var u=this.__data__;return this.size+=this.has(r)?0:1,u[r]=uo&&i===s?w:i,this}Bn.prototype.clear=At,Bn.prototype.delete=Tt,Bn.prototype.get=Fi,Bn.prototype.has=bn,Bn.prototype.set=Wn;function Dn(r){var i=-1,u=r==null?0:r.length;for(this.clear();++i<u;){var x=r[i];this.set(x[0],x[1])}}function go(){this.__data__=[],this.size=0}function Vn(r){var i=this.__data__,u=Cn(i,r);if(u<0)return!1;var x=i.length-1;return u==x?i.pop():ka.call(i,u,1),--this.size,!0}function Da(r){var i=this.__data__,u=Cn(i,r);return u<0?s:i[u][1]}function gf(r){return Cn(this.__data__,r)>-1}function mf(r,i){var u=this.__data__,x=Cn(u,r);return x<0?(++this.size,u.push([r,i])):u[x][1]=i,this}Dn.prototype.clear=go,Dn.prototype.delete=Vn,Dn.prototype.get=Da,Dn.prototype.has=gf,Dn.prototype.set=mf;function ur(r){var i=-1,u=r==null?0:r.length;for(this.clear();++i<u;){var x=r[i];this.set(x[0],x[1])}}function xf(){this.size=0,this.__data__={hash:new Bn,map:new(vs||Dn),string:new Bn}}function fi(r){var i=Tl(this,r).delete(r);return this.size-=i?1:0,i}function za(r){return Tl(this,r).get(r)}function gc(r){return Tl(this,r).has(r)}function yf(r,i){var u=Tl(this,r),x=u.size;return u.set(r,i),this.size+=u.size==x?0:1,this}ur.prototype.clear=xf,ur.prototype.delete=fi,ur.prototype.get=za,ur.prototype.has=gc,ur.prototype.set=yf;function ws(r){var i=-1,u=r==null?0:r.length;for(this.__data__=new ur;++i<u;)this.add(r[i])}function Hi(r){return this.__data__.set(r,w),this}function mo(r){return this.__data__.has(r)}ws.prototype.add=ws.prototype.push=Hi,ws.prototype.has=mo;function En(r){var i=this.__data__=new Dn(r);this.size=i.size}function Oa(){this.__data__=new Dn,this.size=0}function Ia(r){var i=this.__data__,u=i.delete(r);return this.size=i.size,u}function cr(r){return this.__data__.get(r)}function dr(r){return this.__data__.has(r)}function Ss(r,i){var u=this.__data__;if(u instanceof Dn){var x=u.__data__;if(!vs||x.length<f-1)return x.push([r,i]),this.size=++u.size,this;u=this.__data__=new ur(x)}return u.set(r,i),this.size=u.size,this}En.prototype.clear=Oa,En.prototype.delete=Ia,En.prototype.get=cr,En.prototype.has=dr,En.prototype.set=Ss;function Vr(r,i){var u=nt(r),x=!u&&Hl(r),E=!u&&!x&&Ao(r),I=!u&&!x&&!E&&Cu(r),G=u||x||E||I,J=G?oc(r.length,fp):[],ie=J.length;for(var xe in r)(i||mt.call(r,xe))&&!(G&&(xe=="length"||E&&(xe=="offset"||xe=="parent")||I&&(xe=="buffer"||xe=="byteLength"||xe=="byteOffset")||It(xe,ie)))&&J.push(xe);return J}function Yr(r){var i=r.length;return i?r[wo(0,i-1)]:s}function _s(r,i){return uu(zn(r),hi(i,0,r.length))}function vf(r){return uu(zn(r))}function pl(r,i,u){(u!==s&&!Ni(r[i],u)||u===s&&!(i in r))&&qr(r,i,u)}function Ns(r,i,u){var x=r[i];(!(mt.call(r,i)&&Ni(x,u))||u===s&&!(i in r))&&qr(r,i,u)}function Cn(r,i){for(var u=r.length;u--;)if(Ni(r[u][0],i))return u;return-1}function Jn(r,i,u,x){return Xr(r,function(E,I,G){i(x,E,u(E),G)}),x}function Mt(r,i){return r&&jr(i,Tn(i),r)}function kr(r,i){return r&&jr(i,wr(i),r)}function qr(r,i,u){i=="__proto__"&&ul?ul(r,i,{configurable:!0,enumerable:!0,value:u,writable:!0}):r[i]=u}function $a(r,i){for(var u=-1,x=i.length,E=ue(x),I=r==null;++u<x;)E[u]=I?s:Ip(r,i[u]);return E}function hi(r,i,u){return r===r&&(u!==s&&(r=r<=u?r:u),i!==s&&(r=r>=i?r:i)),r}function Yn(r,i,u,x,E,I){var G,J=i&_,ie=i&R,xe=i&D;if(u&&(G=E?u(r,x,E,I):u(r)),G!==s)return G;if(!Yt(r))return r;var ye=nt(r);if(ye){if(G=Rl(r),!J)return zn(r,G)}else{var _e=xn(r),Re=_e==St||_e==Pt;if(Ao(r))return Pc(r,J);if(_e==Ze||_e==ve||Re&&!E){if(G=ie||Re?{}:yn(r),!J)return ie?gp(r,kr(G,r)):Za(r,Mt(G,r))}else{if(!wt[_e])return E?r:{};G=mp(r,_e,J)}}I||(I=new En);var Le=I.get(r);if(Le)return Le;I.set(r,G),i0(r)?r.forEach(function(Ke){G.add(Yn(Ke,i,u,Ke,r,I))}):n0(r)&&r.forEach(function(Ke,dt){G.set(dt,Yn(Ke,i,u,dt,r,I))});var Xe=xe?ie?jl:kl:ie?wr:Tn,st=ye?s:Xe(r);return Sn(st||r,function(Ke,dt){st&&(dt=Ke,Ke=r[dt]),Ns(G,dt,Yn(Ke,i,u,dt,r,I))}),G}function wf(r){var i=Tn(r);return function(u){return gl(u,r,i)}}function gl(r,i,u){var x=u.length;if(r==null)return!x;for(r=Et(r);x--;){var E=u[x],I=i[E],G=r[E];if(G===s&&!(E in r)||!I(G))return!1}return!0}function mc(r,i,u){if(typeof r!="function")throw new ar(p);return To(function(){r.apply(s,u)},i)}function Gr(r,i,u,x){var E=-1,I=xa,G=!0,J=r.length,ie=[],xe=i.length;if(!J)return ie;u&&(i=jt(i,Kn(u))),x?(I=ec,G=!1):i.length>=f&&(I=ai,G=!1,i=new ws(i));e:for(;++E<J;){var ye=r[E],_e=u==null?ye:u(ye);if(ye=x||ye!==0?ye:0,G&&_e===_e){for(var Re=xe;Re--;)if(i[Re]===_e)continue e;ie.push(ye)}else I(i,_e,x)||ie.push(ye)}return ie}var Xr=mr(er),Sf=mr(Ui,!0);function ml(r,i){var u=!0;return Xr(r,function(x,E,I){return u=!!i(x,E,I),u}),u}function bs(r,i,u){for(var x=-1,E=r.length;++x<E;){var I=r[x],G=i(I);if(G!=null&&(J===s?G===G&&!zr(G):u(G,J)))var J=G,ie=I}return ie}function _f(r,i,u,x){var E=r.length;for(u=it(u),u<0&&(u=-u>E?0:E+u),x=x===s||x>E?E:it(x),x<0&&(x+=E),x=u>x?0:o0(x);u<x;)r[u++]=i;return r}function xc(r,i){var u=[];return Xr(r,function(x,E,I){i(x,E,I)&&u.push(x)}),u}function Bt(r,i,u,x,E){var I=-1,G=r.length;for(u||(u=ou),E||(E=[]);++I<G;){var J=r[I];i>0&&u(J)?i>1?Bt(J,i-1,u,x,E):Di(E,J):x||(E[E.length]=J)}return E}var La=Ja(),xl=Ja(!0);function er(r,i){return r&&La(r,i,Tn)}function Ui(r,i){return r&&xl(r,i,Tn)}function xo(r,i){return Mi(i,function(u){return Is(r[u])})}function pi(r,i){i=Qr(i,r);for(var u=0,x=i.length;r!=null&&u<x;)r=r[Ar(i[u++])];return u&&u==x?r:s}function Fa(r,i,u){var x=i(r);return nt(r)?x:Di(x,u(r))}function gn(r){return r==null?r===s?fn:Lt:xs&&xs in Et(r)?su(r):Wc(r)}function Bi(r,i){return r>i}function fr(r,i){return r!=null&&mt.call(r,i)}function Es(r,i){return r!=null&&i in Et(r)}function yc(r,i,u){return r>=_n(i,u)&&r<Gt(i,u)}function Ha(r,i,u){for(var x=u?ec:xa,E=r[0].length,I=r.length,G=I,J=ue(I),ie=1/0,xe=[];G--;){var ye=r[G];G&&i&&(ye=jt(ye,Kn(i))),ie=_n(ye.length,ie),J[G]=!u&&(i||E>=120&&ye.length>=120)?new ws(G&&ye):s}ye=r[0];var _e=-1,Re=J[0];e:for(;++_e<E&&xe.length<ie;){var Le=ye[_e],Xe=i?i(Le):Le;if(Le=u||Le!==0?Le:0,!(Re?ai(Re,Xe):x(xe,Xe,u))){for(G=I;--G;){var st=J[G];if(!(st?ai(st,Xe):x(r[G],Xe,u)))continue e}Re&&Re.push(Xe),xe.push(Le)}}return xe}function gi(r,i,u,x){return er(r,function(E,I,G){i(x,u(E),I,G)}),x}function hr(r,i,u){i=Qr(i,r),r=an(r,i);var x=r==null?r:r[Ar($n(i))];return x==null?s:Mn(x,r,u)}function Ua(r){return Kt(r)&&gn(r)==ve}function Nf(r){return Kt(r)&&gn(r)==ke}function mi(r){return Kt(r)&&gn(r)==Te}function pr(r,i,u,x,E){return r===i?!0:r==null||i==null||!Kt(r)&&!Kt(i)?r!==r&&i!==i:Ba(r,i,u,x,pr,E)}function Ba(r,i,u,x,E,I){var G=nt(r),J=nt(i),ie=G?Ce:xn(r),xe=J?Ce:xn(i);ie=ie==ve?Ze:ie,xe=xe==ve?Ze:xe;var ye=ie==Ze,_e=xe==Ze,Re=ie==xe;if(Re&&Ao(r)){if(!Ao(i))return!1;G=!0,ye=!1}if(Re&&!ye)return I||(I=new En),G||Cu(r)?Fc(r,i,u,x,E,I):Hc(r,i,ie,u,x,E,I);if(!(u&B)){var Le=ye&&mt.call(r,"__wrapped__"),Xe=_e&&mt.call(i,"__wrapped__");if(Le||Xe){var st=Le?r.value():r,Ke=Xe?i.value():i;return I||(I=new En),E(st,Ke,u,x,I)}}return Re?(I||(I=new En),Df(r,i,u,x,E,I)):!1}function bf(r){return Kt(r)&&xn(r)==ot}function yo(r,i,u,x){var E=u.length,I=E,G=!x;if(r==null)return!I;for(r=Et(r);E--;){var J=u[E];if(G&&J[2]?J[1]!==r[J[0]]:!(J[0]in r))return!1}for(;++E<I;){J=u[E];var ie=J[0],xe=r[ie],ye=J[1];if(G&&J[2]){if(xe===s&&!(ie in r))return!1}else{var _e=new En;if(x)var Re=x(xe,ye,ie,r,i,_e);if(!(Re===s?pr(ye,xe,B|H,x,_e):Re))return!1}}return!0}function vc(r){if(!Yt(r)||If(r))return!1;var i=Is(r)?cf:na;return i.test(qi(r))}function yl(r){return Kt(r)&&gn(r)==Dt}function Kr(r){return Kt(r)&&xn(r)==bt}function vl(r){return Kt(r)&&nh(r.length)&&!!Nt[gn(r)]}function vo(r){return typeof r=="function"?r:r==null?Sr:typeof r=="object"?nt(r)?Ot(r[0],r[1]):Wa(r):x0(r)}function xi(r){if(!Si(r))return ao(r);var i=[];for(var u in Et(r))mt.call(r,u)&&u!="constructor"&&i.push(u);return i}function wc(r){if(!Yt(r))return Ff(r);var i=Si(r),u=[];for(var x in r)x=="constructor"&&(i||!mt.call(r,x))||u.push(x);return u}function Wi(r,i){return r<i}function Sc(r,i){var u=-1,x=vr(r)?ue(r.length):[];return Xr(r,function(E,I,G){x[++u]=i(E,I,G)}),x}function Wa(r){var i=Pl(r);return i.length==1&&i[0][2]?lu(i[0][0],i[0][1]):function(u){return u===r||yo(u,r,i)}}function Ot(r,i){return De(r)&&Ml(i)?lu(Ar(r),i):function(u){var x=Ip(u,r);return x===s&&x===i?$p(u,r):pr(i,x,B|H)}}function Cs(r,i,u,x,E){r!==i&&La(i,function(I,G){if(E||(E=new En),Yt(I))_c(r,i,G,u,Cs,x,E);else{var J=x?x(ti(r,G),I,G+"",r,i,E):s;J===s&&(J=I),pl(r,G,J)}},wr)}function _c(r,i,u,x,E,I,G){var J=ti(r,u),ie=ti(i,u),xe=G.get(ie);if(xe){pl(r,u,xe);return}var ye=I?I(J,ie,u+"",r,i,G):s,_e=ye===s;if(_e){var Re=nt(ie),Le=!Re&&Ao(ie),Xe=!Re&&!Le&&Cu(ie);ye=ie,Re||Le||Xe?nt(J)?ye=J:tn(J)?ye=zn(J):Le?(_e=!1,ye=Pc(ie,!0)):Xe?(_e=!1,ye=Tf(ie,!0)):ye=[]:ad(ie)||Hl(ie)?(ye=J,Hl(J)?ye=l0(J):(!Yt(J)||Is(J))&&(ye=yn(ie))):_e=!1}_e&&(G.set(ie,ye),E(ye,ie,x,I,G),G.delete(ie)),pl(r,u,ye)}function Va(r,i){var u=r.length;if(u)return i+=i<0?u:0,It(i,u)?r[i]:s}function wl(r,i,u){i.length?i=jt(i,function(I){return nt(I)?function(G){return pi(G,I.length===1?I[0]:I)}:I}):i=[Sr];var x=-1;i=jt(i,Kn(Ye()));var E=Sc(r,function(I,G,J){var ie=jt(i,function(xe){return xe(I)});return{criteria:ie,index:++x,value:I}});return ip(E,function(I,G){return pp(I,G,u)})}function Nc(r,i){return Vi(r,i,function(u,x){return $p(r,x)})}function Vi(r,i,u){for(var x=-1,E=i.length,I={};++x<E;){var G=i[x],J=pi(r,G);u(J,G)&&js(I,Qr(G,r),J)}return I}function Ht(r){return function(i){return pi(i,r)}}function Wt(r,i,u,x){var E=x?rc:to,I=-1,G=i.length,J=r;for(r===i&&(i=zn(i)),u&&(J=jt(r,Kn(u)));++I<G;)for(var ie=0,xe=i[I],ye=u?u(xe):xe;(ie=E(J,ye,ie,x))>-1;)J!==r&&ka.call(J,ie,1),ka.call(r,ie,1);return r}function Jt(r,i){for(var u=r?i.length:0,x=u-1;u--;){var E=i[u];if(u==x||E!==I){var I=E;It(E)?ka.call(r,E,1):Ga(r,E)}}return r}function wo(r,i){return r+Oi(cl()*(i-r+1))}function Sl(r,i,u,x){for(var E=-1,I=Gt(ys((i-r)/(u||1)),0),G=ue(I);I--;)G[x?I:++E]=r,r+=u;return G}function ks(r,i){var u="";if(!r||i<1||i>Q)return u;do i%2&&(u+=r),i=Oi(i/2),i&&(r+=r);while(i);return u}function rt(r,i){return tr(au(r,i,Sr),r+"")}function kn(r){return Yr(ku(r))}function bc(r,i){var u=ku(r);return uu(u,hi(i,0,u.length))}function js(r,i,u,x){if(!Yt(r))return r;i=Qr(i,r);for(var E=-1,I=i.length,G=I-1,J=r;J!=null&&++E<I;){var ie=Ar(i[E]),xe=u;if(ie==="__proto__"||ie==="constructor"||ie==="prototype")return r;if(E!=G){var ye=J[ie];xe=x?x(ye,ie,J):s,xe===s&&(xe=Yt(ye)?ye:It(i[E+1])?[]:{})}Ns(J,ie,xe),J=J[ie]}return r}var Ya=Ra?function(r,i){return Ra.set(r,i),r}:Sr,Zr=ul?function(r,i){return ul(r,"toString",{configurable:!0,enumerable:!1,value:Fp(i),writable:!0})}:Sr;function gr(r){return uu(ku(r))}function jn(r,i,u){var x=-1,E=r.length;i<0&&(i=-i>E?0:E+i),u=u>E?E:u,u<0&&(u+=E),E=i>u?0:u-i>>>0,i>>>=0;for(var I=ue(E);++x<E;)I[x]=r[x+i];return I}function Ec(r,i){var u;return Xr(r,function(x,E,I){return u=i(x,E,I),!u}),!!u}function So(r,i,u){var x=0,E=r==null?x:r.length;if(typeof i=="number"&&i===i&&E<=pe){for(;x<E;){var I=x+E>>>1,G=r[I];G!==null&&!zr(G)&&(u?G<=i:G<i)?x=I+1:E=I}return E}return qa(r,i,Sr,u)}function qa(r,i,u,x){var E=0,I=r==null?0:r.length;if(I===0)return 0;i=u(i);for(var G=i!==i,J=i===null,ie=zr(i),xe=i===s;E<I;){var ye=Oi((E+I)/2),_e=u(r[ye]),Re=_e!==s,Le=_e===null,Xe=_e===_e,st=zr(_e);if(G)var Ke=x||Xe;else xe?Ke=Xe&&(x||Re):J?Ke=Xe&&Re&&(x||!Le):ie?Ke=Xe&&Re&&!Le&&(x||!st):Le||st?Ke=!1:Ke=x?_e<=i:_e<i;Ke?E=ye+1:I=ye}return _n(I,K)}function Cc(r,i){for(var u=-1,x=r.length,E=0,I=[];++u<x;){var G=r[u],J=i?i(G):G;if(!u||!Ni(J,ie)){var ie=J;I[E++]=G===0?0:G}}return I}function kc(r){return typeof r=="number"?r:zr(r)?L:+r}function qn(r){if(typeof r=="string")return r;if(nt(r))return jt(r,qn)+"";if(zr(r))return Aa?Aa.call(r):"";var i=r+"";return i=="0"&&1/r==-1/0?"-0":i}function yi(r,i,u){var x=-1,E=xa,I=r.length,G=!0,J=[],ie=J;if(u)G=!1,E=ec;else if(I>=f){var xe=i?null:Mf(r);if(xe)return zi(xe);G=!1,E=ai,ie=new ws}else ie=i?[]:J;e:for(;++x<I;){var ye=r[x],_e=i?i(ye):ye;if(ye=u||ye!==0?ye:0,G&&_e===_e){for(var Re=ie.length;Re--;)if(ie[Re]===_e)continue e;i&&ie.push(_e),J.push(ye)}else E(ie,_e,u)||(ie!==J&&ie.push(_e),J.push(ye))}return J}function Ga(r,i){return i=Qr(i,r),r=an(r,i),r==null||delete r[Ar($n(i))]}function jc(r,i,u,x){return js(r,i,u(pi(r,i)),x)}function _l(r,i,u,x){for(var E=r.length,I=x?E:-1;(x?I--:++I<E)&&i(r[I],I,r););return u?jn(r,x?0:I,x?I+1:E):jn(r,x?I+1:0,x?E:I)}function _o(r,i){var u=r;return u instanceof tt&&(u=u.value()),tc(i,function(x,E){return E.func.apply(E.thisArg,Di([x],E.args))},u)}function Xa(r,i,u){var x=r.length;if(x<2)return x?yi(r[0]):[];for(var E=-1,I=ue(x);++E<x;)for(var G=r[E],J=-1;++J<x;)J!=E&&(I[E]=Gr(I[E]||G,r[J],i,u));return yi(Bt(I,1),i,u)}function Nl(r,i,u){for(var x=-1,E=r.length,I=i.length,G={};++x<E;){var J=x<I?i[x]:s;u(G,r[x],J)}return G}function No(r){return tn(r)?r:[]}function Ka(r){return typeof r=="function"?r:Sr}function Qr(r,i){return nt(r)?r:De(r,i)?[r]:qc(Ct(r))}var Ef=rt;function vi(r,i,u){var x=r.length;return u=u===s?x:u,!i&&u>=x?r:jn(r,i,u)}var Tc=ff||function(r){return zt.clearTimeout(r)};function Pc(r,i){if(i)return r.slice();var u=r.length,x=cc?cc(u):new r.constructor(u);return r.copy(x),x}function bl(r){var i=new r.constructor(r.byteLength);return new al(i).set(new al(r)),i}function Cf(r,i){var u=i?bl(r.buffer):r.buffer;return new r.constructor(u,r.byteOffset,r.byteLength)}function kf(r){var i=new r.constructor(r.source,Yo.exec(r));return i.lastIndex=r.lastIndex,i}function jf(r){return Qn?Et(Qn.call(r)):{}}function Tf(r,i){var u=i?bl(r.buffer):r.buffer;return new r.constructor(u,r.byteOffset,r.length)}function Rc(r,i){if(r!==i){var u=r!==s,x=r===null,E=r===r,I=zr(r),G=i!==s,J=i===null,ie=i===i,xe=zr(i);if(!J&&!xe&&!I&&r>i||I&&G&&ie&&!J&&!xe||x&&G&&ie||!u&&ie||!E)return 1;if(!x&&!I&&!xe&&r<i||xe&&u&&E&&!x&&!I||J&&u&&E||!G&&E||!ie)return-1}return 0}function pp(r,i,u){for(var x=-1,E=r.criteria,I=i.criteria,G=E.length,J=u.length;++x<G;){var ie=Rc(E[x],I[x]);if(ie){if(x>=J)return ie;var xe=u[x];return ie*(xe=="desc"?-1:1)}}return r.index-i.index}function Pf(r,i,u,x){for(var E=-1,I=r.length,G=u.length,J=-1,ie=i.length,xe=Gt(I-G,0),ye=ue(ie+xe),_e=!x;++J<ie;)ye[J]=i[J];for(;++E<G;)(_e||E<I)&&(ye[u[E]]=r[E]);for(;xe--;)ye[J++]=r[E++];return ye}function Ac(r,i,u,x){for(var E=-1,I=r.length,G=-1,J=u.length,ie=-1,xe=i.length,ye=Gt(I-J,0),_e=ue(ye+xe),Re=!x;++E<ye;)_e[E]=r[E];for(var Le=E;++ie<xe;)_e[Le+ie]=i[ie];for(;++G<J;)(Re||E<I)&&(_e[Le+u[G]]=r[E++]);return _e}function zn(r,i){var u=-1,x=r.length;for(i||(i=ue(x));++u<x;)i[u]=r[u];return i}function jr(r,i,u,x){var E=!u;u||(u={});for(var I=-1,G=i.length;++I<G;){var J=i[I],ie=x?x(u[J],r[J],J,u,r):s;ie===s&&(ie=r[J]),E?qr(u,J,ie):Ns(u,J,ie)}return u}function Za(r,i){return jr(r,Tr(r),i)}function gp(r,i){return jr(r,zf(r),i)}function Qa(r,i){return function(u,x){var E=nt(u)?Qu:Jn,I=i?i():{};return E(u,r,Ye(x,2),I)}}function bo(r){return rt(function(i,u){var x=-1,E=u.length,I=E>1?u[E-1]:s,G=E>2?u[2]:s;for(I=r.length>3&&typeof I=="function"?(E--,I):s,G&&In(u[0],u[1],G)&&(I=E<3?s:I,E=1),i=Et(i);++x<E;){var J=u[x];J&&r(i,J,x,I)}return i})}function mr(r,i){return function(u,x){if(u==null)return u;if(!vr(u))return r(u,x);for(var E=u.length,I=i?E:-1,G=Et(u);(i?I--:++I<E)&&x(G[I],I,G)!==!1;);return u}}function Ja(r){return function(i,u,x){for(var E=-1,I=Et(i),G=x(i),J=G.length;J--;){var ie=G[r?J:++E];if(u(I[ie],ie,I)===!1)break}return i}}function eu(r,i,u){var x=i&$,E=Eo(r);function I(){var G=this&&this!==zt&&this instanceof I?E:r;return G.apply(x?u:this,arguments)}return I}function Mc(r){return function(i){i=Ct(i);var u=ro(i)?Zn(i):s,x=u?u[0]:i.charAt(0),E=u?vi(u,1).join(""):i.slice(1);return x[r]()+E}}function Ts(r){return function(i){return tc(g0(p0(i).replace(Kh,"")),r,"")}}function Eo(r){return function(){var i=arguments;switch(i.length){case 0:return new r;case 1:return new r(i[0]);case 2:return new r(i[0],i[1]);case 3:return new r(i[0],i[1],i[2]);case 4:return new r(i[0],i[1],i[2],i[3]);case 5:return new r(i[0],i[1],i[2],i[3],i[4]);case 6:return new r(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new r(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var u=ho(r.prototype),x=r.apply(u,i);return Yt(x)?x:u}}function Dc(r,i,u){var x=Eo(r);function E(){for(var I=arguments.length,G=ue(I),J=I,ie=wi(E);J--;)G[J]=arguments[J];var xe=I<3&&G[0]!==ie&&G[I-1]!==ie?[]:lr(G,ie);if(I-=xe.length,I<u)return On(r,i,Co,E.placeholder,s,G,xe,s,s,u-I);var ye=this&&this!==zt&&this instanceof E?x:r;return Mn(ye,this,G)}return E}function Ps(r){return function(i,u,x){var E=Et(i);if(!vr(i)){var I=Ye(u,3);i=Tn(i),u=function(J){return I(E[J],J,E)}}var G=r(i,u,x);return G>-1?E[I?i[G]:G]:s}}function tu(r){return ei(function(i){var u=i.length,x=u,E=Nn.prototype.thru;for(r&&i.reverse();x--;){var I=i[x];if(typeof I!="function")throw new ar(p);if(E&&!G&&ko(I)=="wrapper")var G=new Nn([],!0)}for(x=G?x:u;++x<u;){I=i[x];var J=ko(I),ie=J=="wrapper"?iu(I):s;ie&&Al(ie[0])&&ie[1]==(b|M|O|U)&&!ie[4].length&&ie[9]==1?G=G[ko(ie[0])].apply(G,ie[3]):G=I.length==1&&Al(I)?G[J]():G.thru(I)}return function(){var xe=arguments,ye=xe[0];if(G&&xe.length==1&&nt(ye))return G.plant(ye).value();for(var _e=0,Re=u?i[_e].apply(this,xe):ye;++_e<u;)Re=i[_e].call(this,Re);return Re}})}function Co(r,i,u,x,E,I,G,J,ie,xe){var ye=i&b,_e=i&$,Re=i&T,Le=i&(M|P),Xe=i&Y,st=Re?s:Eo(r);function Ke(){for(var dt=arguments.length,pt=ue(dt),Or=dt;Or--;)pt[Or]=arguments[Or];if(Le)var rr=wi(Ke),Ir=tf(pt,rr);if(x&&(pt=Pf(pt,x,E,Le)),I&&(pt=Ac(pt,I,G,Le)),dt-=Ir,Le&&dt<xe){var nn=lr(pt,rr);return On(r,i,Co,Ke.placeholder,u,pt,nn,J,ie,xe-dt)}var bi=_e?u:this,Ls=Re?bi[r]:r;return dt=pt.length,J?pt=Pr(pt,J):Xe&&dt>1&&pt.reverse(),ye&&ie<dt&&(pt.length=ie),this&&this!==zt&&this instanceof Ke&&(Ls=st||Eo(Ls)),Ls.apply(bi,pt)}return Ke}function Rf(r,i){return function(u,x){return gi(u,r,i(x),{})}}function El(r,i){return function(u,x){var E;if(u===s&&x===s)return i;if(u!==s&&(E=u),x!==s){if(E===s)return x;typeof u=="string"||typeof x=="string"?(u=qn(u),x=qn(x)):(u=kc(u),x=kc(x)),E=r(u,x)}return E}}function nu(r){return ei(function(i){return i=jt(i,Kn(Ye())),rt(function(u){var x=this;return r(i,function(E){return Mn(E,x,u)})})})}function Cl(r,i){i=i===s?" ":qn(i);var u=i.length;if(u<2)return u?ks(i,r):i;var x=ks(i,ys(r/ms(i)));return ro(i)?vi(Zn(x),0,r).join(""):x.slice(0,r)}function Af(r,i,u,x){var E=i&$,I=Eo(r);function G(){for(var J=-1,ie=arguments.length,xe=-1,ye=x.length,_e=ue(ye+ie),Re=this&&this!==zt&&this instanceof G?I:r;++xe<ye;)_e[xe]=x[xe];for(;ie--;)_e[xe++]=arguments[++J];return Mn(Re,E?u:this,_e)}return G}function zc(r){return function(i,u,x){return x&&typeof x!="number"&&In(i,u,x)&&(u=x=s),i=$s(i),u===s?(u=i,i=0):u=$s(u),x=x===s?i<u?1:-1:$s(x),Sl(i,u,x,r)}}function ru(r){return function(i,u){return typeof i=="string"&&typeof u=="string"||(i=ni(i),u=ni(u)),r(i,u)}}function On(r,i,u,x,E,I,G,J,ie,xe){var ye=i&M,_e=ye?G:s,Re=ye?s:G,Le=ye?I:s,Xe=ye?s:I;i|=ye?O:F,i&=~(ye?F:O),i&N||(i&=-4);var st=[r,i,E,Le,_e,Xe,Re,J,ie,xe],Ke=u.apply(s,st);return Al(r)&&Vc(Ke,st),Ke.placeholder=x,Yc(Ke,r,i)}function mn(r){var i=qt[r];return function(u,x){if(u=ni(u),x=x==null?0:_n(it(x),292),x&&lo(u)){var E=(Ct(u)+"e").split("e"),I=i(E[0]+"e"+(+E[1]+x));return E=(Ct(I)+"e").split("e"),+(E[0]+"e"+(+E[1]-x))}return i(u)}}var Mf=Ii&&1/zi(new Ii([,-0]))[1]==te?function(r){return new Ii(r)}:Bp;function Oc(r){return function(i){var u=xn(i);return u==ot?wa(i):u==bt?ap(i):sp(i,r(i))}}function Jr(r,i,u,x,E,I,G,J){var ie=i&T;if(!ie&&typeof r!="function")throw new ar(p);var xe=x?x.length:0;if(xe||(i&=-97,x=E=s),G=G===s?G:Gt(it(G),0),J=J===s?J:it(J),xe-=E?E.length:0,i&F){var ye=x,_e=E;x=E=s}var Re=ie?s:iu(r),Le=[r,i,u,x,E,ye,_e,I,G,J];if(Re&&Lf(Le,Re),r=Le[0],i=Le[1],u=Le[2],x=Le[3],E=Le[4],J=Le[9]=Le[9]===s?ie?0:r.length:Gt(Le[9]-xe,0),!J&&i&(M|P)&&(i&=-25),!i||i==$)var Xe=eu(r,i,u);else i==M||i==P?Xe=Dc(r,i,J):(i==O||i==($|O))&&!E.length?Xe=Af(r,i,u,x):Xe=Co.apply(s,Le);var st=Re?Ya:Vc;return Yc(st(Xe,Le),r,i)}function Ic(r,i,u,x){return r===s||Ni(r,Ur[u])&&!mt.call(x,u)?i:r}function $c(r,i,u,x,E,I){return Yt(r)&&Yt(i)&&(I.set(i,r),Cs(r,i,s,$c,I),I.delete(i)),r}function Lc(r){return ad(r)?s:r}function Fc(r,i,u,x,E,I){var G=u&B,J=r.length,ie=i.length;if(J!=ie&&!(G&&ie>J))return!1;var xe=I.get(r),ye=I.get(i);if(xe&&ye)return xe==i&&ye==r;var _e=-1,Re=!0,Le=u&H?new ws:s;for(I.set(r,i),I.set(i,r);++_e<J;){var Xe=r[_e],st=i[_e];if(x)var Ke=G?x(st,Xe,_e,i,r,I):x(Xe,st,_e,r,i,I);if(Ke!==s){if(Ke)continue;Re=!1;break}if(Le){if(!nc(i,function(dt,pt){if(!ai(Le,pt)&&(Xe===dt||E(Xe,dt,u,x,I)))return Le.push(pt)})){Re=!1;break}}else if(!(Xe===st||E(Xe,st,u,x,I))){Re=!1;break}}return I.delete(r),I.delete(i),Re}function Hc(r,i,u,x,E,I,G){switch(u){case Ve:if(r.byteLength!=i.byteLength||r.byteOffset!=i.byteOffset)return!1;r=r.buffer,i=i.buffer;case ke:return!(r.byteLength!=i.byteLength||!I(new al(r),new al(i)));case Pe:case Te:case ct:return Ni(+r,+i);case ft:return r.name==i.name&&r.message==i.message;case Dt:case Qt:return r==i+"";case ot:var J=wa;case bt:var ie=x&B;if(J||(J=zi),r.size!=i.size&&!ie)return!1;var xe=G.get(r);if(xe)return xe==i;x|=H,G.set(r,i);var ye=Fc(J(r),J(i),x,E,I,G);return G.delete(r),ye;case dn:if(Qn)return Qn.call(r)==Qn.call(i)}return!1}function Df(r,i,u,x,E,I){var G=u&B,J=kl(r),ie=J.length,xe=kl(i),ye=xe.length;if(ie!=ye&&!G)return!1;for(var _e=ie;_e--;){var Re=J[_e];if(!(G?Re in i:mt.call(i,Re)))return!1}var Le=I.get(r),Xe=I.get(i);if(Le&&Xe)return Le==i&&Xe==r;var st=!0;I.set(r,i),I.set(i,r);for(var Ke=G;++_e<ie;){Re=J[_e];var dt=r[Re],pt=i[Re];if(x)var Or=G?x(pt,dt,Re,i,r,I):x(dt,pt,Re,r,i,I);if(!(Or===s?dt===pt||E(dt,pt,u,x,I):Or)){st=!1;break}Ke||(Ke=Re=="constructor")}if(st&&!Ke){var rr=r.constructor,Ir=i.constructor;rr!=Ir&&"constructor"in r&&"constructor"in i&&!(typeof rr=="function"&&rr instanceof rr&&typeof Ir=="function"&&Ir instanceof Ir)&&(st=!1)}return I.delete(r),I.delete(i),st}function ei(r){return tr(au(r,s,du),r+"")}function kl(r){return Fa(r,Tn,Tr)}function jl(r){return Fa(r,wr,zf)}var iu=Ra?function(r){return Ra.get(r)}:Bp;function ko(r){for(var i=r.name+"",u=co[i],x=mt.call(co,i)?u.length:0;x--;){var E=u[x],I=E.func;if(I==null||I==r)return E.name}return i}function wi(r){var i=mt.call(z,"placeholder")?z:r;return i.placeholder}function Ye(){var r=z.iteratee||Hp;return r=r===Hp?vo:r,arguments.length?r(arguments[0],arguments[1]):r}function Tl(r,i){var u=r.__data__;return jo(i)?u[typeof i=="string"?"string":"hash"]:u.map}function Pl(r){for(var i=Tn(r),u=i.length;u--;){var x=i[u],E=r[x];i[u]=[x,E,Ml(E)]}return i}function Yi(r,i){var u=no(r,i);return vc(u)?u:s}function su(r){var i=mt.call(r,xs),u=r[xs];try{r[xs]=s;var x=!0}catch{}var E=ol.call(r);return x&&(i?r[xs]=u:delete r[xs]),E}var Tr=ja?function(r){return r==null?[]:(r=Et(r),Mi(ja(r),function(i){return Ca.call(r,i)}))}:Wp,zf=ja?function(r){for(var i=[];r;)Di(i,Tr(r)),r=Cr(r);return i}:Wp,xn=gn;(dl&&xn(new dl(new ArrayBuffer(1)))!=Ve||vs&&xn(new vs)!=ot||fl&&xn(fl.resolve())!=Oe||Ii&&xn(new Ii)!=bt||hl&&xn(new hl)!=sn)&&(xn=function(r){var i=gn(r),u=i==Ze?r.constructor:s,x=u?qi(u):"";if(x)switch(x){case hc:return Ve;case $i:return ot;case pf:return Oe;case fo:return bt;case Br:return sn}return i});function Uc(r,i,u){for(var x=-1,E=u.length;++x<E;){var I=u[x],G=I.size;switch(I.type){case"drop":r+=G;break;case"dropRight":i-=G;break;case"take":i=_n(i,r+G);break;case"takeRight":r=Gt(r,i-G);break}}return{start:r,end:i}}function Of(r){var i=r.match(qs);return i?i[1].split(Vo):[]}function Bc(r,i,u){i=Qr(i,r);for(var x=-1,E=i.length,I=!1;++x<E;){var G=Ar(i[x]);if(!(I=r!=null&&u(r,G)))break;r=r[G]}return I||++x!=E?I:(E=r==null?0:r.length,!!E&&nh(E)&&It(G,E)&&(nt(r)||Hl(r)))}function Rl(r){var i=r.length,u=new r.constructor(i);return i&&typeof r[0]=="string"&&mt.call(r,"index")&&(u.index=r.index,u.input=r.input),u}function yn(r){return typeof r.constructor=="function"&&!Si(r)?ho(Cr(r)):{}}function mp(r,i,u){var x=r.constructor;switch(i){case ke:return bl(r);case Pe:case Te:return new x(+r);case Ve:return Cf(r,u);case Je:case _t:case yt:case on:case Rn:case Ee:case He:case et:case qe:return Tf(r,u);case ot:return new x;case ct:case Qt:return new x(r);case Dt:return kf(r);case bt:return new x;case dn:return jf(r)}}function xp(r,i){var u=i.length;if(!u)return r;var x=u-1;return i[x]=(u>1?"& ":"")+i[x],i=i.join(u>2?", ":" "),r.replace(Ys,`{
/* [wrapped with `+i+`] */
`)}function ou(r){return nt(r)||Hl(r)||!!(df&&r&&r[df])}function It(r,i){var u=typeof r;return i=i??Q,!!i&&(u=="number"||u!="symbol"&&ia.test(r))&&r>-1&&r%1==0&&r<i}function In(r,i,u){if(!Yt(u))return!1;var x=typeof i;return(x=="number"?vr(u)&&It(i,u.length):x=="string"&&i in u)?Ni(u[i],r):!1}function De(r,i){if(nt(r))return!1;var u=typeof r;return u=="number"||u=="symbol"||u=="boolean"||r==null||zr(r)?!0:Jl.test(r)||!Bo.test(r)||i!=null&&r in Et(i)}function jo(r){var i=typeof r;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?r!=="__proto__":r===null}function Al(r){var i=ko(r),u=z[i];if(typeof u!="function"||!(i in tt.prototype))return!1;if(r===u)return!0;var x=iu(u);return!!x&&r===x[0]}function If(r){return!!Na&&Na in r}var yp=so?Is:Vp;function Si(r){var i=r&&r.constructor,u=typeof i=="function"&&i.prototype||Ur;return r===u}function Ml(r){return r===r&&!Yt(r)}function lu(r,i){return function(u){return u==null?!1:u[r]===i&&(i!==s||r in Et(u))}}function $f(r){var i=ae(r,function(x){return u.size===v&&u.clear(),x}),u=i.cache;return i}function Lf(r,i){var u=r[1],x=i[1],E=u|x,I=E<($|T|b),G=x==b&&u==M||x==b&&u==U&&r[7].length<=i[8]||x==(b|U)&&i[7].length<=i[8]&&u==M;if(!(I||G))return r;x&$&&(r[2]=i[2],E|=u&$?0:N);var J=i[3];if(J){var ie=r[3];r[3]=ie?Pf(ie,J,i[4]):J,r[4]=ie?lr(r[3],S):i[4]}return J=i[5],J&&(ie=r[5],r[5]=ie?Ac(ie,J,i[6]):J,r[6]=ie?lr(r[5],S):i[6]),J=i[7],J&&(r[7]=J),x&b&&(r[8]=r[8]==null?i[8]:_n(r[8],i[8])),r[9]==null&&(r[9]=i[9]),r[0]=i[0],r[1]=E,r}function Ff(r){var i=[];if(r!=null)for(var u in Et(r))i.push(u);return i}function Wc(r){return ol.call(r)}function au(r,i,u){return i=Gt(i===s?r.length-1:i,0),function(){for(var x=arguments,E=-1,I=Gt(x.length-i,0),G=ue(I);++E<I;)G[E]=x[i+E];E=-1;for(var J=ue(i+1);++E<i;)J[E]=x[E];return J[i]=u(G),Mn(r,this,J)}}function an(r,i){return i.length<2?r:pi(r,jn(i,0,-1))}function Pr(r,i){for(var u=r.length,x=_n(i.length,u),E=zn(r);x--;){var I=i[x];r[x]=It(I,u)?E[I]:s}return r}function ti(r,i){if(!(i==="constructor"&&typeof r[i]=="function")&&i!="__proto__")return r[i]}var Vc=Rr(Ya),To=dc||function(r,i){return zt.setTimeout(r,i)},tr=Rr(Zr);function Yc(r,i,u){var x=i+"";return tr(r,xp(x,Hf(Of(x),u)))}function Rr(r){var i=0,u=0;return function(){var x=hp(),E=ce-(x-u);if(u=x,E>0){if(++i>=le)return arguments[0]}else i=0;return r.apply(s,arguments)}}function uu(r,i){var u=-1,x=r.length,E=x-1;for(i=i===s?x:i;++u<i;){var I=wo(u,E),G=r[I];r[I]=r[u],r[u]=G}return r.length=i,r}var qc=$f(function(r){var i=[];return r.charCodeAt(0)===46&&i.push(""),r.replace(os,function(u,x,E,I){i.push(E?I.replace(ea,"$1"):x||u)}),i});function Ar(r){if(typeof r=="string"||zr(r))return r;var i=r+"";return i=="0"&&1/r==-1/0?"-0":i}function qi(r){if(r!=null){try{return sl.call(r)}catch{}try{return r+""}catch{}}return""}function Hf(r,i){return Sn(ge,function(u){var x="_."+u[0];i&u[1]&&!xa(r,x)&&r.push(x)}),r.sort()}function Uf(r){if(r instanceof tt)return r.clone();var i=new Nn(r.__wrapped__,r.__chain__);return i.__actions__=zn(r.__actions__),i.__index__=r.__index__,i.__values__=r.__values__,i}function cu(r,i,u){(u?In(r,i,u):i===s)?i=1:i=Gt(it(i),0);var x=r==null?0:r.length;if(!x||i<1)return[];for(var E=0,I=0,G=ue(ys(x/i));E<x;)G[I++]=jn(r,E,E+=i);return G}function Gc(r){for(var i=-1,u=r==null?0:r.length,x=0,E=[];++i<u;){var I=r[i];I&&(E[x++]=I)}return E}function xr(){var r=arguments.length;if(!r)return[];for(var i=ue(r-1),u=arguments[0],x=r;x--;)i[x-1]=arguments[x];return Di(nt(u)?zn(u):[u],Bt(i,1))}var ht=rt(function(r,i){return tn(r)?Gr(r,Bt(i,1,tn,!0)):[]}),un=rt(function(r,i){var u=$n(i);return tn(u)&&(u=s),tn(r)?Gr(r,Bt(i,1,tn,!0),Ye(u,2)):[]}),Xt=rt(function(r,i){var u=$n(i);return tn(u)&&(u=s),tn(r)?Gr(r,Bt(i,1,tn,!0),s,u):[]});function vn(r,i,u){var x=r==null?0:r.length;return x?(i=u||i===s?1:it(i),jn(r,i<0?0:i,x)):[]}function nr(r,i,u){var x=r==null?0:r.length;return x?(i=u||i===s?1:it(i),i=x-i,jn(r,0,i<0?0:i)):[]}function Po(r,i){return r&&r.length?_l(r,Ye(i,3),!0,!0):[]}function en(r,i){return r&&r.length?_l(r,Ye(i,3),!0):[]}function Dl(r,i,u,x){var E=r==null?0:r.length;return E?(u&&typeof u!="number"&&In(r,i,u)&&(u=0,x=E),_f(r,i,u,x)):[]}function Gi(r,i,u){var x=r==null?0:r.length;if(!x)return-1;var E=u==null?0:it(u);return E<0&&(E=Gt(x+E,0)),ya(r,Ye(i,3),E)}function zl(r,i,u){var x=r==null?0:r.length;if(!x)return-1;var E=x-1;return u!==s&&(E=it(u),E=u<0?Gt(x+E,0):_n(E,x-1)),ya(r,Ye(i,3),E,!0)}function du(r){var i=r==null?0:r.length;return i?Bt(r,1):[]}function Ol(r){var i=r==null?0:r.length;return i?Bt(r,te):[]}function Gn(r,i){var u=r==null?0:r.length;return u?(i=i===s?1:it(i),Bt(r,i)):[]}function Xc(r){for(var i=-1,u=r==null?0:r.length,x={};++i<u;){var E=r[i];x[E[0]]=E[1]}return x}function Rs(r){return r&&r.length?r[0]:s}function _i(r,i,u){var x=r==null?0:r.length;if(!x)return-1;var E=u==null?0:it(u);return E<0&&(E=Gt(x+E,0)),to(r,i,E)}function fu(r){var i=r==null?0:r.length;return i?jn(r,0,-1):[]}var Kc=rt(function(r){var i=jt(r,No);return i.length&&i[0]===r[0]?Ha(i):[]}),Xi=rt(function(r){var i=$n(r),u=jt(r,No);return i===$n(u)?i=s:u.pop(),u.length&&u[0]===r[0]?Ha(u,Ye(i,2)):[]}),hu=rt(function(r){var i=$n(r),u=jt(r,No);return i=typeof i=="function"?i:s,i&&u.pop(),u.length&&u[0]===r[0]?Ha(u,s,i):[]});function Ki(r,i){return r==null?"":Ta.call(r,i)}function $n(r){var i=r==null?0:r.length;return i?r[i-1]:s}function Il(r,i,u){var x=r==null?0:r.length;if(!x)return-1;var E=x;return u!==s&&(E=it(u),E=E<0?Gt(x+E,0):_n(E,x-1)),i===i?up(r,i,E):ya(r,Kd,E,!0)}function Zc(r,i){return r&&r.length?Va(r,it(i)):s}var pu=rt($l);function $l(r,i){return r&&r.length&&i&&i.length?Wt(r,i):r}function Ln(r,i,u){return r&&r.length&&i&&i.length?Wt(r,i,Ye(u,2)):r}function Zi(r,i,u){return r&&r.length&&i&&i.length?Wt(r,i,s,u):r}var Mr=ei(function(r,i){var u=r==null?0:r.length,x=$a(r,i);return Jt(r,jt(i,function(E){return It(E,u)?+E:E}).sort(Rc)),x});function Xn(r,i){var u=[];if(!(r&&r.length))return u;var x=-1,E=[],I=r.length;for(i=Ye(i,3);++x<I;){var G=r[x];i(G,x,r)&&(u.push(G),E.push(x))}return Jt(r,E),u}function gu(r){return r==null?r:Pa.call(r)}function Qc(r,i,u){var x=r==null?0:r.length;return x?(u&&typeof u!="number"&&In(r,i,u)?(i=0,u=x):(i=i==null?0:it(i),u=u===s?x:it(u)),jn(r,i,u)):[]}function Jc(r,i){return So(r,i)}function vp(r,i,u){return qa(r,i,Ye(u,2))}function Qi(r,i){var u=r==null?0:r.length;if(u){var x=So(r,i);if(x<u&&Ni(r[x],i))return x}return-1}function Bf(r,i){return So(r,i,!0)}function ed(r,i,u){return qa(r,i,Ye(u,2),!0)}function As(r,i){var u=r==null?0:r.length;if(u){var x=So(r,i,!0)-1;if(Ni(r[x],i))return x}return-1}function td(r){return r&&r.length?Cc(r):[]}function Ms(r,i){return r&&r.length?Cc(r,Ye(i,2)):[]}function Wf(r){var i=r==null?0:r.length;return i?jn(r,1,i):[]}function Vf(r,i,u){return r&&r.length?(i=u||i===s?1:it(i),jn(r,0,i<0?0:i)):[]}function nd(r,i,u){var x=r==null?0:r.length;return x?(i=u||i===s?1:it(i),i=x-i,jn(r,i<0?0:i,x)):[]}function mu(r,i){return r&&r.length?_l(r,Ye(i,3),!1,!0):[]}function wp(r,i){return r&&r.length?_l(r,Ye(i,3)):[]}var Sp=rt(function(r){return yi(Bt(r,1,tn,!0))}),Yf=rt(function(r){var i=$n(r);return tn(i)&&(i=s),yi(Bt(r,1,tn,!0),Ye(i,2))}),qf=rt(function(r){var i=$n(r);return i=typeof i=="function"?i:s,yi(Bt(r,1,tn,!0),s,i)});function Ds(r){return r&&r.length?yi(r):[]}function _p(r,i){return r&&r.length?yi(r,Ye(i,2)):[]}function Ro(r,i){return i=typeof i=="function"?i:s,r&&r.length?yi(r,s,i):[]}function xu(r){if(!(r&&r.length))return[];var i=0;return r=Mi(r,function(u){if(tn(u))return i=Gt(u.length,i),!0}),oc(i,function(u){return jt(r,ic(u))})}function Ut(r,i){if(!(r&&r.length))return[];var u=xu(r);return i==null?u:jt(u,function(x){return Mn(i,s,x)})}var Np=rt(function(r,i){return tn(r)?Gr(r,i):[]}),Gf=rt(function(r){return Xa(Mi(r,tn))}),bp=rt(function(r){var i=$n(r);return tn(i)&&(i=s),Xa(Mi(r,tn),Ye(i,2))}),Ep=rt(function(r){var i=$n(r);return i=typeof i=="function"?i:s,Xa(Mi(r,tn),s,i)}),Xf=rt(xu);function Kf(r,i){return Nl(r||[],i||[],Ns)}function Cp(r,i){return Nl(r||[],i||[],js)}var yr=rt(function(r){var i=r.length,u=i>1?r[i-1]:s;return u=typeof u=="function"?(r.pop(),u):s,Ut(r,u)});function yu(r){var i=z(r);return i.__chain__=!0,i}function kp(r,i){return i(r),r}function Dr(r,i){return i(r)}var vu=ei(function(r){var i=r.length,u=i?r[0]:0,x=this.__wrapped__,E=function(I){return $a(I,r)};return i>1||this.__actions__.length||!(x instanceof tt)||!It(u)?this.thru(E):(x=x.slice(u,+u+(i?1:0)),x.__actions__.push({func:Dr,args:[E],thisArg:s}),new Nn(x,this.__chain__).thru(function(I){return i&&!I.length&&I.push(s),I}))});function zs(){return yu(this)}function wu(){return new Nn(this.value(),this.__chain__)}function rd(){this.__values__===s&&(this.__values__=s0(this.value()));var r=this.__index__>=this.__values__.length,i=r?s:this.__values__[this.__index__++];return{done:r,value:i}}function id(){return this}function jp(r){for(var i,u=this;u instanceof Wr;){var x=Uf(u);x.__index__=0,x.__values__=s,i?E.__wrapped__=x:i=x;var E=x;u=u.__wrapped__}return E.__wrapped__=r,i}function sd(){var r=this.__wrapped__;if(r instanceof tt){var i=r;return this.__actions__.length&&(i=new tt(this)),i=i.reverse(),i.__actions__.push({func:Dr,args:[gu],thisArg:s}),new Nn(i,this.__chain__)}return this.thru(gu)}function Tp(){return _o(this.__wrapped__,this.__actions__)}var Zf=Qa(function(r,i,u){mt.call(r,u)?++r[u]:qr(r,u,1)});function Qf(r,i,u){var x=nt(r)?Ju:ml;return u&&In(r,i,u)&&(i=s),x(r,Ye(i,3))}function Su(r,i){var u=nt(r)?Mi:xc;return u(r,Ye(i,3))}var _u=Ps(Gi),Jf=Ps(zl);function od(r,i){return Bt(Os(r,i),1)}function Pp(r,i){return Bt(Os(r,i),te)}function eh(r,i,u){return u=u===s?1:it(u),Bt(Os(r,i),u)}function Nu(r,i){var u=nt(r)?Sn:Xr;return u(r,Ye(i,3))}function Ll(r,i){var u=nt(r)?ma:Sf;return u(r,Ye(i,3))}var ld=Qa(function(r,i,u){mt.call(r,u)?r[u].push(i):qr(r,u,[i])});function bu(r,i,u,x){r=vr(r)?r:ku(r),u=u&&!x?it(u):0;var E=r.length;return u<0&&(u=Gt(E+u,0)),rh(r)?u<=E&&r.indexOf(i,u)>-1:!!E&&to(r,i,u)>-1}var th=rt(function(r,i,u){var x=-1,E=typeof i=="function",I=vr(r)?ue(r.length):[];return Xr(r,function(G){I[++x]=E?Mn(i,G,u):hr(G,i,u)}),I}),Rp=Qa(function(r,i,u){qr(r,u,i)});function Os(r,i){var u=nt(r)?jt:Sc;return u(r,Ye(i,3))}function Ap(r,i,u,x){return r==null?[]:(nt(i)||(i=i==null?[]:[i]),u=x?s:u,nt(u)||(u=u==null?[]:[u]),wl(r,i,u))}var Fl=Qa(function(r,i,u){r[u?0:1].push(i)},function(){return[[],[]]});function Mp(r,i,u){var x=nt(r)?tc:Qd,E=arguments.length<3;return x(r,Ye(i,4),u,E,Xr)}function Eu(r,i,u){var x=nt(r)?tp:Qd,E=arguments.length<3;return x(r,Ye(i,4),u,E,Sf)}function e(r,i){var u=nt(r)?Mi:xc;return u(r,be(Ye(i,3)))}function t(r){var i=nt(r)?Yr:kn;return i(r)}function o(r,i,u){(u?In(r,i,u):i===s)?i=1:i=it(i);var x=nt(r)?_s:bc;return x(r,i)}function a(r){var i=nt(r)?vf:gr;return i(r)}function h(r){if(r==null)return 0;if(vr(r))return rh(r)?ms(r):r.length;var i=xn(r);return i==ot||i==bt?r.size:xi(r).length}function m(r,i,u){var x=nt(r)?nc:Ec;return u&&In(r,i,u)&&(i=s),x(r,Ye(i,3))}var k=rt(function(r,i){if(r==null)return[];var u=i.length;return u>1&&In(r,i[0],i[1])?i=[]:u>2&&In(i[0],i[1],i[2])&&(i=[i[0]]),wl(r,Bt(i,1),[])}),V=Rt||function(){return zt.Date.now()};function Z(r,i){if(typeof i!="function")throw new ar(p);return r=it(r),function(){if(--r<1)return i.apply(this,arguments)}}function de(r,i,u){return i=u?s:i,i=r&&i==null?r.length:i,Jr(r,b,s,s,s,s,i)}function Se(r,i){var u;if(typeof i!="function")throw new ar(p);return r=it(r),function(){return--r>0&&(u=i.apply(this,arguments)),r<=1&&(i=s),u}}var Ne=rt(function(r,i,u){var x=$;if(u.length){var E=lr(u,wi(Ne));x|=O}return Jr(r,x,i,u,E)}),we=rt(function(r,i,u){var x=$|T;if(u.length){var E=lr(u,wi(we));x|=O}return Jr(i,x,r,u,E)});function Me(r,i,u){i=u?s:i;var x=Jr(r,M,s,s,s,s,s,i);return x.placeholder=Me.placeholder,x}function ze(r,i,u){i=u?s:i;var x=Jr(r,P,s,s,s,s,s,i);return x.placeholder=ze.placeholder,x}function Ie(r,i,u){var x,E,I,G,J,ie,xe=0,ye=!1,_e=!1,Re=!0;if(typeof r!="function")throw new ar(p);i=ni(i)||0,Yt(u)&&(ye=!!u.leading,_e="maxWait"in u,I=_e?Gt(ni(u.maxWait)||0,i):I,Re="trailing"in u?!!u.trailing:Re);function Le(nn){var bi=x,Ls=E;return x=E=s,xe=nn,G=r.apply(Ls,bi),G}function Xe(nn){return xe=nn,J=To(dt,i),ye?Le(nn):G}function st(nn){var bi=nn-ie,Ls=nn-xe,y0=i-bi;return _e?_n(y0,I-Ls):y0}function Ke(nn){var bi=nn-ie,Ls=nn-xe;return ie===s||bi>=i||bi<0||_e&&Ls>=I}function dt(){var nn=V();if(Ke(nn))return pt(nn);J=To(dt,st(nn))}function pt(nn){return J=s,Re&&x?Le(nn):(x=E=s,G)}function Or(){J!==s&&Tc(J),xe=0,x=ie=E=J=s}function rr(){return J===s?G:pt(V())}function Ir(){var nn=V(),bi=Ke(nn);if(x=arguments,E=this,ie=nn,bi){if(J===s)return Xe(ie);if(_e)return Tc(J),J=To(dt,i),Le(ie)}return J===s&&(J=To(dt,i)),G}return Ir.cancel=Or,Ir.flush=rr,Ir}var Vt=rt(function(r,i){return mc(r,1,i)}),oe=rt(function(r,i,u){return mc(r,ni(i)||0,u)});function ee(r){return Jr(r,Y)}function ae(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new ar(p);var u=function(){var x=arguments,E=i?i.apply(this,x):x[0],I=u.cache;if(I.has(E))return I.get(E);var G=r.apply(this,x);return u.cache=I.set(E,G)||I,G};return u.cache=new(ae.Cache||ur),u}ae.Cache=ur;function be(r){if(typeof r!="function")throw new ar(p);return function(){var i=arguments;switch(i.length){case 0:return!r.call(this);case 1:return!r.call(this,i[0]);case 2:return!r.call(this,i[0],i[1]);case 3:return!r.call(this,i[0],i[1],i[2])}return!r.apply(this,i)}}function $e(r){return Se(2,r)}var Ue=Ef(function(r,i){i=i.length==1&&nt(i[0])?jt(i[0],Kn(Ye())):jt(Bt(i,1),Kn(Ye()));var u=i.length;return rt(function(x){for(var E=-1,I=_n(x.length,u);++E<I;)x[E]=i[E].call(this,x[E]);return Mn(r,this,x)})}),Fe=rt(function(r,i){var u=lr(i,wi(Fe));return Jr(r,O,s,i,u)}),Ge=rt(function(r,i){var u=lr(i,wi(Ge));return Jr(r,F,s,i,u)}),cn=ei(function(r,i){return Jr(r,U,s,s,s,i)});function xt(r,i){if(typeof r!="function")throw new ar(p);return i=i===s?i:it(i),rt(r,i)}function Ji(r,i){if(typeof r!="function")throw new ar(p);return i=i==null?0:Gt(it(i),0),rt(function(u){var x=u[i],E=vi(u,0,i);return x&&Di(E,x),Mn(r,this,E)})}function Dp(r,i,u){var x=!0,E=!0;if(typeof r!="function")throw new ar(p);return Yt(u)&&(x="leading"in u?!!u.leading:x,E="trailing"in u?!!u.trailing:E),Ie(r,i,{leading:x,maxWait:i,trailing:E})}function Ey(r){return de(r,1)}function Cy(r,i){return Fe(Ka(i),r)}function ky(){if(!arguments.length)return[];var r=arguments[0];return nt(r)?r:[r]}function jy(r){return Yn(r,D)}function Ty(r,i){return i=typeof i=="function"?i:s,Yn(r,D,i)}function Py(r){return Yn(r,_|D)}function Ry(r,i){return i=typeof i=="function"?i:s,Yn(r,_|D,i)}function Ay(r,i){return i==null||gl(r,i,Tn(i))}function Ni(r,i){return r===i||r!==r&&i!==i}var My=ru(Bi),Dy=ru(function(r,i){return r>=i}),Hl=Ua(function(){return arguments}())?Ua:function(r){return Kt(r)&&mt.call(r,"callee")&&!Ca.call(r,"callee")},nt=ue.isArray,zy=Zu?Kn(Zu):Nf;function vr(r){return r!=null&&nh(r.length)&&!Is(r)}function tn(r){return Kt(r)&&vr(r)}function Oy(r){return r===!0||r===!1||Kt(r)&&gn(r)==Pe}var Ao=fc||Vp,Iy=Un?Kn(Un):mi;function $y(r){return Kt(r)&&r.nodeType===1&&!ad(r)}function Ly(r){if(r==null)return!0;if(vr(r)&&(nt(r)||typeof r=="string"||typeof r.splice=="function"||Ao(r)||Cu(r)||Hl(r)))return!r.length;var i=xn(r);if(i==ot||i==bt)return!r.size;if(Si(r))return!xi(r).length;for(var u in r)if(mt.call(r,u))return!1;return!0}function Fy(r,i){return pr(r,i)}function Hy(r,i,u){u=typeof u=="function"?u:s;var x=u?u(r,i):s;return x===s?pr(r,i,s,u):!!x}function zp(r){if(!Kt(r))return!1;var i=gn(r);return i==ft||i==We||typeof r.message=="string"&&typeof r.name=="string"&&!ad(r)}function Uy(r){return typeof r=="number"&&lo(r)}function Is(r){if(!Yt(r))return!1;var i=gn(r);return i==St||i==Pt||i==je||i==Ft}function t0(r){return typeof r=="number"&&r==it(r)}function nh(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Q}function Yt(r){var i=typeof r;return r!=null&&(i=="object"||i=="function")}function Kt(r){return r!=null&&typeof r=="object"}var n0=gs?Kn(gs):bf;function By(r,i){return r===i||yo(r,i,Pl(i))}function Wy(r,i,u){return u=typeof u=="function"?u:s,yo(r,i,Pl(i),u)}function Vy(r){return r0(r)&&r!=+r}function Yy(r){if(yp(r))throw new Qe(g);return vc(r)}function qy(r){return r===null}function Gy(r){return r==null}function r0(r){return typeof r=="number"||Kt(r)&&gn(r)==ct}function ad(r){if(!Kt(r)||gn(r)!=Ze)return!1;var i=Cr(r);if(i===null)return!0;var u=mt.call(i,"constructor")&&i.constructor;return typeof u=="function"&&u instanceof u&&sl.call(u)==ba}var Op=ga?Kn(ga):yl;function Xy(r){return t0(r)&&r>=-9007199254740991&&r<=Q}var i0=eo?Kn(eo):Kr;function rh(r){return typeof r=="string"||!nt(r)&&Kt(r)&&gn(r)==Qt}function zr(r){return typeof r=="symbol"||Kt(r)&&gn(r)==dn}var Cu=qd?Kn(qd):vl;function Ky(r){return r===s}function Zy(r){return Kt(r)&&xn(r)==sn}function Qy(r){return Kt(r)&&gn(r)==he}var Jy=ru(Wi),ev=ru(function(r,i){return r<=i});function s0(r){if(!r)return[];if(vr(r))return rh(r)?Zn(r):zn(r);if(di&&r[di])return lp(r[di]());var i=xn(r),u=i==ot?wa:i==bt?zi:ku;return u(r)}function $s(r){if(!r)return r===0?r:0;if(r=ni(r),r===te||r===-1/0){var i=r<0?-1:1;return i*C}return r===r?r:0}function it(r){var i=$s(r),u=i%1;return i===i?u?i-u:i:0}function o0(r){return r?hi(it(r),0,A):0}function ni(r){if(typeof r=="number")return r;if(zr(r))return L;if(Yt(r)){var i=typeof r.valueOf=="function"?r.valueOf():r;r=Yt(i)?i+"":i}if(typeof r!="string")return r===0?r:+r;r=Jd(r);var u=Uu.test(r);return u||ra.test(r)?ha(r.slice(2),u?2:8):ta.test(r)?L:+r}function l0(r){return jr(r,wr(r))}function tv(r){return r?hi(it(r),-9007199254740991,Q):r===0?r:0}function Ct(r){return r==null?"":qn(r)}var nv=bo(function(r,i){if(Si(i)||vr(i)){jr(i,Tn(i),r);return}for(var u in i)mt.call(i,u)&&Ns(r,u,i[u])}),a0=bo(function(r,i){jr(i,wr(i),r)}),ih=bo(function(r,i,u,x){jr(i,wr(i),r,x)}),rv=bo(function(r,i,u,x){jr(i,Tn(i),r,x)}),iv=ei($a);function sv(r,i){var u=ho(r);return i==null?u:Mt(u,i)}var ov=rt(function(r,i){r=Et(r);var u=-1,x=i.length,E=x>2?i[2]:s;for(E&&In(i[0],i[1],E)&&(x=1);++u<x;)for(var I=i[u],G=wr(I),J=-1,ie=G.length;++J<ie;){var xe=G[J],ye=r[xe];(ye===s||Ni(ye,Ur[xe])&&!mt.call(r,xe))&&(r[xe]=I[xe])}return r}),lv=rt(function(r){return r.push(s,$c),Mn(u0,s,r)});function av(r,i){return Xd(r,Ye(i,3),er)}function uv(r,i){return Xd(r,Ye(i,3),Ui)}function cv(r,i){return r==null?r:La(r,Ye(i,3),wr)}function dv(r,i){return r==null?r:xl(r,Ye(i,3),wr)}function fv(r,i){return r&&er(r,Ye(i,3))}function hv(r,i){return r&&Ui(r,Ye(i,3))}function pv(r){return r==null?[]:xo(r,Tn(r))}function gv(r){return r==null?[]:xo(r,wr(r))}function Ip(r,i,u){var x=r==null?s:pi(r,i);return x===s?u:x}function mv(r,i){return r!=null&&Bc(r,i,fr)}function $p(r,i){return r!=null&&Bc(r,i,Es)}var xv=Rf(function(r,i,u){i!=null&&typeof i.toString!="function"&&(i=ol.call(i)),r[i]=u},Fp(Sr)),yv=Rf(function(r,i,u){i!=null&&typeof i.toString!="function"&&(i=ol.call(i)),mt.call(r,i)?r[i].push(u):r[i]=[u]},Ye),vv=rt(hr);function Tn(r){return vr(r)?Vr(r):xi(r)}function wr(r){return vr(r)?Vr(r,!0):wc(r)}function wv(r,i){var u={};return i=Ye(i,3),er(r,function(x,E,I){qr(u,i(x,E,I),x)}),u}function Sv(r,i){var u={};return i=Ye(i,3),er(r,function(x,E,I){qr(u,E,i(x,E,I))}),u}var _v=bo(function(r,i,u){Cs(r,i,u)}),u0=bo(function(r,i,u,x){Cs(r,i,u,x)}),Nv=ei(function(r,i){var u={};if(r==null)return u;var x=!1;i=jt(i,function(I){return I=Qr(I,r),x||(x=I.length>1),I}),jr(r,jl(r),u),x&&(u=Yn(u,_|R|D,Lc));for(var E=i.length;E--;)Ga(u,i[E]);return u});function bv(r,i){return c0(r,be(Ye(i)))}var Ev=ei(function(r,i){return r==null?{}:Nc(r,i)});function c0(r,i){if(r==null)return{};var u=jt(jl(r),function(x){return[x]});return i=Ye(i),Vi(r,u,function(x,E){return i(x,E[0])})}function Cv(r,i,u){i=Qr(i,r);var x=-1,E=i.length;for(E||(E=1,r=s);++x<E;){var I=r==null?s:r[Ar(i[x])];I===s&&(x=E,I=u),r=Is(I)?I.call(r):I}return r}function kv(r,i,u){return r==null?r:js(r,i,u)}function jv(r,i,u,x){return x=typeof x=="function"?x:s,r==null?r:js(r,i,u,x)}var d0=Oc(Tn),f0=Oc(wr);function Tv(r,i,u){var x=nt(r),E=x||Ao(r)||Cu(r);if(i=Ye(i,4),u==null){var I=r&&r.constructor;E?u=x?new I:[]:Yt(r)?u=Is(I)?ho(Cr(r)):{}:u={}}return(E?Sn:er)(r,function(G,J,ie){return i(u,G,J,ie)}),u}function Pv(r,i){return r==null?!0:Ga(r,i)}function Rv(r,i,u){return r==null?r:jc(r,i,Ka(u))}function Av(r,i,u,x){return x=typeof x=="function"?x:s,r==null?r:jc(r,i,Ka(u),x)}function ku(r){return r==null?[]:rl(r,Tn(r))}function Mv(r){return r==null?[]:rl(r,wr(r))}function Dv(r,i,u){return u===s&&(u=i,i=s),u!==s&&(u=ni(u),u=u===u?u:0),i!==s&&(i=ni(i),i=i===i?i:0),hi(ni(r),i,u)}function zv(r,i,u){return i=$s(i),u===s?(u=i,i=0):u=$s(u),r=ni(r),yc(r,i,u)}function Ov(r,i,u){if(u&&typeof u!="boolean"&&In(r,i,u)&&(i=u=s),u===s&&(typeof i=="boolean"?(u=i,i=s):typeof r=="boolean"&&(u=r,r=s)),r===s&&i===s?(r=0,i=1):(r=$s(r),i===s?(i=r,r=0):i=$s(i)),r>i){var x=r;r=i,i=x}if(u||r%1||i%1){var E=cl();return _n(r+E*(i-r+Xu("1e-"+((E+"").length-1))),i)}return wo(r,i)}var Iv=Ts(function(r,i,u){return i=i.toLowerCase(),r+(u?h0(i):i)});function h0(r){return Lp(Ct(r).toLowerCase())}function p0(r){return r=Ct(r),r&&r.replace(sa,nf).replace(Bd,"")}function $v(r,i,u){r=Ct(r),i=qn(i);var x=r.length;u=u===s?x:hi(it(u),0,x);var E=u;return u-=i.length,u>=0&&r.slice(u,E)==i}function Lv(r){return r=Ct(r),r&&Kl.test(r)?r.replace(sr,rf):r}function Fv(r){return r=Ct(r),r&&as.test(r)?r.replace(ls,"\\$&"):r}var Hv=Ts(function(r,i,u){return r+(u?"-":"")+i.toLowerCase()}),Uv=Ts(function(r,i,u){return r+(u?" ":"")+i.toLowerCase()}),Bv=Mc("toLowerCase");function Wv(r,i,u){r=Ct(r),i=it(i);var x=i?ms(r):0;if(!i||x>=i)return r;var E=(i-x)/2;return Cl(Oi(E),u)+r+Cl(ys(E),u)}function Vv(r,i,u){r=Ct(r),i=it(i);var x=i?ms(r):0;return i&&x<i?r+Cl(i-x,u):r}function Yv(r,i,u){r=Ct(r),i=it(i);var x=i?ms(r):0;return i&&x<i?Cl(i-x,u)+r:r}function qv(r,i,u){return u||i==null?i=0:i&&(i=+i),hf(Ct(r).replace(Wo,""),i||0)}function Gv(r,i,u){return(u?In(r,i,u):i===s)?i=1:i=it(i),ks(Ct(r),i)}function Xv(){var r=arguments,i=Ct(r[0]);return r.length<3?i:i.replace(r[1],r[2])}var Kv=Ts(function(r,i,u){return r+(u?"_":"")+i.toLowerCase()});function Zv(r,i,u){return u&&typeof u!="number"&&In(r,i,u)&&(i=u=s),u=u===s?A:u>>>0,u?(r=Ct(r),r&&(typeof i=="string"||i!=null&&!Op(i))&&(i=qn(i),!i&&ro(r))?vi(Zn(r),0,u):r.split(i,u)):[]}var Qv=Ts(function(r,i,u){return r+(u?" ":"")+Lp(i)});function Jv(r,i,u){return r=Ct(r),u=u==null?0:hi(it(u),0,r.length),i=qn(i),r.slice(u,u+i.length)==i}function ew(r,i,u){var x=z.templateSettings;u&&In(r,i,u)&&(i=s),r=Ct(r),i=ih({},i,x,Ic);var E=ih({},i.imports,x.imports,Ic),I=Tn(E),G=rl(E,I),J,ie,xe=0,ye=i.interpolate||cs,_e="__p += '",Re=il((i.escape||cs).source+"|"+ye.source+"|"+(ye===Uo?li:cs).source+"|"+(i.evaluate||cs).source+"|$","g"),Le="//# sourceURL="+(mt.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Qh+"]")+`
`;r.replace(Re,function(Ke,dt,pt,Or,rr,Ir){return pt||(pt=Or),_e+=r.slice(xe,Ir).replace(Bu,sf),dt&&(J=!0,_e+=`' +
__e(`+dt+`) +
'`),rr&&(ie=!0,_e+=`';
`+rr+`;
__p += '`),pt&&(_e+=`' +
((__t = (`+pt+`)) == null ? '' : __t) +
'`),xe=Ir+Ke.length,Ke}),_e+=`';
`;var Xe=mt.call(i,"variable")&&i.variable;if(!Xe)_e=`with (obj) {
`+_e+`
}
`;else if(Hu.test(Xe))throw new Qe(y);_e=(ie?_e.replace(ln,""):_e).replace(hn,"$1").replace(pn,"$1;"),_e="function("+(Xe||"obj")+`) {
`+(Xe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(J?", __e = _.escape":"")+(ie?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+_e+`return __p
}`;var st=m0(function(){return gt(I,Le+"return "+_e).apply(s,G)});if(st.source=_e,zp(st))throw st;return st}function tw(r){return Ct(r).toLowerCase()}function nw(r){return Ct(r).toUpperCase()}function rw(r,i,u){if(r=Ct(r),r&&(u||i===s))return Jd(r);if(!r||!(i=qn(i)))return r;var x=Zn(r),E=Zn(i),I=ef(x,E),G=lc(x,E)+1;return vi(x,I,G).join("")}function iw(r,i,u){if(r=Ct(r),r&&(u||i===s))return r.slice(0,_a(r)+1);if(!r||!(i=qn(i)))return r;var x=Zn(r),E=lc(x,Zn(i))+1;return vi(x,0,E).join("")}function sw(r,i,u){if(r=Ct(r),r&&(u||i===s))return r.replace(Wo,"");if(!r||!(i=qn(i)))return r;var x=Zn(r),E=ef(x,Zn(i));return vi(x,E).join("")}function ow(r,i){var u=re,x=se;if(Yt(i)){var E="separator"in i?i.separator:E;u="length"in i?it(i.length):u,x="omission"in i?qn(i.omission):x}r=Ct(r);var I=r.length;if(ro(r)){var G=Zn(r);I=G.length}if(u>=I)return r;var J=u-ms(x);if(J<1)return x;var ie=G?vi(G,0,J).join(""):r.slice(0,J);if(E===s)return ie+x;if(G&&(J+=ie.length-J),Op(E)){if(r.slice(J).search(E)){var xe,ye=ie;for(E.global||(E=il(E.source,Ct(Yo.exec(E))+"g")),E.lastIndex=0;xe=E.exec(ye);)var _e=xe.index;ie=ie.slice(0,_e===s?J:_e)}}else if(r.indexOf(qn(E),J)!=J){var Re=ie.lastIndexOf(E);Re>-1&&(ie=ie.slice(0,Re))}return ie+x}function lw(r){return r=Ct(r),r&&Fr.test(r)?r.replace(Hn,of):r}var aw=Ts(function(r,i,u){return r+(u?" ":"")+i.toUpperCase()}),Lp=Mc("toUpperCase");function g0(r,i,u){return r=Ct(r),i=u?s:i,i===s?op(r)?cp(r):rp(r):r.match(i)||[]}var m0=rt(function(r,i){try{return Mn(r,s,i)}catch(u){return zp(u)?u:new Qe(u)}}),uw=ei(function(r,i){return Sn(i,function(u){u=Ar(u),qr(r,u,Ne(r[u],r))}),r});function cw(r){var i=r==null?0:r.length,u=Ye();return r=i?jt(r,function(x){if(typeof x[1]!="function")throw new ar(p);return[u(x[0]),x[1]]}):[],rt(function(x){for(var E=-1;++E<i;){var I=r[E];if(Mn(I[0],this,x))return Mn(I[1],this,x)}})}function dw(r){return wf(Yn(r,_))}function Fp(r){return function(){return r}}function fw(r,i){return r==null||r!==r?i:r}var hw=tu(),pw=tu(!0);function Sr(r){return r}function Hp(r){return vo(typeof r=="function"?r:Yn(r,_))}function gw(r){return Wa(Yn(r,_))}function mw(r,i){return Ot(r,Yn(i,_))}var xw=rt(function(r,i){return function(u){return hr(u,r,i)}}),yw=rt(function(r,i){return function(u){return hr(r,u,i)}});function Up(r,i,u){var x=Tn(i),E=xo(i,x);u==null&&!(Yt(i)&&(E.length||!x.length))&&(u=i,i=r,r=this,E=xo(i,Tn(i)));var I=!(Yt(u)&&"chain"in u)||!!u.chain,G=Is(r);return Sn(E,function(J){var ie=i[J];r[J]=ie,G&&(r.prototype[J]=function(){var xe=this.__chain__;if(I||xe){var ye=r(this.__wrapped__),_e=ye.__actions__=zn(this.__actions__);return _e.push({func:ie,args:arguments,thisArg:r}),ye.__chain__=xe,ye}return ie.apply(r,Di([this.value()],arguments))})}),r}function vw(){return zt._===this&&(zt._=uf),this}function Bp(){}function ww(r){return r=it(r),rt(function(i){return Va(i,r)})}var Sw=nu(jt),_w=nu(Ju),Nw=nu(nc);function x0(r){return De(r)?ic(Ar(r)):Ht(r)}function bw(r){return function(i){return r==null?s:pi(r,i)}}var Ew=zc(),Cw=zc(!0);function Wp(){return[]}function Vp(){return!1}function kw(){return{}}function jw(){return""}function Tw(){return!0}function Pw(r,i){if(r=it(r),r<1||r>Q)return[];var u=A,x=_n(r,A);i=Ye(i),r-=A;for(var E=oc(x,i);++u<r;)i(u);return E}function Rw(r){return nt(r)?jt(r,Ar):zr(r)?[r]:zn(qc(Ct(r)))}function Aw(r){var i=++oo;return Ct(r)+i}var Mw=El(function(r,i){return r+i},0),Dw=mn("ceil"),zw=El(function(r,i){return r/i},1),Ow=mn("floor");function Iw(r){return r&&r.length?bs(r,Sr,Bi):s}function $w(r,i){return r&&r.length?bs(r,Ye(i,2),Bi):s}function Lw(r){return Zd(r,Sr)}function Fw(r,i){return Zd(r,Ye(i,2))}function Hw(r){return r&&r.length?bs(r,Sr,Wi):s}function Uw(r,i){return r&&r.length?bs(r,Ye(i,2),Wi):s}var Bw=El(function(r,i){return r*i},1),Ww=mn("round"),Vw=El(function(r,i){return r-i},0);function Yw(r){return r&&r.length?sc(r,Sr):0}function qw(r,i){return r&&r.length?sc(r,Ye(i,2)):0}return z.after=Z,z.ary=de,z.assign=nv,z.assignIn=a0,z.assignInWith=ih,z.assignWith=rv,z.at=iv,z.before=Se,z.bind=Ne,z.bindAll=uw,z.bindKey=we,z.castArray=ky,z.chain=yu,z.chunk=cu,z.compact=Gc,z.concat=xr,z.cond=cw,z.conforms=dw,z.constant=Fp,z.countBy=Zf,z.create=sv,z.curry=Me,z.curryRight=ze,z.debounce=Ie,z.defaults=ov,z.defaultsDeep=lv,z.defer=Vt,z.delay=oe,z.difference=ht,z.differenceBy=un,z.differenceWith=Xt,z.drop=vn,z.dropRight=nr,z.dropRightWhile=Po,z.dropWhile=en,z.fill=Dl,z.filter=Su,z.flatMap=od,z.flatMapDeep=Pp,z.flatMapDepth=eh,z.flatten=du,z.flattenDeep=Ol,z.flattenDepth=Gn,z.flip=ee,z.flow=hw,z.flowRight=pw,z.fromPairs=Xc,z.functions=pv,z.functionsIn=gv,z.groupBy=ld,z.initial=fu,z.intersection=Kc,z.intersectionBy=Xi,z.intersectionWith=hu,z.invert=xv,z.invertBy=yv,z.invokeMap=th,z.iteratee=Hp,z.keyBy=Rp,z.keys=Tn,z.keysIn=wr,z.map=Os,z.mapKeys=wv,z.mapValues=Sv,z.matches=gw,z.matchesProperty=mw,z.memoize=ae,z.merge=_v,z.mergeWith=u0,z.method=xw,z.methodOf=yw,z.mixin=Up,z.negate=be,z.nthArg=ww,z.omit=Nv,z.omitBy=bv,z.once=$e,z.orderBy=Ap,z.over=Sw,z.overArgs=Ue,z.overEvery=_w,z.overSome=Nw,z.partial=Fe,z.partialRight=Ge,z.partition=Fl,z.pick=Ev,z.pickBy=c0,z.property=x0,z.propertyOf=bw,z.pull=pu,z.pullAll=$l,z.pullAllBy=Ln,z.pullAllWith=Zi,z.pullAt=Mr,z.range=Ew,z.rangeRight=Cw,z.rearg=cn,z.reject=e,z.remove=Xn,z.rest=xt,z.reverse=gu,z.sampleSize=o,z.set=kv,z.setWith=jv,z.shuffle=a,z.slice=Qc,z.sortBy=k,z.sortedUniq=td,z.sortedUniqBy=Ms,z.split=Zv,z.spread=Ji,z.tail=Wf,z.take=Vf,z.takeRight=nd,z.takeRightWhile=mu,z.takeWhile=wp,z.tap=kp,z.throttle=Dp,z.thru=Dr,z.toArray=s0,z.toPairs=d0,z.toPairsIn=f0,z.toPath=Rw,z.toPlainObject=l0,z.transform=Tv,z.unary=Ey,z.union=Sp,z.unionBy=Yf,z.unionWith=qf,z.uniq=Ds,z.uniqBy=_p,z.uniqWith=Ro,z.unset=Pv,z.unzip=xu,z.unzipWith=Ut,z.update=Rv,z.updateWith=Av,z.values=ku,z.valuesIn=Mv,z.without=Np,z.words=g0,z.wrap=Cy,z.xor=Gf,z.xorBy=bp,z.xorWith=Ep,z.zip=Xf,z.zipObject=Kf,z.zipObjectDeep=Cp,z.zipWith=yr,z.entries=d0,z.entriesIn=f0,z.extend=a0,z.extendWith=ih,Up(z,z),z.add=Mw,z.attempt=m0,z.camelCase=Iv,z.capitalize=h0,z.ceil=Dw,z.clamp=Dv,z.clone=jy,z.cloneDeep=Py,z.cloneDeepWith=Ry,z.cloneWith=Ty,z.conformsTo=Ay,z.deburr=p0,z.defaultTo=fw,z.divide=zw,z.endsWith=$v,z.eq=Ni,z.escape=Lv,z.escapeRegExp=Fv,z.every=Qf,z.find=_u,z.findIndex=Gi,z.findKey=av,z.findLast=Jf,z.findLastIndex=zl,z.findLastKey=uv,z.floor=Ow,z.forEach=Nu,z.forEachRight=Ll,z.forIn=cv,z.forInRight=dv,z.forOwn=fv,z.forOwnRight=hv,z.get=Ip,z.gt=My,z.gte=Dy,z.has=mv,z.hasIn=$p,z.head=Rs,z.identity=Sr,z.includes=bu,z.indexOf=_i,z.inRange=zv,z.invoke=vv,z.isArguments=Hl,z.isArray=nt,z.isArrayBuffer=zy,z.isArrayLike=vr,z.isArrayLikeObject=tn,z.isBoolean=Oy,z.isBuffer=Ao,z.isDate=Iy,z.isElement=$y,z.isEmpty=Ly,z.isEqual=Fy,z.isEqualWith=Hy,z.isError=zp,z.isFinite=Uy,z.isFunction=Is,z.isInteger=t0,z.isLength=nh,z.isMap=n0,z.isMatch=By,z.isMatchWith=Wy,z.isNaN=Vy,z.isNative=Yy,z.isNil=Gy,z.isNull=qy,z.isNumber=r0,z.isObject=Yt,z.isObjectLike=Kt,z.isPlainObject=ad,z.isRegExp=Op,z.isSafeInteger=Xy,z.isSet=i0,z.isString=rh,z.isSymbol=zr,z.isTypedArray=Cu,z.isUndefined=Ky,z.isWeakMap=Zy,z.isWeakSet=Qy,z.join=Ki,z.kebabCase=Hv,z.last=$n,z.lastIndexOf=Il,z.lowerCase=Uv,z.lowerFirst=Bv,z.lt=Jy,z.lte=ev,z.max=Iw,z.maxBy=$w,z.mean=Lw,z.meanBy=Fw,z.min=Hw,z.minBy=Uw,z.stubArray=Wp,z.stubFalse=Vp,z.stubObject=kw,z.stubString=jw,z.stubTrue=Tw,z.multiply=Bw,z.nth=Zc,z.noConflict=vw,z.noop=Bp,z.now=V,z.pad=Wv,z.padEnd=Vv,z.padStart=Yv,z.parseInt=qv,z.random=Ov,z.reduce=Mp,z.reduceRight=Eu,z.repeat=Gv,z.replace=Xv,z.result=Cv,z.round=Ww,z.runInContext=ne,z.sample=t,z.size=h,z.snakeCase=Kv,z.some=m,z.sortedIndex=Jc,z.sortedIndexBy=vp,z.sortedIndexOf=Qi,z.sortedLastIndex=Bf,z.sortedLastIndexBy=ed,z.sortedLastIndexOf=As,z.startCase=Qv,z.startsWith=Jv,z.subtract=Vw,z.sum=Yw,z.sumBy=qw,z.template=ew,z.times=Pw,z.toFinite=$s,z.toInteger=it,z.toLength=o0,z.toLower=tw,z.toNumber=ni,z.toSafeInteger=tv,z.toString=Ct,z.toUpper=nw,z.trim=rw,z.trimEnd=iw,z.trimStart=sw,z.truncate=ow,z.unescape=lw,z.uniqueId=Aw,z.upperCase=aw,z.upperFirst=Lp,z.each=Nu,z.eachRight=Ll,z.first=Rs,Up(z,function(){var r={};return er(z,function(i,u){mt.call(z.prototype,u)||(r[u]=i)}),r}(),{chain:!1}),z.VERSION=d,Sn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){z[r].placeholder=z}),Sn(["drop","take"],function(r,i){tt.prototype[r]=function(u){u=u===s?1:Gt(it(u),0);var x=this.__filtered__&&!i?new tt(this):this.clone();return x.__filtered__?x.__takeCount__=_n(u,x.__takeCount__):x.__views__.push({size:_n(u,A),type:r+(x.__dir__<0?"Right":"")}),x},tt.prototype[r+"Right"]=function(u){return this.reverse()[r](u).reverse()}}),Sn(["filter","map","takeWhile"],function(r,i){var u=i+1,x=u==j||u==X;tt.prototype[r]=function(E){var I=this.clone();return I.__iteratees__.push({iteratee:Ye(E,3),type:u}),I.__filtered__=I.__filtered__||x,I}}),Sn(["head","last"],function(r,i){var u="take"+(i?"Right":"");tt.prototype[r]=function(){return this[u](1).value()[0]}}),Sn(["initial","tail"],function(r,i){var u="drop"+(i?"":"Right");tt.prototype[r]=function(){return this.__filtered__?new tt(this):this[u](1)}}),tt.prototype.compact=function(){return this.filter(Sr)},tt.prototype.find=function(r){return this.filter(r).head()},tt.prototype.findLast=function(r){return this.reverse().find(r)},tt.prototype.invokeMap=rt(function(r,i){return typeof r=="function"?new tt(this):this.map(function(u){return hr(u,r,i)})}),tt.prototype.reject=function(r){return this.filter(be(Ye(r)))},tt.prototype.slice=function(r,i){r=it(r);var u=this;return u.__filtered__&&(r>0||i<0)?new tt(u):(r<0?u=u.takeRight(-r):r&&(u=u.drop(r)),i!==s&&(i=it(i),u=i<0?u.dropRight(-i):u.take(i-r)),u)},tt.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},tt.prototype.toArray=function(){return this.take(A)},er(tt.prototype,function(r,i){var u=/^(?:filter|find|map|reject)|While$/.test(i),x=/^(?:head|last)$/.test(i),E=z[x?"take"+(i=="last"?"Right":""):i],I=x||/^find/.test(i);E&&(z.prototype[i]=function(){var G=this.__wrapped__,J=x?[1]:arguments,ie=G instanceof tt,xe=J[0],ye=ie||nt(G),_e=function(dt){var pt=E.apply(z,Di([dt],J));return x&&Re?pt[0]:pt};ye&&u&&typeof xe=="function"&&xe.length!=1&&(ie=ye=!1);var Re=this.__chain__,Le=!!this.__actions__.length,Xe=I&&!Re,st=ie&&!Le;if(!I&&ye){G=st?G:new tt(this);var Ke=r.apply(G,J);return Ke.__actions__.push({func:Dr,args:[_e],thisArg:s}),new Nn(Ke,Re)}return Xe&&st?r.apply(this,J):(Ke=this.thru(_e),Xe?x?Ke.value()[0]:Ke.value():Ke)})}),Sn(["pop","push","shift","sort","splice","unshift"],function(r){var i=ui[r],u=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",x=/^(?:pop|shift)$/.test(r);z.prototype[r]=function(){var E=arguments;if(x&&!this.__chain__){var I=this.value();return i.apply(nt(I)?I:[],E)}return this[u](function(G){return i.apply(nt(G)?G:[],E)})}}),er(tt.prototype,function(r,i){var u=z[i];if(u){var x=u.name+"";mt.call(co,x)||(co[x]=[]),co[x].push({name:i,func:u})}}),co[Co(s,T).name]=[{name:"wrapper",func:s}],tt.prototype.clone=Ma,tt.prototype.reverse=pc,tt.prototype.value=po,z.prototype.at=vu,z.prototype.chain=zs,z.prototype.commit=wu,z.prototype.next=rd,z.prototype.plant=jp,z.prototype.reverse=sd,z.prototype.toJSON=z.prototype.valueOf=z.prototype.value=Tp,z.prototype.first=z.prototype.head,di&&(z.prototype[di]=id),z},io=dp();Hr?((Hr.exports=io)._=io,nl._=io):zt._=io}).call(vE)}(bd,bd.exports)),bd.exports}var SE=wE();const _E=({id:n,sourceX:l,sourceY:s,targetX:d,targetY:f,source:g,target:p,data:y})=>{const[w,v,S]=Gg({sourceX:l,sourceY:s,targetX:d,targetY:f}),_=async()=>{try{const R=await fetch(`http://127.0.0.1:8000/memos/${y.novelId}/${g}/disconnect/${p}`,{method:"DELETE"});if(!R.ok){console.error("Error disconnecting memo:",await R.text());return}y.setEdges(D=>D.filter(B=>B.id!==n)),y.setNodes(D=>D.map(B=>{var H;return{...B,connections:(H=B.connections)==null?void 0:H.filter($=>$!==p)}}))}catch(R){console.error("Error disconnecting memo:",R)}};return c.jsxs(c.Fragment,{children:[c.jsx("path",{id:n,className:"react-flow__edge-path",d:w,stroke:"black",strokeWidth:"2",fill:"none"}),c.jsx("text",{x:v,y:S,textAnchor:"middle",dominantBaseline:"middle",fontSize:"16px",fill:"red",fontWeight:"bold",style:{cursor:"pointer",userSelect:"none"},onClick:_,children:""})]})};var gd={exports:{}},md={},xd={exports:{}},fg={},hg={exports:{}},pg,km;function NE(){if(km)return pg;km=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return pg=n,pg}var gg,jm;function bE(){if(jm)return gg;jm=1;var n=NE();function l(){}function s(){}return s.resetWarningCache=l,gg=function(){function d(p,y,w,v,S,_){if(_!==n){var R=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw R.name="Invariant Violation",R}}d.isRequired=d;function f(){return d}var g={array:d,bigint:d,bool:d,func:d,number:d,object:d,string:d,symbol:d,any:d,arrayOf:f,element:d,elementType:d,instanceOf:f,node:d,objectOf:f,oneOf:f,oneOfType:f,shape:f,exact:f,checkPropTypes:s,resetWarningCache:l};return g.PropTypes=g,g},gg}var Tm;function qh(){return Tm||(Tm=1,hg.exports=bE()()),hg.exports}function vy(n){var l,s,d="";if(typeof n=="string"||typeof n=="number")d+=n;else if(typeof n=="object")if(Array.isArray(n))for(l=0;l<n.length;l++)n[l]&&(s=vy(n[l]))&&(d&&(d+=" "),d+=s);else for(l in n)n[l]&&(d&&(d+=" "),d+=l);return d}function Pm(){for(var n,l,s=0,d="";s<arguments.length;)(n=arguments[s++])&&(l=vy(n))&&(d&&(d+=" "),d+=l);return d}const EE=Object.freeze(Object.defineProperty({__proto__:null,clsx:Pm,default:Pm},Symbol.toStringTag,{value:"Module"})),CE=Gw(EE);var rn={},zo={},Rm;function Gh(){if(Rm)return zo;Rm=1,Object.defineProperty(zo,"__esModule",{value:!0}),zo.dontSetMe=f,zo.findInArray=n,zo.int=d,zo.isFunction=l,zo.isNum=s;function n(g,p){for(let y=0,w=g.length;y<w;y++)if(p.apply(p,[g[y],y,g]))return g[y]}function l(g){return typeof g=="function"||Object.prototype.toString.call(g)==="[object Function]"}function s(g){return typeof g=="number"&&!isNaN(g)}function d(g){return parseInt(g,10)}function f(g,p,y){if(g[p])return new Error("Invalid prop ".concat(p," passed to ").concat(y," - do not set this, set it on the child."))}return zo}var Oo={},Am;function kE(){if(Am)return Oo;Am=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.browserPrefixToKey=s,Oo.browserPrefixToStyle=d,Oo.default=void 0,Oo.getPrefix=l;const n=["Moz","Webkit","O","ms"];function l(){var g;let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const y=(g=window.document)===null||g===void 0||(g=g.documentElement)===null||g===void 0?void 0:g.style;if(!y||p in y)return"";for(let w=0;w<n.length;w++)if(s(p,n[w])in y)return n[w];return""}function s(g,p){return p?"".concat(p).concat(f(g)):g}function d(g,p){return p?"-".concat(p.toLowerCase(),"-").concat(g):g}function f(g){let p="",y=!0;for(let w=0;w<g.length;w++)y?(p+=g[w].toUpperCase(),y=!1):g[w]==="-"?y=!0:p+=g[w];return p}return Oo.default=l(),Oo}var Mm;function e0(){if(Mm)return rn;Mm=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.addClassName=O,rn.addEvent=y,rn.addUserSelectStyles=M,rn.createCSSTransform=B,rn.createSVGTransform=H,rn.getTouch=T,rn.getTouchIdentifier=N,rn.getTranslation=$,rn.innerHeight=_,rn.innerWidth=R,rn.matchesSelector=g,rn.matchesSelectorAndParentsTo=p,rn.offsetXYFromParent=D,rn.outerHeight=v,rn.outerWidth=S,rn.removeClassName=F,rn.removeEvent=w,rn.removeUserSelectStyles=P;var n=Gh(),l=d(kE());function s(b){if(typeof WeakMap!="function")return null;var U=new WeakMap,Y=new WeakMap;return(s=function(re){return re?Y:U})(b)}function d(b,U){if(b&&b.__esModule)return b;if(b===null||typeof b!="object"&&typeof b!="function")return{default:b};var Y=s(U);if(Y&&Y.has(b))return Y.get(b);var re={},se=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var le in b)if(le!=="default"&&Object.prototype.hasOwnProperty.call(b,le)){var ce=se?Object.getOwnPropertyDescriptor(b,le):null;ce&&(ce.get||ce.set)?Object.defineProperty(re,le,ce):re[le]=b[le]}return re.default=b,Y&&Y.set(b,re),re}let f="";function g(b,U){return f||(f=(0,n.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(Y){return(0,n.isFunction)(b[Y])})),(0,n.isFunction)(b[f])?b[f](U):!1}function p(b,U,Y){let re=b;do{if(g(re,U))return!0;if(re===Y)return!1;re=re.parentNode}while(re);return!1}function y(b,U,Y,re){if(!b)return;const se={capture:!0,...re};b.addEventListener?b.addEventListener(U,Y,se):b.attachEvent?b.attachEvent("on"+U,Y):b["on"+U]=Y}function w(b,U,Y,re){if(!b)return;const se={capture:!0,...re};b.removeEventListener?b.removeEventListener(U,Y,se):b.detachEvent?b.detachEvent("on"+U,Y):b["on"+U]=null}function v(b){let U=b.clientHeight;const Y=b.ownerDocument.defaultView.getComputedStyle(b);return U+=(0,n.int)(Y.borderTopWidth),U+=(0,n.int)(Y.borderBottomWidth),U}function S(b){let U=b.clientWidth;const Y=b.ownerDocument.defaultView.getComputedStyle(b);return U+=(0,n.int)(Y.borderLeftWidth),U+=(0,n.int)(Y.borderRightWidth),U}function _(b){let U=b.clientHeight;const Y=b.ownerDocument.defaultView.getComputedStyle(b);return U-=(0,n.int)(Y.paddingTop),U-=(0,n.int)(Y.paddingBottom),U}function R(b){let U=b.clientWidth;const Y=b.ownerDocument.defaultView.getComputedStyle(b);return U-=(0,n.int)(Y.paddingLeft),U-=(0,n.int)(Y.paddingRight),U}function D(b,U,Y){const se=U===U.ownerDocument.body?{left:0,top:0}:U.getBoundingClientRect(),le=(b.clientX+U.scrollLeft-se.left)/Y,ce=(b.clientY+U.scrollTop-se.top)/Y;return{x:le,y:ce}}function B(b,U){const Y=$(b,U,"px");return{[(0,l.browserPrefixToKey)("transform",l.default)]:Y}}function H(b,U){return $(b,U,"")}function $(b,U,Y){let{x:re,y:se}=b,le="translate(".concat(re).concat(Y,",").concat(se).concat(Y,")");if(U){const ce="".concat(typeof U.x=="string"?U.x:U.x+Y),j="".concat(typeof U.y=="string"?U.y:U.y+Y);le="translate(".concat(ce,", ").concat(j,")")+le}return le}function T(b,U){return b.targetTouches&&(0,n.findInArray)(b.targetTouches,Y=>U===Y.identifier)||b.changedTouches&&(0,n.findInArray)(b.changedTouches,Y=>U===Y.identifier)}function N(b){if(b.targetTouches&&b.targetTouches[0])return b.targetTouches[0].identifier;if(b.changedTouches&&b.changedTouches[0])return b.changedTouches[0].identifier}function M(b){if(!b)return;let U=b.getElementById("react-draggable-style-el");U||(U=b.createElement("style"),U.type="text/css",U.id="react-draggable-style-el",U.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,U.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,b.getElementsByTagName("head")[0].appendChild(U)),b.body&&O(b.body,"react-draggable-transparent-selection")}function P(b){if(b)try{if(b.body&&F(b.body,"react-draggable-transparent-selection"),b.selection)b.selection.empty();else{const U=(b.defaultView||window).getSelection();U&&U.type!=="Caret"&&U.removeAllRanges()}}catch{}}function O(b,U){b.classList?b.classList.add(U):b.className.match(new RegExp("(?:^|\\s)".concat(U,"(?!\\S)")))||(b.className+=" ".concat(U))}function F(b,U){b.classList?b.classList.remove(U):b.className=b.className.replace(new RegExp("(?:^|\\s)".concat(U,"(?!\\S)"),"g"),"")}return rn}var es={},Dm;function wy(){if(Dm)return es;Dm=1,Object.defineProperty(es,"__esModule",{value:!0}),es.canDragX=f,es.canDragY=g,es.createCoreData=y,es.createDraggableData=w,es.getBoundPosition=s,es.getControlPosition=p,es.snapToGrid=d;var n=Gh(),l=e0();function s(_,R,D){if(!_.props.bounds)return[R,D];let{bounds:B}=_.props;B=typeof B=="string"?B:v(B);const H=S(_);if(typeof B=="string"){const{ownerDocument:$}=H,T=$.defaultView;let N;if(B==="parent"?N=H.parentNode:N=$.querySelector(B),!(N instanceof T.HTMLElement))throw new Error('Bounds selector "'+B+'" could not find an element.');const M=N,P=T.getComputedStyle(H),O=T.getComputedStyle(M);B={left:-H.offsetLeft+(0,n.int)(O.paddingLeft)+(0,n.int)(P.marginLeft),top:-H.offsetTop+(0,n.int)(O.paddingTop)+(0,n.int)(P.marginTop),right:(0,l.innerWidth)(M)-(0,l.outerWidth)(H)-H.offsetLeft+(0,n.int)(O.paddingRight)-(0,n.int)(P.marginRight),bottom:(0,l.innerHeight)(M)-(0,l.outerHeight)(H)-H.offsetTop+(0,n.int)(O.paddingBottom)-(0,n.int)(P.marginBottom)}}return(0,n.isNum)(B.right)&&(R=Math.min(R,B.right)),(0,n.isNum)(B.bottom)&&(D=Math.min(D,B.bottom)),(0,n.isNum)(B.left)&&(R=Math.max(R,B.left)),(0,n.isNum)(B.top)&&(D=Math.max(D,B.top)),[R,D]}function d(_,R,D){const B=Math.round(R/_[0])*_[0],H=Math.round(D/_[1])*_[1];return[B,H]}function f(_){return _.props.axis==="both"||_.props.axis==="x"}function g(_){return _.props.axis==="both"||_.props.axis==="y"}function p(_,R,D){const B=typeof R=="number"?(0,l.getTouch)(_,R):null;if(typeof R=="number"&&!B)return null;const H=S(D),$=D.props.offsetParent||H.offsetParent||H.ownerDocument.body;return(0,l.offsetXYFromParent)(B||_,$,D.props.scale)}function y(_,R,D){const B=!(0,n.isNum)(_.lastX),H=S(_);return B?{node:H,deltaX:0,deltaY:0,lastX:R,lastY:D,x:R,y:D}:{node:H,deltaX:R-_.lastX,deltaY:D-_.lastY,lastX:_.lastX,lastY:_.lastY,x:R,y:D}}function w(_,R){const D=_.props.scale;return{node:R.node,x:_.state.x+R.deltaX/D,y:_.state.y+R.deltaY/D,deltaX:R.deltaX/D,deltaY:R.deltaY/D,lastX:_.state.x,lastY:_.state.y}}function v(_){return{left:_.left,top:_.top,right:_.right,bottom:_.bottom}}function S(_){const R=_.findDOMNode();if(!R)throw new Error("<DraggableCore>: Unmounted during event!");return R}return es}var yd={},mh={},zm;function Sy(){if(zm)return mh;zm=1,Object.defineProperty(mh,"__esModule",{value:!0}),mh.default=n;function n(){}return mh}var Om;function jE(){if(Om)return yd;Om=1,Object.defineProperty(yd,"__esModule",{value:!0}),yd.default=void 0;var n=v(is()),l=y(qh()),s=y(Lh()),d=e0(),f=wy(),g=Gh(),p=y(Sy());function y($){return $&&$.__esModule?$:{default:$}}function w($){if(typeof WeakMap!="function")return null;var T=new WeakMap,N=new WeakMap;return(w=function(M){return M?N:T})($)}function v($,T){if($&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var N=w(T);if(N&&N.has($))return N.get($);var M={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in $)if(O!=="default"&&Object.prototype.hasOwnProperty.call($,O)){var F=P?Object.getOwnPropertyDescriptor($,O):null;F&&(F.get||F.set)?Object.defineProperty(M,O,F):M[O]=$[O]}return M.default=$,N&&N.set($,M),M}function S($,T,N){return T=_(T),T in $?Object.defineProperty($,T,{value:N,enumerable:!0,configurable:!0,writable:!0}):$[T]=N,$}function _($){var T=R($,"string");return typeof T=="symbol"?T:String(T)}function R($,T){if(typeof $!="object"||$===null)return $;var N=$[Symbol.toPrimitive];if(N!==void 0){var M=N.call($,T);if(typeof M!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)($)}const D={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let B=D.mouse,H=class extends n.Component{constructor(){super(...arguments),S(this,"dragging",!1),S(this,"lastX",NaN),S(this,"lastY",NaN),S(this,"touchIdentifier",null),S(this,"mounted",!1),S(this,"handleDragStart",T=>{if(this.props.onMouseDown(T),!this.props.allowAnyClick&&typeof T.button=="number"&&T.button!==0)return!1;const N=this.findDOMNode();if(!N||!N.ownerDocument||!N.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:M}=N;if(this.props.disabled||!(T.target instanceof M.defaultView.Node)||this.props.handle&&!(0,d.matchesSelectorAndParentsTo)(T.target,this.props.handle,N)||this.props.cancel&&(0,d.matchesSelectorAndParentsTo)(T.target,this.props.cancel,N))return;T.type==="touchstart"&&T.preventDefault();const P=(0,d.getTouchIdentifier)(T);this.touchIdentifier=P;const O=(0,f.getControlPosition)(T,P,this);if(O==null)return;const{x:F,y:b}=O,U=(0,f.createCoreData)(this,F,b);(0,p.default)("DraggableCore: handleDragStart: %j",U),(0,p.default)("calling",this.props.onStart),!(this.props.onStart(T,U)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,d.addUserSelectStyles)(M),this.dragging=!0,this.lastX=F,this.lastY=b,(0,d.addEvent)(M,B.move,this.handleDrag),(0,d.addEvent)(M,B.stop,this.handleDragStop))}),S(this,"handleDrag",T=>{const N=(0,f.getControlPosition)(T,this.touchIdentifier,this);if(N==null)return;let{x:M,y:P}=N;if(Array.isArray(this.props.grid)){let b=M-this.lastX,U=P-this.lastY;if([b,U]=(0,f.snapToGrid)(this.props.grid,b,U),!b&&!U)return;M=this.lastX+b,P=this.lastY+U}const O=(0,f.createCoreData)(this,M,P);if((0,p.default)("DraggableCore: handleDrag: %j",O),this.props.onDrag(T,O)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const U=document.createEvent("MouseEvents");U.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(U)}return}this.lastX=M,this.lastY=P}),S(this,"handleDragStop",T=>{if(!this.dragging)return;const N=(0,f.getControlPosition)(T,this.touchIdentifier,this);if(N==null)return;let{x:M,y:P}=N;if(Array.isArray(this.props.grid)){let U=M-this.lastX||0,Y=P-this.lastY||0;[U,Y]=(0,f.snapToGrid)(this.props.grid,U,Y),M=this.lastX+U,P=this.lastY+Y}const O=(0,f.createCoreData)(this,M,P);if(this.props.onStop(T,O)===!1||this.mounted===!1)return!1;const b=this.findDOMNode();b&&this.props.enableUserSelectHack&&(0,d.removeUserSelectStyles)(b.ownerDocument),(0,p.default)("DraggableCore: handleDragStop: %j",O),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,b&&((0,p.default)("DraggableCore: Removing handlers"),(0,d.removeEvent)(b.ownerDocument,B.move,this.handleDrag),(0,d.removeEvent)(b.ownerDocument,B.stop,this.handleDragStop))}),S(this,"onMouseDown",T=>(B=D.mouse,this.handleDragStart(T))),S(this,"onMouseUp",T=>(B=D.mouse,this.handleDragStop(T))),S(this,"onTouchStart",T=>(B=D.touch,this.handleDragStart(T))),S(this,"onTouchEnd",T=>(B=D.touch,this.handleDragStop(T)))}componentDidMount(){this.mounted=!0;const T=this.findDOMNode();T&&(0,d.addEvent)(T,D.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const T=this.findDOMNode();if(T){const{ownerDocument:N}=T;(0,d.removeEvent)(N,D.mouse.move,this.handleDrag),(0,d.removeEvent)(N,D.touch.move,this.handleDrag),(0,d.removeEvent)(N,D.mouse.stop,this.handleDragStop),(0,d.removeEvent)(N,D.touch.stop,this.handleDragStop),(0,d.removeEvent)(T,D.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,d.removeUserSelectStyles)(N)}}findDOMNode(){var T,N;return(T=this.props)!==null&&T!==void 0&&T.nodeRef?(N=this.props)===null||N===void 0||(N=N.nodeRef)===null||N===void 0?void 0:N.current:s.default.findDOMNode(this)}render(){return n.cloneElement(n.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return yd.default=H,S(H,"displayName","DraggableCore"),S(H,"propTypes",{allowAnyClick:l.default.bool,children:l.default.node.isRequired,disabled:l.default.bool,enableUserSelectHack:l.default.bool,offsetParent:function($,T){if($[T]&&$[T].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:l.default.arrayOf(l.default.number),handle:l.default.string,cancel:l.default.string,nodeRef:l.default.object,onStart:l.default.func,onDrag:l.default.func,onStop:l.default.func,onMouseDown:l.default.func,scale:l.default.number,className:g.dontSetMe,style:g.dontSetMe,transform:g.dontSetMe}),S(H,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),yd}var Im;function TE(){return Im||(Im=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DraggableCore",{enumerable:!0,get:function(){return w.default}}),n.default=void 0;var l=R(is()),s=S(qh()),d=S(Lh()),f=S(CE),g=e0(),p=wy(),y=Gh(),w=S(jE()),v=S(Sy());function S(N){return N&&N.__esModule?N:{default:N}}function _(N){if(typeof WeakMap!="function")return null;var M=new WeakMap,P=new WeakMap;return(_=function(O){return O?P:M})(N)}function R(N,M){if(N&&N.__esModule)return N;if(N===null||typeof N!="object"&&typeof N!="function")return{default:N};var P=_(M);if(P&&P.has(N))return P.get(N);var O={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in N)if(b!=="default"&&Object.prototype.hasOwnProperty.call(N,b)){var U=F?Object.getOwnPropertyDescriptor(N,b):null;U&&(U.get||U.set)?Object.defineProperty(O,b,U):O[b]=N[b]}return O.default=N,P&&P.set(N,O),O}function D(){return D=Object.assign?Object.assign.bind():function(N){for(var M=1;M<arguments.length;M++){var P=arguments[M];for(var O in P)Object.prototype.hasOwnProperty.call(P,O)&&(N[O]=P[O])}return N},D.apply(this,arguments)}function B(N,M,P){return M=H(M),M in N?Object.defineProperty(N,M,{value:P,enumerable:!0,configurable:!0,writable:!0}):N[M]=P,N}function H(N){var M=$(N,"string");return typeof M=="symbol"?M:String(M)}function $(N,M){if(typeof N!="object"||N===null)return N;var P=N[Symbol.toPrimitive];if(P!==void 0){var O=P.call(N,M);if(typeof O!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(N)}class T extends l.Component{static getDerivedStateFromProps(M,P){let{position:O}=M,{prevPropsPosition:F}=P;return O&&(!F||O.x!==F.x||O.y!==F.y)?((0,v.default)("Draggable: getDerivedStateFromProps %j",{position:O,prevPropsPosition:F}),{x:O.x,y:O.y,prevPropsPosition:{...O}}):null}constructor(M){super(M),B(this,"onDragStart",(P,O)=>{if((0,v.default)("Draggable: onDragStart: %j",O),this.props.onStart(P,(0,p.createDraggableData)(this,O))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),B(this,"onDrag",(P,O)=>{if(!this.state.dragging)return!1;(0,v.default)("Draggable: onDrag: %j",O);const F=(0,p.createDraggableData)(this,O),b={x:F.x,y:F.y,slackX:0,slackY:0};if(this.props.bounds){const{x:Y,y:re}=b;b.x+=this.state.slackX,b.y+=this.state.slackY;const[se,le]=(0,p.getBoundPosition)(this,b.x,b.y);b.x=se,b.y=le,b.slackX=this.state.slackX+(Y-b.x),b.slackY=this.state.slackY+(re-b.y),F.x=b.x,F.y=b.y,F.deltaX=b.x-this.state.x,F.deltaY=b.y-this.state.y}if(this.props.onDrag(P,F)===!1)return!1;this.setState(b)}),B(this,"onDragStop",(P,O)=>{if(!this.state.dragging||this.props.onStop(P,(0,p.createDraggableData)(this,O))===!1)return!1;(0,v.default)("Draggable: onDragStop: %j",O);const b={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:Y,y:re}=this.props.position;b.x=Y,b.y=re}this.setState(b)}),this.state={dragging:!1,dragged:!1,x:M.position?M.position.x:M.defaultPosition.x,y:M.position?M.position.y:M.defaultPosition.y,prevPropsPosition:{...M.position},slackX:0,slackY:0,isElementSVG:!1},M.position&&!(M.onDrag||M.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var M,P;return(M=(P=this.props)===null||P===void 0||(P=P.nodeRef)===null||P===void 0?void 0:P.current)!==null&&M!==void 0?M:d.default.findDOMNode(this)}render(){const{axis:M,bounds:P,children:O,defaultPosition:F,defaultClassName:b,defaultClassNameDragging:U,defaultClassNameDragged:Y,position:re,positionOffset:se,scale:le,...ce}=this.props;let j={},q=null;const te=!!!re||this.state.dragging,Q=re||F,C={x:(0,p.canDragX)(this)&&te?this.state.x:Q.x,y:(0,p.canDragY)(this)&&te?this.state.y:Q.y};this.state.isElementSVG?q=(0,g.createSVGTransform)(C,se):j=(0,g.createCSSTransform)(C,se);const L=(0,f.default)(O.props.className||"",b,{[U]:this.state.dragging,[Y]:this.state.dragged});return l.createElement(w.default,D({},ce,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),l.cloneElement(l.Children.only(O),{className:L,style:{...O.props.style,...j},transform:q}))}}n.default=T,B(T,"displayName","Draggable"),B(T,"propTypes",{...w.default.propTypes,axis:s.default.oneOf(["both","x","y","none"]),bounds:s.default.oneOfType([s.default.shape({left:s.default.number,right:s.default.number,top:s.default.number,bottom:s.default.number}),s.default.string,s.default.oneOf([!1])]),defaultClassName:s.default.string,defaultClassNameDragging:s.default.string,defaultClassNameDragged:s.default.string,defaultPosition:s.default.shape({x:s.default.number,y:s.default.number}),positionOffset:s.default.shape({x:s.default.oneOfType([s.default.number,s.default.string]),y:s.default.oneOfType([s.default.number,s.default.string])}),position:s.default.shape({x:s.default.number,y:s.default.number}),className:y.dontSetMe,style:y.dontSetMe,transform:y.dontSetMe}),B(T,"defaultProps",{...w.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})}(fg)),fg}var $m;function _y(){if($m)return xd.exports;$m=1;const{default:n,DraggableCore:l}=TE();return xd.exports=n,xd.exports.default=n,xd.exports.DraggableCore=l,xd.exports}var xh={},Lm;function PE(){if(Lm)return xh;Lm=1,xh.__esModule=!0,xh.cloneElement=y;var n=l(is());function l(w){return w&&w.__esModule?w:{default:w}}function s(w,v){var S=Object.keys(w);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(w);v&&(_=_.filter(function(R){return Object.getOwnPropertyDescriptor(w,R).enumerable})),S.push.apply(S,_)}return S}function d(w){for(var v=1;v<arguments.length;v++){var S=arguments[v]!=null?arguments[v]:{};v%2?s(Object(S),!0).forEach(function(_){f(w,_,S[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(S)):s(Object(S)).forEach(function(_){Object.defineProperty(w,_,Object.getOwnPropertyDescriptor(S,_))})}return w}function f(w,v,S){return v=g(v),v in w?Object.defineProperty(w,v,{value:S,enumerable:!0,configurable:!0,writable:!0}):w[v]=S,w}function g(w){var v=p(w,"string");return typeof v=="symbol"?v:String(v)}function p(w,v){if(typeof w!="object"||w===null)return w;var S=w[Symbol.toPrimitive];if(S!==void 0){var _=S.call(w,v);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(w)}function y(w,v){return v.style&&w.props.style&&(v.style=d(d({},w.props.style),v.style)),v.className&&w.props.className&&(v.className=w.props.className+" "+v.className),n.default.cloneElement(w,v)}return xh}var vd={},Fm;function Ny(){if(Fm)return vd;Fm=1,vd.__esModule=!0,vd.resizableProps=void 0;var n=l(qh());_y();function l(d){return d&&d.__esModule?d:{default:d}}var s={axis:n.default.oneOf(["both","x","y","none"]),className:n.default.string,children:n.default.element.isRequired,draggableOpts:n.default.shape({allowAnyClick:n.default.bool,cancel:n.default.string,children:n.default.node,disabled:n.default.bool,enableUserSelectHack:n.default.bool,offsetParent:n.default.node,grid:n.default.arrayOf(n.default.number),handle:n.default.string,nodeRef:n.default.object,onStart:n.default.func,onDrag:n.default.func,onStop:n.default.func,onMouseDown:n.default.func,scale:n.default.number}),height:function(){for(var f=arguments.length,g=new Array(f),p=0;p<f;p++)g[p]=arguments[p];var y=g[0];if(y.axis==="both"||y.axis==="y"){var w;return(w=n.default.number).isRequired.apply(w,g)}return n.default.number.apply(n.default,g)},handle:n.default.oneOfType([n.default.node,n.default.func]),handleSize:n.default.arrayOf(n.default.number),lockAspectRatio:n.default.bool,maxConstraints:n.default.arrayOf(n.default.number),minConstraints:n.default.arrayOf(n.default.number),onResizeStop:n.default.func,onResizeStart:n.default.func,onResize:n.default.func,resizeHandles:n.default.arrayOf(n.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:n.default.number,width:function(){for(var f=arguments.length,g=new Array(f),p=0;p<f;p++)g[p]=arguments[p];var y=g[0];if(y.axis==="both"||y.axis==="x"){var w;return(w=n.default.number).isRequired.apply(w,g)}return n.default.number.apply(n.default,g)}};return vd.resizableProps=s,vd}var Hm;function by(){if(Hm)return md;Hm=1,md.__esModule=!0,md.default=void 0;var n=p(is()),l=_y(),s=PE(),d=Ny(),f=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function g(T){if(typeof WeakMap!="function")return null;var N=new WeakMap,M=new WeakMap;return(g=function(O){return O?M:N})(T)}function p(T,N){if(T&&T.__esModule)return T;if(T===null||typeof T!="object"&&typeof T!="function")return{default:T};var M=g(N);if(M&&M.has(T))return M.get(T);var P={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var F in T)if(F!=="default"&&Object.prototype.hasOwnProperty.call(T,F)){var b=O?Object.getOwnPropertyDescriptor(T,F):null;b&&(b.get||b.set)?Object.defineProperty(P,F,b):P[F]=T[F]}return P.default=T,M&&M.set(T,P),P}function y(){return y=Object.assign?Object.assign.bind():function(T){for(var N=1;N<arguments.length;N++){var M=arguments[N];for(var P in M)Object.prototype.hasOwnProperty.call(M,P)&&(T[P]=M[P])}return T},y.apply(this,arguments)}function w(T,N){if(T==null)return{};var M={},P=Object.keys(T),O,F;for(F=0;F<P.length;F++)O=P[F],!(N.indexOf(O)>=0)&&(M[O]=T[O]);return M}function v(T,N){var M=Object.keys(T);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(T);N&&(P=P.filter(function(O){return Object.getOwnPropertyDescriptor(T,O).enumerable})),M.push.apply(M,P)}return M}function S(T){for(var N=1;N<arguments.length;N++){var M=arguments[N]!=null?arguments[N]:{};N%2?v(Object(M),!0).forEach(function(P){_(T,P,M[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(M)):v(Object(M)).forEach(function(P){Object.defineProperty(T,P,Object.getOwnPropertyDescriptor(M,P))})}return T}function _(T,N,M){return N=R(N),N in T?Object.defineProperty(T,N,{value:M,enumerable:!0,configurable:!0,writable:!0}):T[N]=M,T}function R(T){var N=D(T,"string");return typeof N=="symbol"?N:String(N)}function D(T,N){if(typeof T!="object"||T===null)return T;var M=T[Symbol.toPrimitive];if(M!==void 0){var P=M.call(T,N);if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)(T)}function B(T,N){T.prototype=Object.create(N.prototype),T.prototype.constructor=T,H(T,N)}function H(T,N){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(P,O){return P.__proto__=O,P},H(T,N)}var $=function(T){B(N,T);function N(){for(var P,O=arguments.length,F=new Array(O),b=0;b<O;b++)F[b]=arguments[b];return P=T.call.apply(T,[this].concat(F))||this,P.handleRefs={},P.lastHandleRect=null,P.slack=null,P}var M=N.prototype;return M.componentWillUnmount=function(){this.resetData()},M.resetData=function(){this.lastHandleRect=this.slack=null},M.runConstraints=function(O,F){var b=this.props,U=b.minConstraints,Y=b.maxConstraints,re=b.lockAspectRatio;if(!U&&!Y&&!re)return[O,F];if(re){var se=this.props.width/this.props.height,le=O-this.props.width,ce=F-this.props.height;Math.abs(le)>Math.abs(ce*se)?F=O/se:O=F*se}var j=O,q=F,X=this.slack||[0,0],te=X[0],Q=X[1];return O+=te,F+=Q,U&&(O=Math.max(U[0],O),F=Math.max(U[1],F)),Y&&(O=Math.min(Y[0],O),F=Math.min(Y[1],F)),this.slack=[te+(j-O),Q+(q-F)],[O,F]},M.resizeHandler=function(O,F){var b=this;return function(U,Y){var re=Y.node,se=Y.deltaX,le=Y.deltaY;O==="onResizeStart"&&b.resetData();var ce=(b.props.axis==="both"||b.props.axis==="x")&&F!=="n"&&F!=="s",j=(b.props.axis==="both"||b.props.axis==="y")&&F!=="e"&&F!=="w";if(!(!ce&&!j)){var q=F[0],X=F[F.length-1],te=re.getBoundingClientRect();if(b.lastHandleRect!=null){if(X==="w"){var Q=te.left-b.lastHandleRect.left;se+=Q}if(q==="n"){var C=te.top-b.lastHandleRect.top;le+=C}}b.lastHandleRect=te,X==="w"&&(se=-se),q==="n"&&(le=-le);var L=b.props.width+(ce?se/b.props.transformScale:0),A=b.props.height+(j?le/b.props.transformScale:0),K=b.runConstraints(L,A);L=K[0],A=K[1];var pe=L!==b.props.width||A!==b.props.height,ge=typeof b.props[O]=="function"?b.props[O]:null,ve=O==="onResize"&&!pe;ge&&!ve&&(U.persist==null||U.persist(),ge(U,{node:re,size:{width:L,height:A},handle:F})),O==="onResizeStop"&&b.resetData()}}},M.renderResizeHandle=function(O,F){var b=this.props.handle;if(!b)return n.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+O,ref:F});if(typeof b=="function")return b(O,F);var U=typeof b.type=="string",Y=S({ref:F},U?{}:{handleAxis:O});return n.cloneElement(b,Y)},M.render=function(){var O=this,F=this.props,b=F.children,U=F.className,Y=F.draggableOpts;F.width,F.height,F.handle,F.handleSize,F.lockAspectRatio,F.axis,F.minConstraints,F.maxConstraints,F.onResize,F.onResizeStop,F.onResizeStart;var re=F.resizeHandles;F.transformScale;var se=w(F,f);return(0,s.cloneElement)(b,S(S({},se),{},{className:(U?U+" ":"")+"react-resizable",children:[].concat(b.props.children,re.map(function(le){var ce,j=(ce=O.handleRefs[le])!=null?ce:O.handleRefs[le]=n.createRef();return n.createElement(l.DraggableCore,y({},Y,{nodeRef:j,key:"resizableHandle-"+le,onStop:O.resizeHandler("onResizeStop",le),onStart:O.resizeHandler("onResizeStart",le),onDrag:O.resizeHandler("onResize",le)}),O.renderResizeHandle(le,j))}))}))},N}(n.Component);return md.default=$,$.propTypes=d.resizableProps,$.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1},md}var wd={},Um;function RE(){if(Um)return wd;Um=1,wd.__esModule=!0,wd.default=void 0;var n=y(is()),l=g(qh()),s=g(by()),d=Ny(),f=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function g(N){return N&&N.__esModule?N:{default:N}}function p(N){if(typeof WeakMap!="function")return null;var M=new WeakMap,P=new WeakMap;return(p=function(F){return F?P:M})(N)}function y(N,M){if(N&&N.__esModule)return N;if(N===null||typeof N!="object"&&typeof N!="function")return{default:N};var P=p(M);if(P&&P.has(N))return P.get(N);var O={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in N)if(b!=="default"&&Object.prototype.hasOwnProperty.call(N,b)){var U=F?Object.getOwnPropertyDescriptor(N,b):null;U&&(U.get||U.set)?Object.defineProperty(O,b,U):O[b]=N[b]}return O.default=N,P&&P.set(N,O),O}function w(){return w=Object.assign?Object.assign.bind():function(N){for(var M=1;M<arguments.length;M++){var P=arguments[M];for(var O in P)Object.prototype.hasOwnProperty.call(P,O)&&(N[O]=P[O])}return N},w.apply(this,arguments)}function v(N,M){var P=Object.keys(N);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(N);M&&(O=O.filter(function(F){return Object.getOwnPropertyDescriptor(N,F).enumerable})),P.push.apply(P,O)}return P}function S(N){for(var M=1;M<arguments.length;M++){var P=arguments[M]!=null?arguments[M]:{};M%2?v(Object(P),!0).forEach(function(O){_(N,O,P[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(P)):v(Object(P)).forEach(function(O){Object.defineProperty(N,O,Object.getOwnPropertyDescriptor(P,O))})}return N}function _(N,M,P){return M=R(M),M in N?Object.defineProperty(N,M,{value:P,enumerable:!0,configurable:!0,writable:!0}):N[M]=P,N}function R(N){var M=D(N,"string");return typeof M=="symbol"?M:String(M)}function D(N,M){if(typeof N!="object"||N===null)return N;var P=N[Symbol.toPrimitive];if(P!==void 0){var O=P.call(N,M);if(typeof O!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(N)}function B(N,M){if(N==null)return{};var P={},O=Object.keys(N),F,b;for(b=0;b<O.length;b++)F=O[b],!(M.indexOf(F)>=0)&&(P[F]=N[F]);return P}function H(N,M){N.prototype=Object.create(M.prototype),N.prototype.constructor=N,$(N,M)}function $(N,M){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,F){return O.__proto__=F,O},$(N,M)}var T=function(N){H(M,N);function M(){for(var O,F=arguments.length,b=new Array(F),U=0;U<F;U++)b[U]=arguments[U];return O=N.call.apply(N,[this].concat(b))||this,O.state={width:O.props.width,height:O.props.height,propsWidth:O.props.width,propsHeight:O.props.height},O.onResize=function(Y,re){var se=re.size;O.props.onResize?(Y.persist==null||Y.persist(),O.setState(se,function(){return O.props.onResize&&O.props.onResize(Y,re)})):O.setState(se)},O}M.getDerivedStateFromProps=function(F,b){return b.propsWidth!==F.width||b.propsHeight!==F.height?{width:F.width,height:F.height,propsWidth:F.width,propsHeight:F.height}:null};var P=M.prototype;return P.render=function(){var F=this.props,b=F.handle,U=F.handleSize;F.onResize;var Y=F.onResizeStart,re=F.onResizeStop,se=F.draggableOpts,le=F.minConstraints,ce=F.maxConstraints,j=F.lockAspectRatio,q=F.axis;F.width,F.height;var X=F.resizeHandles,te=F.style,Q=F.transformScale,C=B(F,f);return n.createElement(s.default,{axis:q,draggableOpts:se,handle:b,handleSize:U,height:this.state.height,lockAspectRatio:j,maxConstraints:ce,minConstraints:le,onResizeStart:Y,onResize:this.onResize,onResizeStop:re,resizeHandles:X,transformScale:Q,width:this.state.width},n.createElement("div",w({},C,{style:S(S({},te),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},M}(n.Component);return wd.default=T,T.propTypes=S(S({},d.resizableProps),{},{children:l.default.element}),wd}var Bm;function AE(){return Bm||(Bm=1,gd.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},gd.exports.Resizable=by().default,gd.exports.ResizableBox=RE().default),gd.exports}var ME=AE();const yh="http://127.0.0.1:8000",DE={custom:_E};function Dg({novelId:n,onBack:l}){const[s,d]=W.useState([]),[f,g]=W.useState([]),p=W.useRef(new Set),[y,w]=W.useState(null),[v,S]=W.useState(!1),[_,R]=W.useState({});W.useEffect(()=>{fetch(`${yh}/memos/${n}`).then(b=>b.json()).then(b=>{const U={},Y=b.memos.map(se=>{const le=_[se.id]??se.height??100;return U[se.id]=le,{id:se.id,type:"default",data:{label:se.text||"New Memo",onChange:B},position:se.position||{x:100,y:100},width:se.width||300,height:le,connections:se.connections||[]}}),re=b.memos.flatMap(se=>(se.connections||[]).map(le=>({id:`${se.id}-${le}`,source:se.id,target:le,type:"custom",data:{novelId:n,setEdges:g,setNodes:d}})));d(Y),g(re),console.log("useEffect:  heights",U),R(U)}).catch(b=>console.error("Error fetching memos:",b))},[n]);const D=W.useCallback(SE.throttle(async b=>{if(!(!b||p.current.has(b.id))){console.log("save",b.height);try{await fetch(`${yh}/memos/${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:b.id,novelId:n,text:b.data.label,position:{x:Math.round(b.position.x),y:Math.round(b.position.y)},width:b.width,height:b.height,connections:b.connections||[]})})}catch(U){console.error("Error saving memo:",U)}}},500),[s,f,n]),B=(b,U)=>{d(Y=>{const re=Y.map(le=>le.id===b?{...le,data:{...le.data,label:U}}:le),se=re.find(le=>le.id===b);return se&&D(se),re})},H=W.useCallback(b=>{d(U=>{let Y=ey(b,U);return Y=Y.map(re=>{const se=U.find(le=>le.id===re.id);return se?{...re,width:se.width,height:se.height}:re}),Y})},[]),$=W.useCallback(b=>{g(U=>[...U,{id:`${b.source}-${b.target}`,type:"custom",source:b.source,target:b.target,sourceHandle:b.sourceHandle??null,targetHandle:b.targetHandle??null,data:{novelId:n,setEdges:g,setNodes:d}}]),d(U=>U.map(Y=>{if(Y.id===b.source){const re={...Y,connections:[...Y.connections??[],b.target].filter(Boolean)};return D(re),re}return Y}))},[]),T=async()=>{const b=crypto.randomUUID(),U={id:b,type:"default",data:{label:"",onChange:B},position:{x:100,y:100},width:300,height:100,connections:[]};d(Y=>[...Y,U]),R(Y=>({...Y,[b]:100})),D(U)},N=async b=>{D.cancel();try{const U=await fetch(`${yh}/memos/${n}/${b}`,{method:"DELETE"});if(!U.ok){console.error("Error deleting memo:",await U.text());return}p.current.add(b),d(Y=>Y.filter(re=>re.id!==b)),g(Y=>Y.filter(re=>re.source!==b&&re.target!==b))}catch(U){console.error("Error deleting memo:",U)}},M=(b,U)=>{console.log("handleDragStop: ",U),d(Y=>{const re=Y.map(le=>le.id===U.id?{...le,position:U.position}:le),se=re.find(le=>le.id===U.id);return se&&D(se),re})},P=()=>{fetch(`${yh}/scenarios/${n}`).then(b=>b.json()).then(b=>{b.synopsis?(w(b.synopsis),S(!0)):(w("Synopsis not available."),S(!0))}).catch(b=>console.error("Error fetching synopsis:",b))},O=(b,U,Y)=>{d(re=>{const se=re.map(ce=>{if(ce.id!==Y||ce.width===U.size.width&&ce.height===U.size.height)return ce;const j=U.size.height-62;return{...ce,width:U.size.width,height:j}});R(ce=>{const j={...ce,[Y]:U.size.height-62};return console.log("handleResizeStop:  nodeHeights",j),j});const le=se.find(ce=>ce.id===Y);return le&&D(le),se})},F=(b,U)=>{b.currentTarget.style.height="auto";const Y=b.currentTarget.scrollHeight;b.currentTarget.style.height=`${Y}px`,R(se=>{const le={...se,[U]:Y};return console.log("handleTextAreaInput:  nodeHeights",le),le}),d(se=>se.map(le=>le.id===U?{...le,height:Y}:le));const re=s.find(se=>se.id===U);re&&D({...re,height:Y})};return c.jsxs("div",{className:"h-screen flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4",children:[c.jsx("button",{onClick:l,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",title:"Back",children:c.jsx(Ho,{size:24,className:"text-gray-600"})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800 flex-1 text-left ml-4",children:"Memo Management"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:P,className:"bg-green-600 text-white p-3 rounded-lg shadow-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"View Synopsis",children:[c.jsx(l1,{size:20}),c.jsx("span",{className:"hidden sm:inline",children:"View Synopsis"})]}),c.jsxs("button",{onClick:T,className:"bg-blue-600 text-white p-3 rounded-lg shadow-lg hover:bg-blue-700 transition-colors flex items-center gap-2",title:"Add Memo",children:[c.jsx(rs,{size:20}),c.jsx("span",{className:"hidden sm:inline",children:"Add Memo"})]})]})]}),c.jsxs("div",{className:"flex flex-1",children:[c.jsx("div",{className:`transition-all duration-300 ${v?"w-2/3":"w-full"}`,children:c.jsxs(py,{nodes:s.map(b=>({...b,style:{width:b.width||300,minHeight:50,height:"auto"},data:{...b.data,label:c.jsx(ME.ResizableBox,{width:(b.width||300)-20,height:_[b.id]+40||100,axis:"x",minConstraints:[200,50],maxConstraints:[500,200],className:"relative p-2 border rounded bg-white shadow-md nodrag",onResizeStop:(U,Y)=>O(U,Y,b.id),children:c.jsxs("div",{className:"relative p-2 border rounded bg-white shadow-md",children:[c.jsx("button",{onClick:()=>N(b.id),className:"absolute top-[-8px] right-[-8px] w-4 h-4 flex items-center justify-center bg-red-500 text-white rounded-full hover:bg-red-700 shadow-md",title:"Delete",children:c.jsx(m1,{size:8})}),c.jsx("textarea",{value:b.data.label,onChange:U=>B(b.id,U.target.value),onInput:U=>F(U,b.id),className:"border border-gray-300 rounded p-2 w-full resize-none overflow-hidden break-words nodrag",autoFocus:!0,style:{fontSize:"16px",lineHeight:"24px",padding:"6px 10px",backgroundImage:"linear-gradient(to bottom, transparent 23px, #ddd 24px)",backgroundSize:"100% 24px",backgroundPosition:"left 5px",backgroundAttachment:"local",height:_[b.id]}})]})})}})),edges:f,edgeTypes:DE,onNodeDragStop:M,onNodesChange:H,onConnect:$,fitView:!0,children:[c.jsx(yE,{}),c.jsx(fE,{}),c.jsx(sE,{})]})}),v&&c.jsxs("div",{className:"absolute right-0 top-[calc(4rem+16px)] w-1/3 h-[calc(100%-4rem-16px)] bg-white p-6 shadow-xl overflow-auto",children:[c.jsx("button",{className:"absolute top-4 right-4 p-2 rounded-full bg-gray-300 hover:bg-gray-400",onClick:()=>S(!1),children:c.jsx(Nr,{size:24})}),c.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Synopsis"}),c.jsx("div",{className:"p-4 bg-gray-100 rounded-lg shadow-inner overflow-auto",children:c.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:y})})]})]})]})}const $r="http://127.0.0.1:8000";function zE({novelId:n,onBack:l}){var Qt,dn,fn,sn;const[s,d]=W.useState(null),[f,g]=W.useState(null);W.useEffect(()=>{fetch(`${$r}/scenarios/${n}`).then(he=>{if(he.ok)return he.json();if(he.status===404)return p(),null;throw new Error("Failed to fetch scenario")}).then(he=>{he&&(d(he),F(he.synopsis))}).catch(he=>console.error("Error fetching scenario:",he))},[n]);const p=()=>{fetch(`${$r}/scenarios/${n}`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(he=>he.ok?he.json():he.json().then(ke=>{throw new Error(ke.detail||"Failed to create scenario")})).then(()=>{d({id:n,synopsis:"",worldBuilding:[],chapters:[],timeline:[]}),F("")}).catch(he=>console.error("Error creating scenario:",he))},[y,w]=W.useState(!1),[v,S]=W.useState(!1),[_,R]=W.useState(!1),[D,B]=W.useState(null),[H,$]=W.useState(null),[T,N]=W.useState({term:"",description:""}),[M,P]=W.useState({number:0,title:"",plot:""}),[O,F]=W.useState(""),[b,U]=W.useState(!1),[Y,re]=W.useState(new Set),[se,le]=W.useState(!1),[ce,j]=W.useState(""),[q,X]=W.useState(!1),[te,Q]=W.useState(!1),[C,L]=W.useState(""),[A,K]=W.useState(new Set),[pe,ge]=W.useState(!1),[ve,Ce]=W.useState(!1),je=fe.useMemo(()=>!s||!s.worldBuilding?[]:s.worldBuilding.filter(he=>he.term.toLowerCase().includes(ce.toLowerCase())||he.description.toLowerCase().includes(ce.toLowerCase())).sort((he,ke)=>he.term.localeCompare(ke.term)),[s,ce]),Pe=fe.useMemo(()=>!s||!s.chapters?[]:s.chapters.filter(he=>he.title.toLowerCase().includes(C.toLowerCase())).sort((he,ke)=>he.number-ke.number),[s,C]),Te=se?je:je.slice(0,4),We=he=>{re(ke=>{const Ve=new Set(ke);return Ve.has(he)?Ve.delete(he):Ve.add(he),Ve})},ft=he=>{K(ke=>{const Ve=new Set(ke);return Ve.has(he)?Ve.delete(he):Ve.add(he),Ve})},St=async()=>{if(!s)return;const he={...s,synopsis:O};try{if(!(await fetch(`${$r}/scenarios/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(he)})).ok)throw new Error("Failed to update scenario");const Je=await(await fetch(`${$r}/scenarios/${n}`)).json();d(Je),w(!1)}catch(ke){console.error("Error updating scenario:",ke)}},Pt=()=>{if(confirm("Are you sure you want to clear the synopsis? This cannot be undone.")){if(F(""),!s)return;const he={...s,synopsis:""};fetch(`${$r}/scenarios/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(he)}).catch(ke=>console.error("Error clearing synopsis:",ke))}},ot=async()=>{if(!s||!T.term.trim())return;let he;if(D){const ke={...D,term:T.term.trim(),description:T.description.trim()};he={...s,worldBuilding:s.worldBuilding.map(Ve=>Ve.id===D.id?ke:Ve)}}else{const ke={id:crypto.randomUUID(),term:T.term.trim(),description:T.description.trim()};he={...s,worldBuilding:[...s.worldBuilding,ke]}}try{if(!(await fetch(`${$r}/scenarios/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(he)})).ok)throw new Error("Failed to update term");const Je=await(await fetch(`${$r}/scenarios/${n}`)).json();d(Je)}catch(ke){console.error("Error updating term:",ke),alert("")}S(!1),B(null),N({term:"",description:""})},ct=async()=>{if(!s||!M.title.trim())return;let he;if(H){const ke={...H,number:M.number||H.number,title:M.title.trim(),plot:M.plot.trim()},Je=[...s.chapters.filter(_t=>_t.id!==H.id),ke].sort((_t,yt)=>_t.number-yt.number);he={...s,chapters:Je}}else{const ke=M.number||s.chapters.length+1,Ve={id:crypto.randomUUID(),number:ke,title:M.title.trim(),plot:M.plot.trim(),episodes:[]},Je=[...s.chapters];for(let _t=0;_t<Je.length;_t++)Je[_t].number>=ke&&(Je[_t]={...Je[_t],number:Je[_t].number+1});Je.push(Ve),Je.sort((_t,yt)=>_t.number-yt.number),he={...s,chapters:Je}}try{if(!(await fetch(`${$r}/scenarios/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(he)})).ok)throw new Error("Failed to update chapter");const Je=await(await fetch(`${$r}/scenarios/${n}`)).json();d(Je)}catch(ke){console.error("Error updating chapter:",ke),alert("")}R(!1),$(null),P({number:0,title:"",plot:""})},Lt=he=>{B(he),N({term:he.term,description:he.description}),S(!0)},Ze=he=>{$(he),P({number:he.number,title:he.title,plot:he.plot}),R(!0)},Oe=he=>{!s||!confirm("Are you sure you want to delete this term?")||fetch(`${$r}/scenarios/${s.id}/terms/${he}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(ke=>{if(!ke.ok)throw new Error("Failed to delete term");return ke.json()}).then(()=>{const ke=s.worldBuilding.filter(Ve=>Ve.id!==he);d(Ve=>({...Ve,worldBuilding:ke}))}).catch(ke=>console.error("Error deleting term:",ke))},Ft=he=>{if(!s||!confirm("Are you sure you want to delete this chapter?"))return;const ke=s.chapters.find(Ve=>Ve.id===he);ke&&fetch(`${$r}/scenarios/${s.id}/chapters/${he}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(Ve=>{if(!Ve.ok)throw new Error("Failed to delete chapter");return Ve.json()}).then(()=>{const Ve=s.chapters.filter(Je=>Je.id!==he).map(Je=>Je.number>ke.number?{...Je,number:Je.number-1}:Je);d(Je=>({...Je,chapters:Ve}))}).catch(Ve=>console.error("Error deleting chapter:",Ve))};if(!s)return null;const Dt={backgroundImage:`
      linear-gradient(transparent 27px, #e5e7eb 28px),
      linear-gradient(90deg, #f3f4f6 0px, transparent 1px)
    `,backgroundSize:"100% 28px",backgroundAttachment:"local",lineHeight:"28px",padding:"0 16px"},bt="cursor-pointer transition-all duration-200 hover:shadow-lg hover:border-gray-300";return f==="memo"?c.jsx(Dg,{novelId:n,onBack:()=>g(null)}):c.jsxs("div",{className:"animate-fade-in",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:l,className:"text-gray-600 hover:text-gray-800 transition-colors",children:c.jsx(Ho,{className:"w-6 h-6"})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:""})]}),c.jsxs("div",{className:`bg-white rounded-2xl shadow-lg overflow-hidden mb-8 ${bt}`,onClick:()=>w(!0),children:[c.jsxs("div",{className:"flex items-center justify-between p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:c.jsx(Gm,{className:"w-6 h-6 text-blue-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),c.jsx("p",{className:"text-sm text-gray-500",children:s!=null&&s.synopsis?"View or edit synopsis":"No synopsis yet"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:he=>{he.stopPropagation(),U(!b)},className:"text-gray-600 hover:text-gray-800 transition-colors p-2 hover:bg-gray-50 rounded-lg",title:b?"Collapse synopsis":"Expand synopsis",children:c.jsx(ir,{className:`transform transition-transform ${b?"rotate-180":""}`,size:20})}),c.jsx("button",{onClick:he=>{he.stopPropagation(),w(!0)},className:"text-blue-600 hover:text-blue-700 transition-colors p-2 hover:bg-blue-50 rounded-lg",title:"Edit synopsis",children:c.jsx(ts,{size:20})})]})]}),b&&c.jsx("div",{className:"px-6 pb-6",children:c.jsx("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-100",children:s!=null&&s.synopsis?c.jsx("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:s.synopsis}):c.jsx("p",{className:"text-gray-500 italic",children:"No synopsis yet. Click the edit button to add one."})})})]}),f==="memo"?c.jsx(Dg,{novelId:n,onBack:()=>g(null)}):c.jsx(c.Fragment,{children:c.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden mb-8 cursor-pointer transition-all hover:shadow-lg hover:border-gray-300",onClick:()=>g("memo"),children:c.jsxs("div",{className:"flex items-center justify-between p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.jsx("div",{className:"p-3 bg-yellow-100 rounded-xl",children:c.jsx(Xm,{className:"w-6 h-6 text-yellow-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),c.jsx("p",{className:"text-sm text-gray-500",children:"Click to manage your notes"})]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:he=>{he.stopPropagation(),g("memo")},className:"text-yellow-600 hover:text-yellow-700 transition-colors p-2 hover:bg-yellow-50 rounded-lg",title:"Edit Memo",children:c.jsx(ts,{size:20})})})]})})}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:c.jsx(bh,{className:"w-6 h-6 text-purple-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"/"}),c.jsxs("p",{className:"text-sm text-gray-500",children:[((Qt=s==null?void 0:s.worldBuilding)==null?void 0:Qt.length)||0," terms defined"]})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>X(!q),className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:[c.jsx(Ch,{size:20}),c.jsx("span",{children:"Quick Edit"}),c.jsx(ir,{size:16,className:`transform transition-transform ${q?"rotate-180":""}`})]}),q&&c.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-lg border border-gray-100 py-2 z-10",children:[c.jsx("input",{type:"text",placeholder:"Search terms...",value:ce,onChange:he=>j(he.target.value),className:"mx-2 mb-2 w-[calc(100%-16px)] px-3 py-2 border border-gray-200 rounded-lg text-sm"}),c.jsx("div",{className:"max-h-64 overflow-y-auto",children:je.map(he=>c.jsx("button",{onClick:()=>{Lt(he),X(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-50 text-sm",children:he.term},he.id))})]})]}),c.jsxs("button",{onClick:()=>{S(!0),B(null),N({term:"",description:""})},className:"flex items-center gap-2 bg-purple-600 text-white px-6 py-3 rounded-full hover:bg-purple-700 transition-colors duration-200 shadow-lg hover:shadow-purple-200",children:[c.jsx(rs,{size:20}),"Add Term"]})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Te.map(he=>c.jsxs("div",{className:"border border-gray-100 rounded-xl transition-all duration-200 hover:border-gray-300 hover:shadow-lg cursor-pointer",onClick:()=>Lt(he),children:[c.jsxs("div",{className:"p-4 flex items-start justify-between",children:[c.jsx("div",{className:"flex-1",children:c.jsx("h4",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:he.term})}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:ke=>{ke.stopPropagation(),We(he.id)},className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",children:c.jsx(ir,{size:18,className:`transform transition-transform ${Y.has(he.id)?"rotate-180":""}`})}),c.jsx("button",{onClick:ke=>{ke.stopPropagation(),Lt(he)},className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",children:c.jsx(ts,{size:18})}),c.jsx("button",{onClick:ke=>{ke.stopPropagation(),Oe(he.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:c.jsx(ql,{size:18})})]})]}),Y.has(he.id)&&c.jsx("div",{className:"px-4 pb-4",children:c.jsx("div",{className:"p-4 bg-gray-50 rounded-xl",children:c.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:he.description})})})]},he.id))}),je.length>4&&c.jsx("div",{className:"mt-4 text-center",children:c.jsx("button",{onClick:()=>le(!se),className:"inline-flex items-center gap-2 px-4 py-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",children:se?c.jsxs(c.Fragment,{children:[c.jsx(zg,{size:20}),"Show Less"]}):c.jsxs(c.Fragment,{children:[c.jsx(ir,{size:20}),"Show ",je.length-4," More Terms"]})})}),((dn=s==null?void 0:s.worldBuilding)==null?void 0:dn.length)===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx(bh,{size:48,className:"mx-auto text-gray-300 mb-4"}),c.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"No Terms Yet"}),c.jsx("p",{className:"text-gray-500",children:'Click the "Add Term" button to start building your world'})]})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl",children:c.jsx(j0,{className:"w-6 h-6 text-indigo-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),c.jsxs("p",{className:"text-sm text-gray-500",children:[((fn=s==null?void 0:s.chapters)==null?void 0:fn.length)||0," chapters planned"]})]})]}),c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>Q(!te),className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:[c.jsx(Ch,{size:20}),c.jsx("span",{children:"Quick Edit"}),c.jsx(ir,{size:16,className:`transform transition-transform ${te?"rotate-180":""}`})]}),te&&c.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-lg border border-gray-100 py-2 z-10",children:[c.jsx("input",{type:"text",placeholder:"Search chapters...",value:C,onChange:he=>L(he.target.value),className:"mx-2 mb-2 w-[calc(100%-16px)] px-3 py-2 border border-gray-200 rounded-lg text-sm"}),c.jsx("div",{className:"max-h-64 overflow-y-auto",children:Pe.map(he=>c.jsxs("button",{onClick:()=>{Ze(he),Q(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-50 text-sm",children:[he.number,": ",he.title]},he.id))})]})]}),c.jsxs("button",{onClick:()=>{R(!0),$(null),P({number:0,title:"",plot:""})},className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-full hover:bg-indigo-700 transition-colors duration-200 shadow-lg hover:shadow-indigo-200",children:[c.jsx(rs,{size:20}),"Add Chapter"]})]})]}),(s==null?void 0:s.chapters.length)===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx(j0,{size:48,className:"mx-auto text-gray-300 mb-4"}),c.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"No Chapters Yet"}),c.jsxs("p",{className:"text-gray-500",children:["Click the ",c.jsx("strong",{children:'"Add Chapter"'})," button to start planning your story."]})]}),c.jsx("div",{className:"space-y-4",children:(sn=s.chapters)==null?void 0:sn.map(he=>c.jsxs("div",{className:`p-4 border border-gray-100 rounded-xl ${bt}`,onClick:()=>Ze(he),children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{children:[c.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:["Chapter ",he.number,": ",he.title]}),c.jsxs("p",{className:"text-sm text-gray-500",children:[he.episodes.length," episodes"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:ke=>{ke.stopPropagation(),ft(he.id)},className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",children:c.jsx(ir,{size:20,className:`transform transition-transform ${A.has(he.id)?"rotate-180":""}`})}),c.jsx("button",{onClick:ke=>{ke.stopPropagation(),Ze(he)},className:"text-indigo-600 hover:text-indigo-700 transition-colors",children:c.jsx(ts,{size:18})}),c.jsx("button",{onClick:ke=>{ke.stopPropagation(),Ft(he.id)},className:"text-red-600 hover:text-red-700 transition-colors",children:c.jsx(ql,{size:18})})]})]}),c.jsx("p",{className:`text-gray-600 mt-1 ${A.has(he.id)?"":"line-clamp-1"}`,children:he.plot})]},he.id))})]}),c.jsx("div",{className:"mt-8 bg-white rounded-2xl shadow-lg p-6",children:c.jsx(v1,{scenario:s,onTimelineUpdate:async he=>{if(he)try{if(!(await fetch(`${$r}/scenarios/${he.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(he)})).ok)throw new Error("Failed to update scenario");const Je=await(await fetch(`${$r}/scenarios/${he.id}`)).json();d(Je),console.log("Scenario updated successfully:",Je)}catch(ke){console.error("Error updating scenario:",ke)}}})}),y&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl p-8 relative animate-fade-in",children:[c.jsx("button",{onClick:()=>w(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:c.jsx(Nr,{size:24})}),c.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-6",children:"Edit Synopsis"}),c.jsxs("div",{className:"space-y-6",children:[c.jsx("textarea",{value:O,onChange:he=>F(he.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-shadow duration-200 min-h-[300px] leading-relaxed resize-y",placeholder:"Write your story synopsis here...",style:Dt}),c.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[c.jsxs("button",{onClick:St,className:"flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-xl hover:bg-blue-700 transition-colors duration-200 shadow-lg hover:shadow-blue-200",children:[c.jsx(qm,{size:20}),"Save Synopsis"]}),c.jsxs("button",{onClick:Pt,className:"flex items-center gap-2 bg-red-600 text-white px-6 py-3 rounded-xl hover:bg-red-700 transition-colors duration-200 shadow-lg hover:shadow-red-200",children:[c.jsx(Ym,{size:20}),"Clear Synopsis"]}),c.jsx("button",{onClick:()=>w(!1),className:"flex-1 bg-gray-100 text-gray-700 px-6 py-3 rounded-xl hover:bg-gray-200 transition-colors duration-200",children:"Cancel"})]})]})]})}),(_||H)&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl p-8 relative animate-fade-in",children:[c.jsx("button",{onClick:()=>{R(!1),$(null),P({number:0,title:"",plot:""})},className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:c.jsx(Nr,{size:24})}),c.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-6",children:H?"Edit Chapter":"Add New Chapter"}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chapter Number"}),c.jsx("input",{type:"number",min:"1",value:M.number||"",onChange:he=>P(ke=>({...ke,number:parseInt(he.target.value)||0})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200",placeholder:`Default: ${s!=null&&s.chapters.length?s.chapters.length+1:1}`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),c.jsx("input",{type:"text",value:M.title,onChange:he=>P(ke=>({...ke,title:he.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200",placeholder:"Enter chapter title"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex justify-between",children:["Plot Summary",c.jsx("button",{onClick:he=>{he.preventDefault(),ge(!0)},className:"text-indigo-600 hover:underline text-sm",children:"View"})]}),c.jsx("textarea",{value:M.plot,onChange:he=>P(ke=>({...ke,plot:he.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200 min-h-[200px] resize-y",placeholder:"Describe the chapter's plot",style:Dt})]}),c.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[c.jsx("button",{onClick:ct,className:"flex-1 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition-colors duration-200 shadow-lg hover:shadow-indigo-200",children:H?"Save Changes":"Add Chapter"}),c.jsx("button",{onClick:()=>{R(!1),$(null),P({number:0,title:"",plot:""})},className:"flex-1 bg-gray-100 text-gray-700 px-6 py-3 rounded-xl hover:bg-gray-200 transition-colors duration-200",children:"Cancel"})]})]})]})}),pe&&c.jsx("div",{className:"fixed top-[12vh] right-[0%] h-[76vh] w-[28%] bg-white shadow-xl border border-gray-200 z-50 animate-slide-in-right rounded-xl",children:c.jsxs("div",{className:"p-6 relative",children:[c.jsx("button",{onClick:()=>ge(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:c.jsx(Nr,{size:24})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Synopis"}),c.jsx("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-100 max-h-[80vh] overflow-y-auto",children:c.jsx("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:M.plot})})]})}),(v||D)&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 relative animate-fade-in",children:[c.jsx("button",{onClick:()=>{S(!1),B(null),N({term:"",description:""})},className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:c.jsx(Nr,{size:24})}),c.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-6",children:D?"Edit Term":"Add New Term"}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Term"}),c.jsx("input",{type:"text",value:T.term,onChange:he=>N(ke=>({...ke,term:he.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-shadow duration-200",placeholder:"Enter term name"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),c.jsx("textarea",{value:T.description,onChange:he=>N(ke=>({...ke,description:he.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-shadow duration-200 min-h-[100px]",placeholder:"Describe the term"})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx("button",{onClick:ot,className:"flex-1 bg-purple-600 text-white px-6 py-3 rounded-xl hover:bg-purple-700 transition-colors duration-200 shadow-lg hover:shadow-purple-200",children:D?"Save Changes":"Add Term"}),c.jsx("button",{onClick:()=>{S(!1),B(null),N({term:"",description:""})},className:"flex-1 bg-gray-100 text-gray-700 px-6 py-3 rounded-xl hover:bg-gray-200 transition-colors duration-200",children:"Cancel"})]})]})]})})]})}const ii="http://127.0.0.1:8000";function OE({novelId:n,onBack:l}){var _t,yt,on,Rn;const[s,d]=W.useState(null),[f,g]=W.useState(null),[p,y]=W.useState(null),[w,v]=W.useState(""),[S,_]=W.useState(!1),[R,D]=W.useState(!1),[B,H]=W.useState(0),[$,T]=W.useState([]),[N,M]=W.useState(!1),[P,O]=W.useState([]),[F,b]=W.useState(0),[U,Y]=W.useState(""),[re,se]=W.useState(!1),[le,ce]=W.useState([]),[j,q]=W.useState(""),[X,te]=W.useState(!1),[Q,C]=W.useState(!0),[L,A]=W.useState(!1),K=()=>{O(Array(le.length).fill(""))},[pe,ge]=W.useState(""),[ve,Ce]=W.useState(!1),[je,Pe]=W.useState({}),[Te,We]=W.useState("A"),[ft,St]=W.useState("A"),[Pt,ot]=W.useState(!1),[ct,Lt]=W.useState("");W.useEffect(()=>{fetch(`${ii}/scenarios/${n}`).then(Ee=>Ee.json()).then(Ee=>{d(Ee);const He=Ee.chapters.flatMap(et=>et.episodes.map(qe=>({...qe,chapterNumber:et.number,chapterTitle:et.title,chapterId:et.id}))).sort((et,qe)=>et.chapterNumber===qe.chapterNumber?et.number-qe.number:et.chapterNumber-qe.chapterNumber);T(He)}).catch(Ee=>console.error("Error fetching scenario:",Ee))},[n]);const Ze=async Ee=>{var et;y(Ee);const He=$.findIndex(qe=>qe.id===Ee.id);He!==-1&&Oe(He),b(0),O([]);try{const qe=await fetch(`${ii}/novel_write/${n}/${Ee.chapterId}`);if(!qe.ok)throw new Error("Failed to fetch episode content");const ln=await qe.json();console.log("Fetched episode content:",ln);const hn=String(Ee.id);if(ln.episodes[hn]){const pn=ln.episodes[hn];Pe(sr=>({...sr,[hn]:pn}));const Hn=pn.A?"A":Object.keys(pn)[0]||"A";We(Hn),v(((et=pn[Hn])==null?void 0:et.content)||"")}else console.warn("Episode data not found in response",ln)}catch(qe){console.error("Error fetching episode content:",qe)}},Oe=Ee=>{Ee>=0&&Ee<$.length&&(H(Ee),y($[Ee]),g((s==null?void 0:s.chapters.find(He=>He.id===$[Ee].chapterId))||null))},Ft=(Ee,He,et)=>{Pe(qe=>({...qe,[Ee]:{...qe[Ee]||{},[He]:{content:et}}})),v(et)},Dt=async()=>{if(!(!s||!f||!p)){M(!0);try{const Ee={...je,[p.id]:{...je[p.id]||{},[Te]:{content:w}}},He={episodes:{[p.id]:{[Te]:{content:w}}}};await fetch(`${ii}/novel_write/${n}/${f.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(He)}),Pe(Ee),M(!1)}catch(Ee){console.error("Error saving content:",Ee),M(!1)}}},bt=()=>{se(!1)},Qt=async()=>{p&&ot(!0)},dn=async()=>{var He,et;if(!p)return;const Ee=((et=(He=je[p.id])==null?void 0:He[Te])==null?void 0:et.content)||"";if(!(!Ee||!ct)){M(!0);try{const qe=await fetch(`${ii}/regenerate_novel/${n}/${p.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({original_text:Ee,user_remark:ct})});if(!qe.ok)throw new Error("");const hn=(await qe.json()).modified_text;Pe(pn=>({...pn,[p.id]:{...pn[p.id]||{},[Te]:{content:hn}}})),v(hn),ot(!1),Lt("")}catch(qe){console.error("Regenerate failed:",qe)}finally{M(!1)}}},fn=async()=>{if(p){M(!0);try{if(!(await fetch(`${ii}/scenarios/${n}`)).ok)throw new Error("Failed to fetch scenario data");const He=L?`${ii}/generate_novel_fast/${n}/${p.id}`:`${ii}/generate_novel/${n}/${p.id}?step=1`,et=await fetch(He,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!et.ok)throw new Error("Failed to generate text");const qe=await et.json();if(L){const ln=p.id;Pe(hn=>({...hn,[ln]:{...hn[ln]||{},[Te]:{content:qe.generated_text}}})),v(qe.generated_text)}else q(qe.step1_output||""),ce(qe.step1_questions||[]),b(1),se(!0),te(!1),C(!0)}catch(Ee){console.error("Error generating text:",Ee)}finally{M(!1)}}},sn=async()=>{if(!p||!P)return;if(M(!0),!(await fetch(`${ii}/scenarios/${n}`)).ok)throw new Error("Failed to fetch scenario data");try{if(!(await fetch(`${ii}/generate_novel/${n}/${p.id}?step=2`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_answers:P,remark:U,edited_plot:pe})})).ok)throw new Error("Failed to complete step 2");await he(),bt()}catch(He){console.error("Error sending user response:",He)}finally{M(!1)}},he=async()=>{if(p){M(!0);try{if(!(await fetch(`${ii}/scenarios/${n}`)).ok)throw new Error("Failed to fetch scenario data");const He=await fetch(`${ii}/generate_novel/${n}/${p.id}?step=3`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!He.ok)throw new Error("Failed to generate final text");const et=await He.json();Pe(qe=>({...qe,[p.id]:{...qe[p.id]||{},[Te]:{content:et.generated_text}}})),v(et.generated_text),b(3)}catch(Ee){console.error("Error generating final text:",Ee)}finally{M(!1)}}},ke=async()=>{if(!f||!p){console.error("Error: Chapter or Episode is null.");return}if(confirm(`Plan ${Te} `))try{const Ee={episodes:{[p.id]:{[Te]:{content:""}}}},He=await fetch(`${ii}/novel_write/${n}/${f.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ee)});if(!He.ok)throw new Error(`Failed to clear content: ${He.status}`);console.log(`Plan ${Te} `),Pe(et=>({...et,[p.id]:{...et[p.id]||{},[Te]:{content:""}}})),v("")}catch(Ee){console.error("Error clearing content:",Ee)}},Ve=Ee=>Ee?Ee.length:0,Je=()=>c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:l,className:"text-gray-600 hover:text-gray-800 transition-colors",children:c.jsx(Ho,{className:"w-6 h-6"})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:""}),$.length>0&&c.jsxs("button",{onClick:()=>D(!R),className:"ml-auto flex items-center gap-2 bg-indigo-600 text-white px-6 py-2 rounded-full hover:bg-indigo-700 transition-colors duration-200 shadow-lg hover:shadow-indigo-200",children:[c.jsx(Vm,{size:20}),R?"Exit Preview":"Preview Mode"]})]});return s!=null&&s.chapters.length?R?c.jsxs("div",{className:"animate-fade-in",children:[c.jsx(Je,{}),c.jsx("div",{className:"fixed top-0 left-0 w-70 h-full bg-white border-r border-gray-200 pt-24 pb-20",children:c.jsxs("div",{className:"h-full overflow-y-auto px-4 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 hover:scrollbar-thumb-gray-400",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Table of Contents"}),c.jsx("div",{className:"space-y-6",children:s.chapters.map(Ee=>c.jsxs("div",{children:[c.jsxs("h4",{className:"font-medium text-gray-700 mb-2",children:["Chapter ",Ee.number,": ",Ee.title]}),c.jsx("div",{className:"space-y-1 ml-4",children:Ee.episodes.map(He=>c.jsxs("button",{onClick:()=>Ze(He),className:`w-full text-left px-3 py-1.5 rounded-lg text-sm transition-colors duration-200 ${(p==null?void 0:p.id)===He.id?"bg-indigo-50 text-indigo-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:["Episode ",He.number,": ",He.title]},He.id))})]},Ee.id))})]})}),c.jsxs("div",{className:"pl-64",children:[c.jsx("div",{className:"max-w-3xl mx-auto px-8 pt-8 pb-32",children:p?c.jsxs("div",{children:[c.jsx("div",{className:"mb-8",children:c.jsxs("div",{className:"flex flex-col items-start text-left border-b border-gray-200 pb-6",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-800",children:[c.jsxs("span",{className:"text-2xl font-bold",children:["Chapter ",p.chapterNumber]}),c.jsx("span",{className:"text-gray-400 mx-2",children:":"}),c.jsx("span",{className:"text-2xl font-bold",children:p.chapterTitle})]}),c.jsxs("div",{className:"flex items-center gap-2 text-gray-700 mt-2",children:[c.jsxs("span",{className:"text-xl",children:["Episode ",p.number]}),c.jsx("span",{className:"text-gray-400 mx-2",children:":"}),c.jsx("span",{className:"text-xl",children:p.title})]})]})}),c.jsxs("div",{className:"leading-relaxed text-gray-700 whitespace-pre-wrap text-lg tracking-wide",children:[c.jsx("div",{className:"flex gap-2 mb-4",children:["A","B","C"].map(Ee=>c.jsxs("button",{onClick:()=>St(Ee),className:`px-3 py-1 rounded-full text-sm border ${ft===Ee?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700"}`,children:["Plan ",Ee]},Ee))}),(yt=(_t=je[(p==null?void 0:p.id)||""])==null?void 0:_t[ft])!=null&&yt.content?c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-semibold text-indigo-600 mb-2",children:["Plan ",ft]}),c.jsx("div",{children:je[p.id][ft].content})]}):c.jsxs("p",{className:"text-gray-400 italic text-center",children:["Plan ",ft," "]})]})]}):c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-500",children:"No episodes available."})})}),c.jsx("div",{className:"fixed bottom-0 left-64 right-0 bg-white border-t border-gray-200",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-8 py-4 flex items-center justify-between",children:[c.jsxs("button",{onClick:()=>Oe(B-1),disabled:B===0,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors duration-200 ${B===0?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`,children:[c.jsx(s1,{size:20}),c.jsx("span",{children:"Previous Episode"})]}),c.jsxs("div",{className:"text-sm text-gray-500",children:["Episode ",B+1," of ",$.length]}),c.jsxs("button",{onClick:()=>Oe(B+1),disabled:B===$.length-1,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors duration-200 ${B===$.length-1?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"}`,children:[c.jsx("span",{children:"Next Episode"}),c.jsx(o1,{size:20})]})]})})]})]}):c.jsxs("div",{className:"animate-fade-in",children:[c.jsx(Je,{}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[c.jsx("div",{className:"lg:col-span-1",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl",children:c.jsx(bh,{className:"w-6 h-6 text-indigo-600"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Chapters"})]}),c.jsx("div",{className:"space-y-3",children:s.chapters.map(Ee=>c.jsxs("div",{className:"space-y-1",children:[c.jsxs("button",{onClick:()=>g(Ee),className:`w-full text-left p-4 rounded-xl transition-colors duration-200 ${(f==null?void 0:f.id)===Ee.id?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50 text-gray-700"}`,children:[c.jsxs("div",{className:"font-medium",children:["Chapter ",Ee.number]}),c.jsx("div",{className:"text-sm text-gray-500",children:Ee.title})]}),(f==null?void 0:f.id)===Ee.id&&Ee.episodes.length>0&&c.jsx("div",{className:"ml-4 pl-4 border-l-2 border-indigo-100",children:Ee.episodes.map(He=>c.jsxs("button",{onClick:()=>{Ze(He),_(!1)},className:`w-full text-left py-2 px-3 rounded-lg text-sm transition-colors duration-200 ${(p==null?void 0:p.id)===He.id?"bg-purple-50 text-purple-700 font-medium":"hover:bg-gray-50 text-gray-600"}`,children:["Episode ",He.number,": ",He.title]},He.id))})]},Ee.id))})]})}),c.jsx("div",{className:"lg:col-span-3",children:p?c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[c.jsx("div",{className:"mb-6",children:c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl border border-indigo-100",children:c.jsxs("div",{className:"text-sm font-medium text-indigo-400",children:["EP.",p.number]})}),c.jsx("div",{children:c.jsx("h4",{className:"text-xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:p.title})})]})})}),S&&c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"grid grid-cols-1 gap-4 p-4 bg-gray-50 rounded-xl",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Plot Summary"}),c.jsx("p",{className:"text-sm text-gray-600",children:p.plot})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-gray-200",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Scene Details"}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"text-gray-500",children:"When:"})," ",p.sceneDetails.when]}),c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"text-gray-500",children:"Where:"})," ",p.sceneDetails.where]}),c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"text-gray-500",children:"Who:"})," ",p.sceneDetails.who.join(", ")]}),c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"text-gray-500",children:"What:"})," ",p.sceneDetails.what]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Key Dialogue"}),c.jsx("div",{className:"text-sm text-gray-600",children:p.sceneDetails.dialogue})]})]})]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("button",{onClick:()=>_(!S),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors px-4 py-2 rounded-lg hover:bg-gray-50",children:S?c.jsxs(c.Fragment,{children:[c.jsx(ir,{size:20}),c.jsx("span",{className:"text-sm",children:"Hide Details"})]}):c.jsxs(c.Fragment,{children:[c.jsx(Zp,{size:20}),c.jsx("span",{className:"text-sm",children:"Show Details"})]})}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-700 hover:text-gray-700 transition-colors text-sm font-medium",children:"Fast Mode"}),c.jsx("div",{className:`relative w-12 h-6 bg-gray-300 rounded-full cursor-pointer transition-all ${L?"bg-green-400":""}`,onClick:()=>A(!L),children:c.jsx("div",{className:`absolute left-1 top-1 w-4 h-4 bg-white rounded-full shadow-md transition-all ${L?"translate-x-6":""}`})})]}),c.jsxs("button",{onClick:Qt,disabled:N,className:"flex items-center gap-2 text-blue-500 hover:text-blue-600 transition-colors px-3 py-1.5 hover:bg-blue-50 rounded-lg text-sm",children:[c.jsx(kh,{size:16}),N?"Regenerating...":"Regenerate with AI"]}),c.jsxs("button",{onClick:fn,disabled:N,className:"flex items-center gap-2 text-amber-500 hover:text-amber-600 transition-colors px-3 py-1.5 hover:bg-amber-50 rounded-lg text-sm",children:[N?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-amber-500",viewBox:"0 0 24 24",fill:"none",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}):c.jsx(kh,{size:16}),N?"Generating...":"Generate with AI"]})]})]}),c.jsx("div",{className:"flex gap-2 mb-2",children:["A","B","C"].map(Ee=>c.jsxs("button",{onClick:()=>We(Ee),className:`px-3 py-1 rounded-full text-sm border ${Te===Ee?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700"}`,children:["Plan ",Ee]},Ee))}),c.jsx("textarea",{value:((Rn=(on=je[(p==null?void 0:p.id)||""])==null?void 0:on[Te])==null?void 0:Rn.content)||"",onChange:Ee=>Ft((p==null?void 0:p.id)||"",Te,Ee.target.value),className:"w-full bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200 leading-relaxed text-gray-700",style:{height:"384px",backgroundImage:`
                      repeating-linear-gradient(
                        transparent,
                        transparent 31px,
                        #e5e7eb 31px,
                        #e5e7eb 32px
                      )
                    `,backgroundSize:"100% 32px",backgroundAttachment:"local",lineHeight:"32px",padding:"0 16px"}}),re&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-lg relative",style:{maxHeight:"80vh",overflowY:"auto"},children:[c.jsx("button",{onClick:bt,className:"absolute top-3 right-3 text-gray-500 hover:text-gray-700",children:c.jsx(Nr,{size:20})}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex justify-between items-center py-4 rounded-lg",children:[c.jsxs("button",{onClick:()=>te(!X),className:"flex items-center gap-2 text-gray-700 hover:text-gray-900 transition-colors",children:[X?c.jsx(ir,{size:20}):c.jsx(Zp,{size:20}),c.jsx("h2",{className:"text-xl font-bold",children:"Plot Summary"})]}),c.jsx("button",{onClick:()=>{ve||ge(pe||j||""),Ce(!ve)},className:"text-gray-700 hover:text-gray-900 transition-colors ml-auto",children:c.jsx(ts,{size:20})})]}),X&&c.jsx("div",{className:"mt-2 p-4 bg-gray-100 rounded-lg border border-gray-300 text-gray-700 whitespace-pre-wrap",children:ve?c.jsx("textarea",{value:pe,onChange:Ee=>ge(Ee.target.value),className:"w-full bg-gray-100 rounded-lg p-2 mt-1",placeholder:"Edit the plot here...",rows:5}):c.jsx("div",{children:pe||j||"No plot summary available."})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("button",{onClick:()=>C(!Q),className:"flex items-center gap-2 text-gray-700 hover:text-gray-900 transition-colors",children:[Q?c.jsx(ir,{size:20}):c.jsx(Zp,{size:20}),c.jsx("h2",{className:"text-xl font-bold",children:"Answer the Questions"})]}),Q&&c.jsx("div",{className:"mt-2 p-4 bg-gray-100 rounded-lg border border-gray-300 text-gray-700 whitespace-pre-wrap text-left",children:le.map((Ee,He)=>c.jsxs("div",{className:"mb-2",children:[c.jsxs("strong",{children:["Q",He+1,":"]})," ",Ee,c.jsx("textarea",{value:P[He]||"",onChange:et=>{const qe=[...P];qe[He]=et.target.value,O(qe)},className:"w-full border border-gray-300 rounded-lg p-2 mt-1",placeholder:"Please enter your answer here...",rows:2,required:!0})]},He))})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("h2",{className:"text-xl font-bold mb-2",children:"Additional Notes (Optional)"}),c.jsx("textarea",{value:U,onChange:Ee=>Y(Ee.target.value),className:"w-full border border-gray-300 rounded-lg p-2 mt-1",placeholder:"Enter any additional details or corrections you'd like to provide...",rows:3})]}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:sn,disabled:N,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[N?c.jsx(d1,{className:"animate-spin h-5 w-5 text-white"}):c.jsx(g1,{size:20}),c.jsx("span",{children:N?"Submitting...":"Submit"})]})}),c.jsxs("button",{onClick:K,className:"flex items-center gap-2 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:[c.jsx(Nr,{size:20}),"Reset All"]})]})]})}),Pt&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 z-50 flex items-center justify-center",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-xl p-6 relative",children:[c.jsx("button",{className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",onClick:()=>ot(!1),children:c.jsx(Nr,{size:20})}),c.jsx("h2",{className:"text-xl font-bold mb-4 text-indigo-600",children:""}),c.jsx("textarea",{className:"w-full border border-gray-300 rounded-lg p-3 mb-4",rows:5,placeholder:" /  ",value:ct,onChange:Ee=>Lt(Ee.target.value),style:{height:"160px",backgroundImage:`
                            repeating-linear-gradient(
                              transparent,
                              transparent 31px,
                              #e5e7eb 31px,
                              #e5e7eb 32px
                            )
                          `,backgroundSize:"100% 32px",backgroundAttachment:"local",lineHeight:"32px",padding:"0 16px"}}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",onClick:dn,disabled:N||!ct,children:N?"Refining...":"Refine"}),c.jsx("button",{className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",onClick:()=>ot(!1),children:"Cancel"})]})]})}),c.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-gray-100",children:[c.jsxs("div",{className:"text-sm text-gray-600 mr-auto",children:[c.jsx("span",{className:"font-medium",children:Ve(w)})," characters"]}),c.jsxs("button",{onClick:Dt,className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition-colors duration-200 shadow-lg hover:shadow-indigo-200",children:[c.jsx(qm,{size:20}),"Save Content"]}),c.jsxs("button",{onClick:ke,className:"flex items-center gap-2 bg-red-600 text-white px-6 py-3 rounded-xl hover:bg-red-700 transition-colors duration-200 shadow-lg hover:shadow-red-200",children:[c.jsx(Ym,{size:20}),"Clear Content"]})]})]})]}):c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[c.jsx(Eh,{size:48,className:"mx-auto text-gray-300 mb-4"}),c.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"Select an Episode"}),c.jsxs("p",{className:"text-gray-500",children:["Choose an episode from the sidebar to start writing.",c.jsx("br",{}),"If no episodes exist, create one in the ",c.jsx("strong",{children:"Episode Details"})," section."]})]})})]})]}):c.jsxs("div",{className:"animate-fade-in",children:[c.jsx(Je,{}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center max-w-2xl mx-auto",children:[c.jsx(Eh,{size:64,className:"mx-auto text-gray-300 mb-6"}),c.jsx("h3",{className:"text-2xl font-medium text-gray-800 mb-4",children:"Ready to Start Writing?"}),c.jsxs("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:["Before you can start writing, you'll need to set up your story structure. Head over to the ",c.jsx("strong",{children:"Scenario Management"})," section to create your first chapter."]})]})]})}const Hs="http://127.0.0.1:8000";function IE({novelId:n,onBack:l,onEpisodeCreated:s}){const[d,f]=W.useState(null),[g,p]=W.useState([]),[y,w]=W.useState([]),[v,S]=W.useState(null),[_,R]=W.useState(null),[D,B]=W.useState(!1),[H,$]=W.useState(!1),[T,N]=W.useState(!1),[M,P]=W.useState(""),[O,F]=W.useState({chapterId:"",chapterNumber:0,chapterTitle:"",number:0,title:"",plot:"",sceneDetails:{when:"",where:"",who:[],what:"",dialogue:""}}),[b,U]=W.useState(!1),[Y,re]=W.useState(!1);W.useEffect(()=>{fetch(`${Hs}/scenarios/${n}`).then(C=>C.json()).then(C=>{f(C),w(C.timeline||[])}).catch(C=>console.error("Error fetching scenario:",C))},[n]),W.useEffect(()=>{fetch(`${Hs}/characters/${n}`).then(C=>C.json()).then(C=>p(C)).catch(C=>console.error("Error fetching characters:",C))},[n]);const se=C=>{const L=C.target.value,A=y.find(K=>K.when===L);F(K=>({...K,sceneDetails:{...K.sceneDetails,when:L,where:(A==null?void 0:A.where)||"",what:(A==null?void 0:A.what)||""}}))},le=async()=>{if(!d||!v||!O.title.trim())return;const C={method:_?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...O,chapterId:v==null?void 0:v.id,chapterNumber:v==null?void 0:v.number,chapterTitle:v==null?void 0:v.title})},L=_?`${Hs}/episodes/${n}/${_.id}`:`${Hs}/episodes/${n}`;try{if(!(await fetch(L,C)).ok)throw new Error("Failed to save episode");const pe=await(await fetch(`${Hs}/scenarios/${n}`)).json();pe.chapters.forEach(Ce=>{Ce.episodes.sort((je,Pe)=>je.number-Pe.number)}),f(pe);const ge=pe.chapters.find(Ce=>Ce.id===v.id);S(ge||null);const ve=ge==null?void 0:ge.episodes.find(Ce=>Ce.id===((_==null?void 0:_.id)||pe.id));R(ve||null),ge&&F({chapterId:ge.id,chapterNumber:ge.number,chapterTitle:ge.title,number:ve?ve.number:(ge.episodes.length||0)+1,title:ve?ve.title:"",plot:ve?ve.plot:"",sceneDetails:ve?{...ve.sceneDetails}:{when:"",where:"",who:[],what:"",dialogue:""}}),B(!1),!_&&s&&s(pe.id)}catch(A){console.error("Error saving episode:",A)}},ce=C=>{R(C),F({chapterId:C.chapterId,chapterNumber:C.chapterNumber,chapterTitle:C.chapterTitle,number:C.number,title:C.title,plot:C.plot,sceneDetails:{when:C.sceneDetails.when,where:C.sceneDetails.where,who:C.sceneDetails.who,what:C.sceneDetails.what,dialogue:C.sceneDetails.dialogue}}),B(!0)},j=async C=>{if(!(!d||!v||!confirm("Are you sure you want to delete this episode?")))try{if(!(await fetch(`${Hs}/episodes/${n}/${C}`,{method:"DELETE"})).ok)throw new Error("Failed to delete episode");const K=await(await fetch(`${Hs}/scenarios/${n}`)).json();K.chapters.forEach(ge=>{ge.episodes.sort((ve,Ce)=>ve.number-Ce.number)}),f(K);const pe=K.chapters.find(ge=>ge.id===v.id);S(pe||null),(_==null?void 0:_.id)===C&&(R(null),F({chapterId:"",chapterNumber:0,chapterTitle:"",number:pe?pe.episodes.length+1:1,title:"",plot:"",sceneDetails:{when:"",where:"",who:[],what:"",dialogue:""}}))}catch(L){console.error("Error deleting episode:",L)}},q=async()=>{re(!0);const{plot:C,sceneDetails:L}=O;try{const K=await(await fetch(`${Hs}/generate_dialogue/${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plot:C,sceneDetails:L})})).json();F(pe=>({...pe,sceneDetails:{...pe.sceneDetails,dialogue:K.dialogue}}))}catch(A){console.error("Failed to generate dialogue",A)}finally{re(!1)}},X={backgroundImage:`
      linear-gradient(transparent 27px, #e5e7eb 28px),
      linear-gradient(90deg, #f3f4f6 0px, transparent 1px)
    `,backgroundSize:"100% 28px",backgroundAttachment:"local",lineHeight:"28px",padding:"0 16px",paddingTop:"0"},te=()=>{const C=H?g:g.slice(0,3);return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Who (Characters)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[g.length>3&&c.jsxs("button",{onClick:()=>$(!H),className:"text-gray-600 hover:text-gray-800 flex items-center gap-1 text-sm",children:[c.jsx("span",{children:H?"Show Less":`+${g.length-3} More`}),c.jsx(ir,{size:16,className:`transform transition-transform ${H?"rotate-180":""}`})]}),c.jsxs("button",{onClick:()=>N(!0),className:"text-indigo-600 hover:text-indigo-700 flex items-center gap-1 text-sm",children:[c.jsx(x1,{size:16}),"Add Character"]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:C.map(L=>c.jsx("button",{onClick:()=>{const A=O.sceneDetails.who,K=A.includes(L.name);F(pe=>({...pe,sceneDetails:{...pe.sceneDetails,who:K?A.filter(ge=>ge!==L.name):[...A,L.name]}}))},className:`px-3 py-1.5 rounded-lg text-sm transition-colors duration-200 ${O.sceneDetails.who.includes(L.name)?"bg-indigo-100 text-indigo-700 hover:bg-indigo-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:L.name},L.id))}),c.jsx("textarea",{value:O.sceneDetails.who.join(`
`),onChange:L=>F(A=>({...A,sceneDetails:{...A.sceneDetails,who:L.target.value.split(`
`).map(K=>K.trim()).filter(Boolean)}})),className:"w-full bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200 resize-y",placeholder:"Enter additional characters",rows:4,style:X})]})]})},Q=()=>c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:l,className:"text-gray-600 hover:text-gray-800 transition-colors",children:c.jsx(Ho,{className:"w-6 h-6"})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:""})]});return d!=null&&d.chapters.length?c.jsxs("div",{className:"animate-fade-in",children:[c.jsx(Q,{}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[c.jsx("div",{className:"lg:col-span-1",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl",children:c.jsx(jh,{className:"w-6 h-6 text-indigo-600"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Chapters"})]}),c.jsx("div",{className:"space-y-3",children:d.chapters.map((C,L)=>c.jsxs("div",{className:"space-y-1",children:[c.jsxs("button",{onClick:()=>S(C),className:`w-full text-left p-4 rounded-xl transition-colors duration-200 ${(v==null?void 0:v.id)===C.id?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50 text-gray-700"}`,children:[c.jsxs("div",{className:"font-medium",children:["Chapter ",C.number]}),c.jsx("div",{className:"text-sm text-gray-500",children:C.title})]}),(v==null?void 0:v.id)===C.id&&C.episodes.length>0&&c.jsx("div",{className:"ml-4 pl-4 border-l-2 border-indigo-100",children:C.episodes.slice().sort((A,K)=>A.number-K.number).map(A=>c.jsxs("button",{onClick:()=>{R(A),F({chapterId:v.id,chapterNumber:v.number,chapterTitle:v.title,number:A.number,title:A.title,plot:A.plot,sceneDetails:{when:A.sceneDetails.when,where:A.sceneDetails.where,who:A.sceneDetails.who,what:A.sceneDetails.what,dialogue:A.sceneDetails.dialogue}}),B(!0)},className:`w-full text-left py-2 px-3 rounded-lg text-sm transition-colors duration-200 ${(_==null?void 0:_.id)===A.id?"bg-purple-50 text-purple-700 font-medium":"hover:bg-gray-50 text-gray-600"}`,children:["Episode ",A.number,": ",A.title]},A.id||`episode-${L}`))})]},`${C.id}-${L}`))})]})}),c.jsx("div",{className:"lg:col-span-3",children:v?c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Chapter ",v.number,": ",v.title]}),c.jsx("p",{className:"text-gray-600 mt-1",children:b?c.jsxs(c.Fragment,{children:[v.plot,c.jsx("button",{onClick:()=>U(!1),className:"text-blue-600 hover:underline ml-2",children:""})]}):c.jsxs(c.Fragment,{children:[v.plot.length>100?`${v.plot.slice(0,100)}...`:v.plot,v.plot.length>100&&c.jsx("button",{onClick:()=>U(!0),className:"text-blue-600 hover:underline ml-2",children:""})]})})]}),c.jsxs("button",{onClick:()=>{var C;B(!0),R(null),F({chapterId:v.id,chapterNumber:v.number,chapterTitle:v.title,number:(((C=v==null?void 0:v.episodes)==null?void 0:C.length)||0)+1,title:"",plot:"",sceneDetails:{when:"",where:"",who:[],what:"",dialogue:""}})},className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-full hover:bg-indigo-700 transition-colors duration-200 shadow-lg hover:shadow-indigo-200 self-start flex-none whitespace-nowrap",children:[c.jsx(rs,{size:20}),"Add Episode"]})]}),c.jsxs("div",{className:"space-y-2",children:[v.episodes.slice().sort((C,L)=>C.number-L.number).map(C=>c.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-100 rounded-xl hover:shadow-md transition-shadow duration-200 bg-white",children:[c.jsx("div",{className:"flex-1 cursor-pointer",onClick:()=>ce(C),children:c.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:["Episode ",C.number,": ",C.title]})}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>ce(C),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-full transition-colors",title:"Edit episode",children:c.jsx(ts,{size:18})}),c.jsx("button",{onClick:()=>j(C.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Delete episode",children:c.jsx(ql,{size:18})})]})]},C.id)),v.episodes.length===0&&c.jsxs("div",{className:"text-center py-12 border border-dashed border-gray-200 rounded-xl",children:[c.jsx(Ed,{size:48,className:"mx-auto text-gray-300 mb-4"}),c.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"No Episodes Yet"}),c.jsx("p",{className:"text-gray-500",children:'Click the "Add Episode" button to create your first episode'})]})]})]}):c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[c.jsx(Ed,{size:48,className:"mx-auto text-gray-300 mb-4"}),c.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"Select a Chapter"}),c.jsx("p",{className:"text-gray-500",children:"Choose a chapter from the sidebar to manage episodes"})]})})]}),D&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl shadow-2xl w-full max-w-4xl p-8 relative animate-fade-in overflow-y-auto max-h-[90vh]",children:[c.jsx("button",{onClick:()=>{var C;B(!1),R(null),F({chapterId:(v==null?void 0:v.id)||"",chapterNumber:(v==null?void 0:v.number)||0,chapterTitle:(v==null?void 0:v.title)||"",number:(((C=v==null?void 0:v.episodes)==null?void 0:C.length)||0)+1,title:"",plot:"",sceneDetails:{when:"",where:"",who:[],what:"",dialogue:""}})},className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:c.jsx(Nr,{size:24})}),c.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-6",children:_?"Edit Episode":"Add New Episode"}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Episode Number"}),c.jsx("input",{type:"number",min:"1",value:O.number||"",onChange:C=>F(L=>({...L,number:parseInt(C.target.value)||0})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200",placeholder:`Default: ${v!=null&&v.episodes.length?v.episodes.length+1:1}`})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),c.jsx("input",{type:"text",value:O.title,onChange:C=>F(L=>({...L,title:C.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200",placeholder:"Enter episode title"})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[c.jsx("div",{className:"flex items-center justify-between mb-2",children:c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Plot Summary"})}),c.jsx("textarea",{value:O.plot,onChange:C=>F(L=>({...L,plot:C.target.value})),className:"w-full border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200 resize-y",placeholder:"Describe the episode's plot",rows:4,style:X})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-6",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Scene Details"})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-1",children:"When"}),c.jsxs("div",{className:"flex items-center px-3 py-1 gap-1",children:[c.jsx(xg,{size:20,className:"text-gray-500"}),c.jsxs("select",{value:O.sceneDetails.when,onChange:se,className:"pl-3 pr-6 py-1 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500",children:[c.jsx("option",{value:"",children:"Select"}),y.map(C=>c.jsx("option",{value:C.when,children:C.when},C.id))]})]})]}),c.jsx("div",{className:"mb-4"}),c.jsx("textarea",{value:O.sceneDetails.when,onChange:C=>F(L=>({...L,sceneDetails:{...L.sceneDetails,when:C.target.value}})),className:"w-full bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200 resize-y",placeholder:"Time and date setting",rows:3,style:X})]}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[c.jsx("div",{className:"flex items-start justify-between mb-2",children:c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Where"})}),c.jsx("div",{className:"mb-6"}),c.jsx("textarea",{value:O.sceneDetails.where,onChange:C=>F(L=>({...L,sceneDetails:{...L.sceneDetails,where:C.target.value}})),className:"w-full bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200 resize-y",placeholder:"Location details",rows:3,style:X})]})]}),c.jsx("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:te()}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What (Main Action/Event)"}),c.jsx("textarea",{value:O.sceneDetails.what,onChange:C=>F(L=>({...L,sceneDetails:{...L.sceneDetails,what:C.target.value}})),className:"w-full bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200 resize-y",placeholder:"Describe the main action or event",rows:4,style:X})]}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Key Dialogue"}),c.jsxs("button",{onClick:q,disabled:Y,className:"flex items-center gap-2 text-amber-500 hover:text-amber-600 transition-colors px-3 py-1.5 hover:bg-amber-50 rounded-lg text-sm",children:[Y?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-amber-500",viewBox:"0 0 24 24",fill:"none",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}):c.jsx(kh,{size:16}),Y?"Generating...":"Generate with AI"]})]}),c.jsx("textarea",{value:O.sceneDetails.dialogue,onChange:C=>F(L=>({...L,sceneDetails:{...L.sceneDetails,dialogue:C.target.value}})),className:"w-full bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200 resize-y",placeholder:"Important dialogue or conversation points",rows:6,style:X})]})]}),c.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[c.jsx("button",{onClick:le,className:"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-3 rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-indigo-200",children:_?"Save Changes":"Add Episode"}),c.jsx("button",{onClick:()=>{var C;B(!1),R(null),F({chapterId:(v==null?void 0:v.id)||"",chapterNumber:(v==null?void 0:v.number)||0,chapterTitle:(v==null?void 0:v.title)||"",number:(((C=v==null?void 0:v.episodes)==null?void 0:C.length)||0)+1,title:"",plot:"",sceneDetails:{when:"",where:"",who:[],what:"",dialogue:""}})},className:"flex-1 bg-gray-100 text-gray-700 px-6 py-3 rounded-xl hover:bg-gray-200 transition-colors duration-200",children:"Cancel"})]})]})]})}),T&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 w-full max-w-md",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add New Character"}),c.jsx("input",{type:"text",value:M,onChange:C=>P(C.target.value),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter character name"}),c.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[c.jsx("button",{onClick:()=>{if(M.trim()){const C={name:M.trim(),novelId:n,groups:[]};fetch(`${Hs}/characters/${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)}).then(L=>L.json()).then(L=>{p(A=>[...A,L]),F(A=>({...A,sceneDetails:{...A.sceneDetails,who:[...A.sceneDetails.who,L.name]}}))}).catch(L=>console.error("Error adding character:",L))}P(""),N(!1)},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Add"}),c.jsx("button",{onClick:()=>{P(""),N(!1)},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Cancel"})]})]})})]}):c.jsxs("div",{className:"animate-fade-in",children:[c.jsx(Q,{}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center max-w-2xl mx-auto",children:[c.jsx(jh,{size:64,className:"mx-auto text-gray-300 mb-6"}),c.jsx("h3",{className:"text-2xl font-medium text-gray-800 mb-4",children:"No Chapters Found"}),c.jsxs("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:["To manage episodes, you need to create chapters first. ",c.jsx("br",{}),"Head over to the ",c.jsx("strong",{children:"Scenario Management"})," section to create your story structure."]})]})]})}const vh="http://127.0.0.1:8000";function $E({onBack:n}){const[l,s]=W.useState(""),[d,f]=W.useState(!1),[g,p]=W.useState("gpt-4o-mini"),[y,w]=W.useState("openai");W.useEffect(()=>{fetch(`${vh}/settings/api-key`).then(_=>_.json()).then(_=>s(_.api_key||"")).catch(_=>console.error("Error fetching API key:",_)),fetch(`${vh}/settings/model`).then(_=>_.json()).then(_=>p(_.model||"gpt-4o-mini")).catch(_=>console.error("Error fetching model setting:",_))},[]);const v=async()=>{f(!0);try{if(!(await fetch(`${vh}/settings/api_key?api_key_type=${y}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({api_key:l})})).ok)throw new Error("Failed to save API key");alert("API")}catch(_){console.error("Error saving API key:",_),alert("API")}finally{f(!1)}},S=async()=>{try{if(!(await fetch(`${vh}/settings/model`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:g})})).ok)throw new Error("Failed to save model");alert("")}catch(_){console.error("Error saving model:",_),alert("")}};return c.jsxs("div",{className:"animate-fade-in",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-full",children:c.jsx(Ho,{size:24,className:"text-gray-600"})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"API Key"})]}),c.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl",children:[c.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"API Key Type"}),c.jsxs("select",{value:y,onChange:_=>w(_.target.value),className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-indigo-500",children:[c.jsx("option",{value:"openai",children:"OpenAI"}),c.jsx("option",{value:"gemini",children:"Gemini"}),c.jsx("option",{value:"anthropic",children:"Anthropic (Claude)"})]}),c.jsx("label",{className:"block text-gray-700 text-sm font-medium py-3 mb-2",children:"API Key"}),c.jsx("input",{type:"text",value:l,onChange:_=>s(_.target.value),className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-indigo-500",placeholder:"sk-..."}),c.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[c.jsx("button",{onClick:v,className:"bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition-colors duration-200 shadow-lg",disabled:d,children:d?"Saving...":"Save"}),c.jsx("button",{onClick:n,className:"bg-gray-100 text-gray-700 px-6 py-3 rounded-xl hover:bg-gray-200 transition-colors duration-200",children:"Cancel"})]})]}),c.jsxs("div",{className:"mt-8 bg-white p-8 rounded-2xl shadow-xl",children:[c.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:""}),c.jsxs("select",{value:g,onChange:_=>p(_.target.value),className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-indigo-500",children:[c.jsx("option",{value:"gpt-4o-mini",children:"GPT-4o-mini"}),c.jsx("option",{value:"gpt-4o",children:"GPT-4o"}),c.jsx("option",{value:"gemini-2.0-flash",children:"Gemini 2.0 Flash"}),c.jsx("option",{value:"gemini-2.5-pro-exp-03-25",children:"Gemini 2.5 Pro"}),c.jsx("option",{value:"claude-3-7-sonnet-20250219",children:"Claude 3.7 Sonnet"})]}),c.jsx("div",{className:"mt-4 flex justify-end gap-4",children:c.jsx("button",{onClick:S,className:"bg-green-600 text-white px-6 py-3 rounded-xl hover:bg-green-700 transition-colors duration-200 shadow-lg",children:"Save Model"})})]})]})}function LE({novelId:n,onBack:l}){const[s,d]=W.useState([{role:"assistant",content:""}]),[f,g]=W.useState(""),[p,y]=W.useState(!1),[w,v]=W.useState(""),[S,_]=W.useState(!1),[R,D]=W.useState(!1);W.useEffect(()=>{fetch(`http://127.0.0.1:8000/scenarios/${n}`).then($=>$.json()).then($=>v($.synopsis||""))},[n]);const B=async()=>{_(!0);try{await fetch(`http://127.0.0.1:8000/scenarios/${n}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({synopsis:w})}),alert("")}catch{alert("")}finally{_(!1)}},H=async()=>{if(!f.trim())return;const $=[...s,{role:"user",content:f}];d($),g(""),y(!0);try{const N=await(await fetch(`http://127.0.0.1:8000/assist_synopsis_chat/${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({history:$,...R&&w?{synopsis:w}:{}})})).json();d([...$,{role:"assistant",content:N.reply}])}catch{alert("")}finally{y(!1)}};return c.jsxs("div",{className:"animate-fade-in max-w-screen-xl mx-auto p-6",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",title:"",children:c.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M15 18l-6-6 6-6"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:""})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 overflow-y-auto space-y-3 flex flex-col justify-between",style:{height:"calc(100vh - 250px)"},children:[c.jsxs("div",{className:"space-y-3 overflow-y-auto",children:[s.map(($,T)=>c.jsx("div",{className:`p-3 max-w-[80%] rounded-xl ${$.role==="user"?"ml-auto bg-blue-100 text-left":"mr-auto bg-gray-100 text-left"}`,children:$.content.split(`
`).map((N,M)=>c.jsxs(fe.Fragment,{children:[N,c.jsx("br",{})]},M))},T)),p&&c.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[c.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-indigo-500 rounded-full animate-spin"}),c.jsx("span",{children:"..."})]})]}),c.jsxs("div",{className:"mt-4 space-y-2",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",className:"flex-1 border rounded-xl px-4 py-2 shadow text-gray-800",value:f,onChange:$=>g($.target.value),onKeyDown:$=>$.key==="Enter"&&H(),disabled:p,placeholder:"..."}),c.jsx("button",{onClick:H,disabled:p,className:"bg-indigo-500 text-white px-4 py-2 rounded-xl hover:bg-indigo-600 transition disabled:opacity-50",children:"Send"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",checked:R,onChange:()=>D(!R),id:"include-synopsis"}),c.jsx("label",{htmlFor:"include-synopsis",className:"text-gray-700 text-sm",children:"AI"})]})]})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex flex-col",style:{height:"calc(100vh - 250px)"},children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:""}),c.jsx("textarea",{value:w,onChange:$=>v($.target.value),className:"flex-1 p-3 border rounded-md resize-none text-gray-800",rows:18,placeholder:"..."}),c.jsx("button",{onClick:B,className:"mt-4 self-end bg-green-600 text-white px-4 py-2 rounded-xl hover:bg-green-700 disabled:opacity-50",disabled:S,children:"Save"})]})]})]})}function FE({novelId:n,onBack:l}){const[s,d]=W.useState(""),[f,g]=W.useState(""),[p,y]=W.useState([]),[w,v]=W.useState(null),[S,_]=W.useState(null),[R,D]=W.useState(null),[B,H]=W.useState(""),[$,T]=W.useState(null),[N,M]=W.useState(!1),P=W.useRef(null),[O,F]=W.useState(null),[b,U]=W.useState("");W.useEffect(()=>{fetch(`http://127.0.0.1:8000/scenarios/${n}`).then(q=>q.json()).then(q=>{var Q,C;d(q.synopsis||""),y(q.chapters||[]);const X=Math.max(0,...((Q=q.chapters)==null?void 0:Q.map(L=>L.number))||[]);T(X+1);const te=(C=q.chapters)==null?void 0:C[0];if(te){v(te.id);const L=Math.max(0,...te.episodes.map(A=>A.number));F(L+1)}})},[n]);const Y=()=>{const q=window.getSelection();if(!q||q.rangeCount===0)return;const X=q.toString(),te=P.current;if(!te||!X.trim())return;const C=te.innerText.indexOf(X),L=C+X.length;g(X),_(C),D(L)},re=async()=>{if(f&&S!==null&&B&&$!==null){const q=crypto.randomUUID(),X={id:q,number:$,title:B,plot:f,episodes:[]},te=[...p,X];y(te),v(q),T(null),H(""),ce(),await le(te)}},se=async()=>{if(!w||O===null||!b){alert("");return}const q=p.findIndex(C=>C.id===w);if(q===-1)return;const X=p[q],te={id:crypto.randomUUID(),chapterId:X.id,chapterNumber:X.number,chapterTitle:X.title,number:O,title:b,plot:f,sceneDetails:{when:"",where:"",who:[],what:"",dialogue:""}},Q=[...p];Q[q]={...X,episodes:[...X.episodes,te]},y(Q),F(null),U(""),ce(),await le(Q)},le=async q=>{(await fetch(`http://127.0.0.1:8000/scenarios/${n}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({chapters:q})})).ok?alert(""):alert("")},ce=()=>{var q;g(""),_(null),D(null),(q=window.getSelection())==null||q.removeAllRanges()},j=()=>S===null||R===null?s:c.jsxs(c.Fragment,{children:[s.slice(0,S),c.jsx("mark",{className:"bg-yellow-200 text-black font-semibold",children:s.slice(S,R)}),s.slice(R)]});return c.jsxs("div",{className:"animate-fade-in",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:l,className:"text-gray-600 hover:text-gray-800 transition-colors",children:c.jsx(Ho,{className:"w-6 h-6"})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:""})]}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg mb-6 relative",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:""}),c.jsxs("div",{className:"absolute right-6 bottom-6 flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-gray-600",children:":"}),c.jsx("button",{onClick:()=>M(q=>!q),className:`relative inline-flex items-center h-8 rounded-full w-16 transition-colors duration-300 ${N?"bg-green-500":"bg-indigo-500"}`,children:c.jsx("span",{className:`inline-block w-6 h-6 transform bg-white rounded-full shadow-md transition-transform duration-300 ${N?"translate-x-8":"translate-x-1"}`})}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:N?"Episode":"Chapter"})]}),c.jsx("div",{ref:P,className:"whitespace-pre-wrap border border-gray-200 p-4 rounded-md cursor-text text-gray-800",onMouseUp:Y,children:j()}),f&&c.jsxs("div",{className:"mt-4 space-y-2",children:[c.jsx("p",{className:"text-sm text-gray-600",children:":"}),c.jsx("p",{className:"text-indigo-600 font-medium",children:f}),N?c.jsxs(c.Fragment,{children:[c.jsxs("select",{value:w??"",onChange:q=>{const X=q.target.value;v(X);const te=p.find(Q=>Q.id===X);if(te){const Q=Math.max(0,...te.episodes.map(C=>C.number));F(Q+1)}},className:"border rounded px-2 py-1 w-full",children:[c.jsx("option",{value:"",children:""}),p.map(q=>c.jsxs("option",{value:q.id,children:[q.number,". ",q.title]},q.id))]}),c.jsx("input",{type:"number",placeholder:"",value:O??"",onChange:q=>F(Number(q.target.value)),className:"border rounded px-2 py-1 w-full"}),c.jsx("input",{type:"text",placeholder:"",value:b,onChange:q=>U(q.target.value),className:"border rounded px-2 py-1 w-full"}),c.jsxs("button",{onClick:se,className:"inline-flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-full hover:bg-green-700 transition-colors",children:[c.jsx(rs,{size:16})," Episode"]})]}):c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"number",placeholder:"",value:$??"",onChange:q=>T(Number(q.target.value)),className:"border rounded px-2 py-1 w-full"}),c.jsx("input",{type:"text",placeholder:"",value:B,onChange:q=>H(q.target.value),className:"border rounded px-2 py-1 w-full"}),c.jsxs("button",{onClick:re,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-full hover:bg-indigo-700 transition-colors",children:[c.jsx(rs,{size:16})," Chapter"]})]}),c.jsx("button",{onClick:ce,className:"inline-flex items-center gap-2 bg-gray-300 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-400 transition-colors",children:""})]})]})]})}const mg="http://127.0.0.1:8000";function HE({novel:n,onBack:l}){const[s,d]=fe.useState(null),[f,g]=W.useState(!0),[p,y]=W.useState({chapters:0,characters:0,episodes:0,totalCharacterCount:0});W.useEffect(()=>{(async()=>{g(!0);try{const S=await fetch(`${mg}/characters/${n.id}`);if(!S.ok)throw new Error("Failed to fetch characters");const _=await S.json();if(!Array.isArray(_))throw new Error("Invalid character data format");const R=await fetch(`${mg}/scenarios/${n.id}`);let D=null;if(R.ok)D=await R.json();else if(R.status!==404)throw new Error("Failed to fetch scenario");const B=(D==null?void 0:D.chapters)||[],H=B.reduce((T,N)=>{var M;return T+(((M=N.episodes)==null?void 0:M.length)||0)},0);let $=0;for(const T of B){const N=await fetch(`${mg}/novel_write/${n.id}/${T.id}`);if(!N.ok)continue;const M=await N.json();if(M.episodes)for(const P in M.episodes){const O=M.episodes[P];O.A&&typeof O.A.content=="string"&&($+=O.A.content.length)}}y({chapters:B.length,characters:_.length,episodes:H,totalCharacterCount:$})}catch(S){console.error("Error fetching data:",S),y({chapters:0,characters:0,episodes:0,totalCharacterCount:0})}finally{g(!1)}})()},[n.id,s]);const w=[{icon:Gm,title:"",description:"",path:"scenario"},{icon:Ed,title:"",description:"",path:"characters"},{icon:Eh,title:"",description:"AI",path:"episode-details"},{icon:P0,title:"",description:"",path:"write"},{icon:Xm,title:"",description:"",path:"memo-management"},{icon:h1,title:"",description:"AI",path:"synopsis-chat"},{icon:p1,title:"",description:"",path:"synopsis-split"},{icon:c1,title:"API",description:"OpenAIAPI",path:"api-key"}];return s==="characters"?c.jsx(y1,{novelId:n.id,onBack:()=>d(null)}):s==="scenario"?c.jsx(zE,{novelId:n.id,onBack:()=>d(null)}):s==="episode-details"?c.jsx(IE,{novelId:n.id,onBack:()=>d(null)}):s==="write"?c.jsx(OE,{novelId:n.id,onBack:()=>d(null)}):s==="memo-management"?c.jsx(Dg,{novelId:n.id,onBack:()=>d(null)}):s==="synopsis-chat"?c.jsx(LE,{novelId:n.id,onBack:()=>d(null)}):s==="api-key"?c.jsx($E,{onBack:()=>d(null)}):s==="synopsis-split"?c.jsx(FE,{novelId:n.id,onBack:()=>d(null)}):c.jsxs("div",{className:"animate-fade-in",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",title:"Back to novels",children:c.jsx(Ho,{size:24,className:"text-gray-600"})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:n.title})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:w.map(v=>{const S=v.icon;return c.jsxs("button",{onClick:()=>d(v.path),className:"group p-6 bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-200 text-left hover:scale-[1.02] hover:bg-gradient-to-br hover:from-indigo-50 hover:to-purple-50",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[c.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl group-hover:bg-indigo-200 transition-colors",children:c.jsx(S,{size:24,className:"text-indigo-600"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:v.title})]}),c.jsx("p",{className:"text-gray-600",children:v.description})]},v.path)})}),f?c.jsx("div",{className:"mt-8 bg-white rounded-2xl shadow-lg p-6 text-center text-gray-600",children:"Loading..."}):c.jsxs("div",{className:"mt-8 bg-white rounded-2xl shadow-lg p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 rounded-xl",children:[c.jsx(Vm,{className:"text-blue-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Chapters"}),c.jsx("div",{className:"text-2xl font-bold text-blue-700",children:p.chapters})]})]}),c.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 rounded-xl",children:[c.jsx(P0,{className:"text-purple-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Episodes"}),c.jsx("div",{className:"text-2xl font-bold text-purple-700",children:p.episodes})]})]}),c.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 rounded-xl",children:[c.jsx(jh,{className:"text-green-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Characters"}),c.jsx("div",{className:"text-2xl font-bold text-green-700",children:p.characters})]})]}),c.jsxs("div",{className:"mt-2 p-4 bg-yellow-50 rounded-xl flex items-center gap-3 text-yellow-800 shadow col-span-3 w-full",children:[c.jsx(Eh,{className:"text-yellow-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-yellow-600 font-medium",children:"Total Character Count"}),c.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:p.totalCharacterCount})]})]})]})]})]})}const Au="http://127.0.0.1:8000",UE=W.memo(({onClose:n,onSave:l,formData:s,onChange:d,isEditing:f})=>c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 relative animate-fade-in",children:[c.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:c.jsx(Nr,{size:24})}),c.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-6",children:f?"Edit Novel":"Add New Novel"}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),c.jsx("input",{type:"text",name:"title",value:s.title,onChange:d,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200",placeholder:"Enter novel title"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cover Image URL"}),c.jsx("input",{type:"text",name:"imageUrl",value:s.imageUrl,onChange:d,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-200",placeholder:"Enter image URL"}),s.imageUrl&&c.jsxs("div",{className:"mt-2",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Preview:"}),c.jsx("img",{src:s.imageUrl,alt:"Cover preview",className:"w-full h-48 object-cover rounded-lg",onError:g=>{const p=g.target;p.src="https://via.placeholder.com/400x300?text=Invalid+Image+URL"}})]})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx("button",{onClick:l,className:"flex-1 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition-colors duration-200 shadow-lg hover:shadow-indigo-200",children:f?"Save Changes":"Add Novel"}),c.jsx("button",{onClick:n,className:"flex-1 bg-gray-100 text-gray-700 px-6 py-3 rounded-xl hover:bg-gray-200 transition-colors duration-200",children:"Cancel"})]})]})]})}));function BE(){const[n,l]=W.useState([]);W.useEffect(()=>{(async()=>{try{const P=await(await fetch(`${Au}/novels`)).json();l(P)}catch(M){console.error("Error fetching novels:",M)}})()},[]);const[s,d]=W.useState(!1),[f,g]=W.useState(!1),[p,y]=W.useState(null),[w,v]=W.useState({title:"",imageUrl:""}),[S,_]=W.useState(null),R=W.useCallback(async()=>{if(w.title.trim())try{if(p){const N={...p,title:w.title.trim(),imageUrl:w.imageUrl.trim()||void 0,updatedAt:new Date().toISOString()};if(!(await fetch(`${Au}/novels/${p.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)})).ok)throw new Error("Failed to update novel");l(P=>P.map(O=>O.id===p.id?N:O)),g(!1),y(null)}else{const N={id:crypto.randomUUID(),title:w.title.trim(),imageUrl:w.imageUrl.trim()||void 0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};if(!(await fetch(`${Au}/novels`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)})).ok)throw new Error("Failed to create novel");l(P=>[...P,N]),d(!1)}v({title:"",imageUrl:""})}catch(N){console.error("Error saving novel:",N),alert("Failed to save novel. Please try again.")}},[w,p]),D=W.useCallback(async N=>{try{const M=await fetch(`${Au}/novels/${N.id}`);if(!M.ok)throw new Error("Failed to fetch novel details");const P=await M.json();y(P),v({title:P.title,imageUrl:P.imageUrl||""}),g(!0)}catch(M){console.error("Error fetching novel details:",M),alert("Failed to load novel details. Please try again.")}},[]),B=async N=>{if(confirm("Are you sure you want to delete this novel?"))try{if(!(await fetch(`${Au}/novels/${N}`,{method:"DELETE"})).ok)throw new Error("Failed to delete novel");l(P=>P.filter(O=>O.id!==N))}catch(M){console.error("Error deleting novel:",M),alert("Failed to delete novel. Please try again.")}},H=W.useCallback(async N=>{try{const M=await fetch(`${Au}/novels/${N.id}`);if(!M.ok)throw new Error("Failed to fetch novel details");const P=await M.json();_(P)}catch(M){console.error("Error fetching novel details:",M),alert("Failed to load novel details. Please try again.")}},[_]),$=W.useCallback(N=>{const{name:M,value:P}=N.target;v(O=>({...O,[M]:P}))},[]),T=W.useCallback(()=>{d(!1),g(!1),y(null),v({title:"",imageUrl:""})},[v,d,g,y]);return S?c.jsx(HE,{novel:S,onBack:()=>_(null)}):c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:""}),c.jsxs("button",{onClick:()=>{d(!0),v({title:"",imageUrl:""})},className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-full hover:bg-indigo-700 transition-colors duration-200 shadow-lg hover:shadow-indigo-200",children:[c.jsx(rs,{size:20}),"Add Novel"]})]}),(s||f)&&c.jsx(UE,{onClose:T,onSave:R,formData:w,onChange:$,isEditing:!!p}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map(N=>c.jsxs("div",{className:"group bg-white rounded-2xl shadow-lg hover:shadow-xl transition-shadow duration-200 overflow-hidden",children:[c.jsx("div",{className:"aspect-w-16 aspect-h-9 bg-gray-50 cursor-pointer",onClick:()=>H(N),children:N.imageUrl?c.jsx("img",{src:N.imageUrl,alt:N.title,className:"w-full h-48 object-cover",onError:M=>{const P=M.target;P.src="https://via.placeholder.com/400x300?text=Invalid+Image+URL"}}):c.jsx("div",{className:"w-full h-48 flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100",children:c.jsx(T0,{size:48,className:"text-gray-300"})})}),c.jsxs("div",{className:"p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3 line-clamp-2 cursor-pointer",onClick:()=>H(N),children:N.title}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{className:"text-sm text-gray-500",children:["Last updated:"," ",new Date(N.updatedAt).toLocaleDateString()]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>D(N),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-full transition-colors duration-200",title:"Edit novel",children:c.jsx(ts,{size:20})}),c.jsx("button",{onClick:()=>B(N.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors duration-200",title:"Delete novel",children:c.jsx(ql,{size:20})})]})]})]})]},N.id))}),n.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx(T0,{size:64,className:"mx-auto text-gray-300 mb-4"}),c.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"No Novels Yet"}),c.jsx("p",{className:"text-gray-500",children:'Click the "Add Novel" button to create your first novel'})]})]})}function WE(){return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50",children:[c.jsx("header",{className:"bg-white/70 backdrop-blur-lg border-b border-indigo-100 sticky top-0 z-10",children:c.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(bh,{className:"w-8 h-8 text-indigo-600"}),c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 text-transparent bg-clip-text",children:"LiteraSynth Core"})]})})}),c.jsx("main",{className:"max-w-7xl mx-auto py-8 px-4",children:c.jsx(BE,{})})]})}n1.createRoot(document.getElementById("root")).render(c.jsx(W.StrictMode,{children:c.jsx(WE,{})}));
